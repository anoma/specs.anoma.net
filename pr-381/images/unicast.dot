digraph {
  layout = neato
  model = mds
  overlap = false
  start = 1

  fontname = "TeX Gyre Pagella"
  node [fontname="TeX Gyre Pagella"]

  bgcolor = transparent
  # cluster border
  pencolor = "#777777"
  edge [color="#555555"; arrowhead=vee; arrowtail=vee]
  # dark theme
  # fontcolor = white
  # node [color=white; fontcolor=white]
  # edge [color="#999999"

  node [shape=circle; style=bold]

  subgraph cluster_a {
    label = "Node A"
    labeljust = l

    A_R [shape=doublecircle]
    A_T
    A_X
    A_Y
    A_Z
  }

  subgraph cluster_b {
    label = "Node B"
    labeljust = r

    B_R [shape=doublecircle]
    B_T
    B_Y
    B_X
    B_Z
  }

  # Engine connections
  edge [len=1; dir=none]

  A_R -> { A_T A_X A_Y A_Z }
  B_R -> { B_T B_X B_Y B_Z }

  # Network connections
  edge [len=5; style=dashed];

  A_T -> B_T

  # Message paths
  edge [len=3; dir=forward; style=dashed; color=red]

  A_X -> A_R -> A_T -> B_T -> B_R -> B_X

}
