
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network.">
      
      
        <meta name="author" content="Anoma Foundation">
      
      
        <link rel="canonical" href="https://anoma.github.io/nspec/main/arch/node/ordering/a_complete_lifecycle.html">
      
      
      
      
      <link rel="icon" href="../../../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>A complete lifecycle - Anoma Specification</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../assets/css/style.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix-highlighting.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix_codeblock_footer.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix_codeblock_footer.css">
    
      <link rel="stylesheet" href="../../../assets/css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="A complete lifecycle - Anoma Specification" >
      
        <meta  property="og:description"  content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network." >
      
        <meta  property="og:image"  content="https://anoma.github.io/nspec/main/assets/images/social/arch/node/ordering/a_complete_lifecycle.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://anoma.github.io/nspec/main/arch/node/ordering/a_complete_lifecycle.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="A complete lifecycle - Anoma Specification" >
      
        <meta  name="twitter:description"  content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network." >
      
        <meta  name="twitter:image"  content="https://anoma.github.io/nspec/main/assets/images/social/arch/node/ordering/a_complete_lifecycle.png" >
      
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#a-life-cycle-with-some-details" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  For updates follow <strong>@anoma</strong> on
  <a rel="me" href="https://x.com/anoma">
    <span class="twemoji x-twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </span>
    <strong></strong>
  </a>
  and discuss on our
  <a href="https://research.anoma.net">
    <span class="twemoji discourse">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </span>
    <strong>forum</strong>
  </a>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest official version.
  <a href="../../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
        
  
    
  
  <header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Header">
      <a href="../../../index.html" title="Anoma Specification" class="md-header__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
        
  <img src="../../../assets/logo.svg" alt="logo">

      </a>
      <label class="md-header__button md-icon" for="__drawer">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
                
                <span class="first-letter">A</span>noma 
              
                <span class="first-letter">S</span>pecification
              
              
                <span class="md-header__topic-version">v0.1.1-e062c8019</span>
              
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              
                A complete lifecycle
              
            </span>
          </div>
        </div>
      </div>
      
        
          <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
        
      
      
        <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
      
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
      
    </nav>
    
      
        <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-grid">
    <ul class="md-tabs__list">
      
      
            
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

        
      
      
            
  
  
  
    <li class="md-tabs__item">
      <a href="../../../changelog.html" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../scope/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm10.78 2H19v12.18c-.26-.8-1.31-1.39-2.2-1.39h-1v-3a1 1 0 0 0-1-1h-6v-2h2a1 1 0 0 0 1-1v-2h2c1.03 0 1.87-.79 1.98-1.79M5 10.29l4.8 4.5v1a2 2 0 0 0 2 2V19H5z"/></svg>
    
  
  Scope

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../basic_abstractions/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
    
  
  Basic Abstractions

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 18.714v4.8c0 .288-.192.48-.48.48h-4.8c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92h-8.16v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H9.6c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92H3.36v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H.48c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48H2.4v-2.4c0-.288.192-.48.48-.48h8.64v-1.44h.96v1.44h8.64c.288 0 .48.192.48.48v2.4h1.92c.288 0 .48.192.48.48m-13.92 4.32h3.84v-3.84h-3.84zm-9.12 0H4.8v-3.84H.96Zm18.24 0h3.84v-3.84H19.2ZM6.24 9.642V3.546c0-.192.096-.336.24-.432L11.76.042a.8.8 0 0 1 .48 0l5.28 3.072c.144.096.24.24.24.432v6.096c0 .144-.096.288-.24.384l-5.28 3.072q-.096.048-.24.048t-.24-.048l-5.28-3.072c-.144-.096-.24-.24-.24-.384m10.56-.288V4.362l-4.32 2.496v4.992zm-9.6 0 4.32 2.496V6.858L7.2 4.362Zm.48-5.808L12 5.994l4.32-2.448L12 1.05Z"/></svg>
    
  
  Protocol Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../application_architecture/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20h4v-4h-4m0-2h4v-4h-4m-6-2h4V4h-4m6 4h4V4h-4m-6 10h4v-4h-4m-6 4h4v-4H4m0 10h4v-4H4m6 4h4v-4h-4M4 8h4V4H4z"/></svg>
    
  
  Application Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../implementation/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.793 16.575c0 3.752-2.927 7.426-7.743 7.426-5.249 0-7.843-3.71-7.843-8.29 0-5.21 3.892-12.952 8-15.647a.397.397 0 0 1 .61.371 9.72 9.72 0 0 0 1.694 6.518c.522.795 1.092 1.478 1.763 2.352.94 1.227 1.637 1.906 2.644 3.842l.015.028a7.1 7.1 0 0 1 .86 3.4"/></svg>
    
  
  Implementation

        </a>
      </li>
    
  

        
      
      
      
      
      
      
      
    </ul>
  </div>
</nav>
      
    
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Anoma Specification" class="md-nav__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    Anoma Specification
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 8.25a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5h-4A.75.75 0 0 1 5 8.25M4 10.5A.75.75 0 0 0 4 12h4a.75.75 0 0 0 0-1.5z"/><path d="M13-.005c1.654 0 3 1.328 3 3 0 .982-.338 1.933-.783 2.818-.443.879-1.028 1.758-1.582 2.588l-.011.017c-.568.853-1.104 1.659-1.501 2.446-.398.789-.623 1.494-.623 2.136a1.5 1.5 0 1 0 2.333-1.248.75.75 0 0 1 .834-1.246A3 3 0 0 1 13 16H3a3 3 0 0 1-3-3c0-1.582.891-3.135 1.777-4.506q.315-.483.623-.946c.473-.709.923-1.386 1.287-2.048H2.51c-.576 0-1.381-.133-1.907-.783A2.68 2.68 0 0 1 0 2.995a3 3 0 0 1 3-3Zm0 1.5a1.5 1.5 0 0 0-1.5 1.5c0 .476.223.834.667 1.132A.75.75 0 0 1 11.75 5.5H5.368c-.467 1.003-1.141 2.015-1.773 2.963-.192.289-.381.571-.558.845C2.13 10.711 1.5 11.916 1.5 13A1.5 1.5 0 0 0 3 14.5h7.401A3 3 0 0 1 10 13c0-.979.338-1.928.784-2.812.441-.874 1.023-1.748 1.575-2.576l.017-.026c.568-.853 1.103-1.658 1.501-2.448s.623-1.497.623-2.143c0-.838-.669-1.5-1.5-1.5m-10 0a1.5 1.5 0 0 0-1.5 1.5c0 .321.1.569.27.778.097.12.325.227.74.227h7.674A2.7 2.7 0 0 1 10 2.995c0-.546.146-1.059.401-1.5Z"/></svg>
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../scope/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Scope
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../basic_abstractions/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Basic Abstractions
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Protocol Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../application_architecture/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Application Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../implementation/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Implementation
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../indexes/links.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
  
  <span class="md-ellipsis">
    Quick links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../prelude.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Juvix modules
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../tutorial/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Tutorials for contributors
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>A complete lifecycle</h1>

<!-- --8<-- [start:all] -->

<h2 id="a-life-cycle-with-some-details">A life cycle with some details<a class="headerlink" href="#a-life-cycle-with-some-details" title="Permanent link">&para;</a></h2>
<p>Let us consider a typical/generic case
of what transaction submission triggers in the ordering machine.
Note that all message sending is asynchronous.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>removed <code>ExecutorProcess--)ExecutorProcess: .</code> just before
 <code>activate ExecutorProcess</code>. I'm not sure what it represented. --&gt;</p>
</div>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant Worker
    participant ExecutionSupervisor
    participant ExecutorProcess
    User-)Worker: TransactionRequest
    Worker--)Worker: fix batch №
    Worker-)User: TransactionAck
    Worker--)Worker: Buffering &amp; Shuffling
    Worker--)Worker: fix tx №
    Worker-)ExecutionSupervisor: spawnExecutor
    ExecutionSupervisor-)Worker: EPID
    Worker-)ExecutorProcess: ExecuteTransaction
    Worker-)Shard: KVSAcquireLock
    Shard-)Worker: KVSLockAcquired
    Worker-)Shard: UpdateSeenAll
    activate ExecutorProcess
    ExecutorProcess-)Shard: KVSReadRequest
    Shard-)ExecutorProcess: KVSRead
    ExecutorProcess-)Shard: KVSWrite(Request)
    %%    ExecutorProcess-)WhereToIdontKnow: pub sub information of execution data
    ExecutorProcess-)User: ExecutionSummary
    ExecutorProcess-)Worker: ExecutorFinished
    deactivate ExecutorProcess</code></pre>
<h3 id="the-origin-of-the-request">The origin of the request<a class="headerlink" href="#the-origin-of-the-request" title="Permanent link">&para;</a></h3>
<p><em>at user</em></p>
<p>The user creates a <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">TransactionCandidate</a> <span class="arithmatex">\(T\)</span>.</p>
<div class="arithmatex">\[T = \Bigl(\mathit{code},
    \underbrace{(r_e,r_l)}_{\text{read label}},
    \overbrace{(w_w,w_m)}^{\text{write label}}\Bigr)\]</div>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>transaction executable <span class="arithmatex">\(\mathit{code}\)</span>
eager read keys <span class="arithmatex">\(r_e\)</span>
lazy read keys <span class="arithmatex">\(r_l\)</span>
<span class="arithmatex">\(w_w\)</span> will-write keys
<span class="arithmatex">\(w_m\)</span> may-write keys</p>
</div>
<p>The User transmits the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">TransactionCandidate</a>,
packaged as a <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/transaction_request.html">TransactionRequest</a>,
to the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">worker</a>.</p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/transaction_request.html">TransactionRequest</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a><p>This message is the origin of the life cycle.</p>
</li>
</ul>
<!-- this is Isaac's original post
https://github.com/anoma/specs/issues/430#issuecomment-1935077194:

Each validator should have 1 executor, so yes, each validator should replicate these side effects.

Example:

- suppose the User wants to know if  / when whatever was supposed to happen as a result of their TransactionCandidate actually happened.
  - obviously they can't rely on a message from any single Validator, since (after V1) no one validator is necessarily trustworthy. They therefore have to receive messages from at least a (weak) quorum of validators.
  - They could include in their TransactionCandidate a side effect of the form: send a message to USER containing DETAILS ABOUT WHATEVER JUST HAPPENED.
    - when the User receives (identical) messages from a (weak) quorum of validator's executors, it knows that the messages' description of whatever just happened accurately reflects something that happened in the replicated state machine.

 In fact, this is exactly how any (trustworthy) read of the state machine's state should be done. This includes "checkpoint" reads where the details to be sent in the message is some kind of commitment (e.g. a Merkle Root) of the whole state of the state machine.
-->

<h3 id="acknowledging-the-userss-transactionrequest">Acknowledging the Users's TransactionRequest<a class="headerlink" href="#acknowledging-the-userss-transactionrequest" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<p>Once it is clear that the transaction can be included into the current
 batch, the transaction candidate is "stamped" with the current
 <em>batch number</em>.</p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_ack.html">TransactionAck</a> → user<p>This is mainly for purposes of UX,
  but gives also information for re-submission strategies.</p>
</li>
</ul>
<h3 id="buffering-and-shuffling-optional">Buffering and shuffling (optional)<a class="headerlink" href="#buffering-and-shuffling-optional" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<p>One may want to order each transaction request within a batch only after a
 minimum number of other requests are received such that they can be "slightly"
 re-ordered within a <em>very short</em> time period---for several reasons.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>add footnote / explain exactly the issues this avoids</p>
</div>
<h3 id="assigning-a-transaction-number">Assigning a transaction number<a class="headerlink" href="#assigning-a-transaction-number" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<p>Eventually, possibly triggered by a timer or when sufficiently many
 other transaction candidates have been received, the transaction
 request will be assigned a <em>transaction number</em>
 (within the current batch).
Together the batch and transaction numbers can form a unique
 <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a> for the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/transaction_request.html">TransactionRequest</a>.</p>
<p>Transaction Numbers can be assigned immediately from some set of
 available transaction numbers, provided this complies with the
 buffering and shuffling scheme.
For example, a worker could maintain a shuffled list of natural
 numbers for each batch, and assign them sequentially from the list.
Alternatively, a worker could assign Transaction Numbers sequentially,
in which case
<a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">transaction candidates</a> will end up ordered in the
 order they were received.
This may slightly change in V2.</p>
<h3 id="requesting-an-available-executor-engine">Requesting an available executor engine<a class="headerlink" href="#requesting-an-available-executor-engine" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<p>The <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> either directly spawns an <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a> process
 or contacts an <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/execution_supervisor/index.html">Execution Supervisor</a> that provides an
 <em>Executor Process ID</em> (EPID).</p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/execution_supervisor/spawn_executor.html">SpawnExecutor</a>→<a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/execution_supervisor/index.html">Execution Supervisor</a><p>Request a fresh process id of an available <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a>,
  typically a newly spawned executor engine instance.</p>
</li>
</ul>
<p>Note that the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/execution_supervisor/index.html">Execution Supervisor</a> cannot, in general,
wait for some existing <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a> processes to terminate
before spawning a new <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a> process.
It is possible that the existing <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a> is waiting for
a <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">transaction candidate</a> with
an earlier <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a> to be executed,
but which does not yet have an <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a>, in order to run.
Therefore waiting for existing <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a>s to terminate can cause deadlock.</p>
<p>Also, we do not want to Execution Supervisor to become a bottleneck.
Hence, the supervisor itself may be a concurrently running group of engines.</p>
<h3 id="providing-a-fresh-executor">Providing a "fresh" executor<a class="headerlink" href="#providing-a-fresh-executor" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/execution_supervisor/index.html">Execution Supervisor</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/executor_pid_assigned.html">ExecutorPIDAssigned</a>→<a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker</a><p>Send the external identity of a "fresh" executor engine instance,
  either newly spawned or a waiting in a fixed pool of available executors.</p>
</li>
</ul>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>add one supervisor for each executor --&gt;</p>
</div>
<h3 id="informing-shards-about-upcoming-read-and-write-requests">Informing shard(s) about upcoming read and write requests<a class="headerlink" href="#informing-shards-about-upcoming-read-and-write-requests" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_acquire_lock.html">KVSAcquireLock</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s<p>The <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> informs all relevant <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s about locks
  for this <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">TransactionCandidate</a> (at this <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a>).
  This also  allows the shard to prepare for read and write requests
  (which can be used for optimizations like warming up disk storage).</p>
</li>
</ul>
<p>If it helps, these messages can be batched and sent periodically.</p>
<h3 id="notifying-the-curator-about-acquired-locks">Notifying the curator about acquired locks<a class="headerlink" href="#notifying-the-curator-about-acquired-locks" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/kvs_lock_acquired.html">KVSLockAcquired</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a><p>The <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a> informs the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> about locks acquired
  or "recorded" for this <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a>'s <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">TransactionCandidate</a>.
  This becomes crucial below, at "Notifying shards about locks seen."</p>
</li>
</ul>
<h3 id="starting-transaction-execution">Starting transaction execution<a class="headerlink" href="#starting-transaction-execution" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/execute_transaction.html">ExecuteTransaction</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a><p>This will trigger the actual execution.
  This execution <em>includes</em> any finalization or resource logic checks.
  <em>Reads</em>, for executor process purposes, include any reads of state
  necessary for any post-ordering execution, resource logic checks,
  or anything else dependent on the "current" state of the state
  machine.
  <em>Writes</em>, for purposes of the state machine, include only final,
  valid updates to state that are definitely committed.</p>
</li>
</ul>
<h3 id="sending-read-requests">Sending read requests<a class="headerlink" href="#sending-read-requests" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_read_request.html">KVSReadRequest</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a><p>While executing the transaction
  (depending on previous reads and or static data in the code)
  send the optional read requests to the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>.</p>
</li>
</ul>
<h3 id="sending-write-requests">Sending write requests<a class="headerlink" href="#sending-write-requests" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a></em></p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>this should be a Request!</p>
</div>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_write.html">KVSWrite</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s<p>When the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/transaction_candidate.html">transaction candidate</a> has run,
  for each write lock, the
  <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a> informs the relevant <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a> of a value to write
  (or, for <code>may_write</code>s, maybe to not update this value).</p>
</li>
</ul>
<h3 id="notifying-shards-about-locks-seen">Notifying shards about locks "seen"<a class="headerlink" href="#notifying-shards-about-locks-seen" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/update_seen_all.html">UpdateSeenAll</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s<p>The <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> informs each <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a> of the greatest
  <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a> such that it can be sure
  (because it has heard enough <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/kvs_lock_acquired.html">KVSLockAcquired</a> messages)
  that the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a> will never hear a
  <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_acquire_lock.html">KVSAcquireLock</a> from this <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> with an equal or
  lower <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a> in the future.
  This is crucial, because <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s cannot "read" values from
  storage at a particular <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a> until they are sure that
  no writes with earlier <a href="https://anoma.github.io/nspec/main/arch/node/ordering/types/tx_fingerprint.html">TxFingerprint</a>s will happen.</p>
</li>
</ul>
<h3 id="serving-read-and-write-requests-from-executors">Serving read and write requests from executors<a class="headerlink" href="#serving-read-and-write-requests-from-executors" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a>s</em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/kvs_read.html">KVSRead</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a><p>For each read lock, if all preceding write locks have been
  recorded, and the unique preceding write has produced a value, the
  <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/index.html">Shard</a> can read a value.
  For <em>eager</em> reads (as defined in <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_acquire_lock.html">KVSAcquireLock</a>), it sends this
  value immediately to the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a>, and for <em>lazy</em> reads, it
  sends it in response to a <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/shard/kvs_read_request.html">KVSReadRequest</a> from the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a>.</p>
</li>
</ul>
<h3 id="handling-transaction-candidate-side-effects">Handling transaction candidate side effects<a class="headerlink" href="#handling-transaction-candidate-side-effects" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a></em></p>
<p>In addition to updates to state,
transaction candidates can do other stuff
(so long as it does not non-deterministically effect updates to state).
This can include logging and sending messages to users.</p>
<h4 id="informing-users-about-results-and-logs">Informing users about results and logs<a class="headerlink" href="#informing-users-about-results-and-logs" title="Permanent link">&para;</a></h4>
<p>The user is informed about the results of the transaction outcome.
In future versions (from V2 onward), this comes in two flavors:</p>
<ul>
<li>communication from only one validator's executor process
  (probably whatever validator the user submitted to)</li>
</ul>
<ul>
<li>some reliable transmission protocol between
  the user and at least a weak quorum of validators.</li>
</ul>
<!-- the following argument is due to isaac

#### Signing state update commitment

If a "block" is completed, a commitment to state updates,
e.g., a hash of the state deltas +++

-->

<h3 id="informing-the-curator-about-execution-termination">Informing the curator about execution termination<a class="headerlink" href="#informing-the-curator-about-execution-termination" title="Permanent link">&para;</a></h3>
<p><em>at <a href="https://anoma.github.io/nspec/main/arch/node/ordering/execution/executor/index.html">Executor</a></em></p>
<ul>
<li><a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/executor_finished.html">ExecutorFinished</a> → <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a><p>Notify the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a> about the finished execution.
  This triggers a log dump at the <a href="https://anoma.github.io/nspec/main/arch/node/ordering/mempool/worker/index.html">Worker Engine</a>,
  and will be used for garbage collection from V2 onward.
  For logging purposes, we could encode values read / written in here.</p>
</li>
</ul>
<!-- --8<-- [end:all] -->
<!-- list_wikilinks -->

<!-- mermaid_wikilinks -->







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-11-01T02:52:42+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-11-01</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-03-24T00:41:13+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-03-24</span>
  </span>

    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5zM16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! We'll try to improve this page in the future.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  <div class="md-copyright__highlight">
    Powered by Mkdocs, Material 9.5.37-insiders-4.53.13 and Juvix v0.6.8 - Last updated: November 26, 2024 at 03:25 AM UTC
  </div>
  

  <ul>
    <li><a href="https://anoma.net/" target="_blank">Anoma Official Website</a> </li>
    <li><a href="https://art.anoma.net" target="_blank">Anoma Research Topics (ART)</a></li>
    <li><a href="https://anoma.net/blog" target="_blank">Anoma Blog</a></li>
    <li><a href="https://anoma.net/talks" target="_blank">Anoma Talks</a></li>
  </ul>
  <ul>
    <span class="md-copyright__highlight">Extra resources for Anoma
      Specification collaborators</span>
      
      <li><a href="https://anoma.github.io/nspec/main/indexes/links.html">Quick links</a></li>
      <li><a href="https://anoma.github.io/nspec/main/indexes/juvix_modules.html">Juvix modules</a></li>
      <li><a href="https://anoma.github.io/nspec/main/tutorial/index.html">Markdown tutorials for writing Anoma
          Specification</a></li>
      <li><a href="https://anoma.github.io/nspec/main/tutorial/engines/index.html">On engines in Anoma</a></li>
  </ul>
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://x.com/anoma" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/anoma" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://anoma.net/blog" target="_blank" rel="noopener" title="anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://research.anoma.net" target="_blank" rel="noopener" title="research.anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/anoma" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:arts@heliax.dev" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "search.suggest", "search.sharing", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
        <script src="../../../assets/js/highlight.js"></script>
      
        <script src="../../../assets/js/mathjax.js"></script>
      
        <script src="../../../assets/js/tex-svg-full.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>