
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Anoma Specification is a collection of documents that describe the
architecture, design, and implementation of the Anoma Network.
">
      
      
        <meta name="author" content="Anoma Foundation">
      
      
        <link rel="canonical" href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus_homogeneous.html">
      
      
        <link rel="prev" href="mempool/worker/request_logs.html">
      
      
        <link rel="next" href="consensus/homogeneous_paxos_formal.html">
      
      
      <link rel="icon" href="../../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>Consensus - Anoma Specification</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.b658d0b2.css">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../assets/css/style.css">
    
      <link rel="stylesheet" href="../../assets/css/juvix-highlighting.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Consensus - Anoma Specification" >
      
        <meta  property="og:description"  content="The Anoma Specification is a collection of documents that describe the
architecture, design, and implementation of the Anoma Network.
" >
      
        <meta  property="og:image"  content="https://anoma.github.io/nspec/v2/assets/images/social/node_architecture/ordering/consensus_homogeneous.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus_homogeneous.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Consensus - Anoma Specification" >
      
        <meta  name="twitter:description"  content="The Anoma Specification is a collection of documents that describe the
architecture, design, and implementation of the Anoma Network.
" >
      
        <meta  name="twitter:image"  content="https://anoma.github.io/nspec/v2/assets/images/social/node_architecture/ordering/consensus_homogeneous.png" >
      
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#consensus" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  For updates follow <strong>@anoma</strong> on
  <a rel="me" href="https://x.com/anoma">
    <span class="twemoji x-twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </span>
    <strong></strong>
  </a>
  and discuss on our
  <a href="https://research.anoma.net">
    <span class="twemoji discourse">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </span>
    <strong>forum</strong>
  </a>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest official version.
  <a href="../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Anoma Specification" class="md-header__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Anoma Specification
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Consensus
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-grid">
    <ul class="md-tabs__list">
      
      
            
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scope/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm10.78 2H19v12.18c-.26-.8-1.31-1.39-2.2-1.39h-1v-3a1 1 0 0 0-1-1h-6v-2h2a1 1 0 0 0 1-1v-2h2c1.03 0 1.87-.79 1.98-1.79M5 10.29l4.8 4.5v1a2 2 0 0 0 2 2V19H5z"/></svg>
    
  
  Scope

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../basic_abstractions/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
    
  
  Basic Abstractions

        </a>
      </li>
    
  

        
      
      
            
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../architecture/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 18.714v4.8c0 .288-.192.48-.48.48h-4.8c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92h-8.16v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H9.6c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92H3.36v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H.48c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48H2.4v-2.4c0-.288.192-.48.48-.48h8.64v-1.44h.96v1.44h8.64c.288 0 .48.192.48.48v2.4h1.92c.288 0 .48.192.48.48m-13.92 4.32h3.84v-3.84h-3.84zm-9.12 0H4.8v-3.84H.96Zm18.24 0h3.84v-3.84H19.2ZM6.24 9.642V3.546c0-.192.096-.336.24-.432L11.76.042a.8.8 0 0 1 .48 0l5.28 3.072c.144.096.24.24.24.432v6.096c0 .144-.096.288-.24.384l-5.28 3.072q-.096.048-.24.048t-.24-.048l-5.28-3.072c-.144-.096-.24-.24-.24-.384m10.56-.288V4.362l-4.32 2.496v4.992zm-9.6 0 4.32 2.496V6.858L7.2 4.362Zm.48-5.808L12 5.994l4.32-2.448L12 1.05Z"/></svg>
    
  
  Protocol Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../application_architecture/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20h4v-4h-4m0-2h4v-4h-4m-6-2h4V4h-4m6 4h4V4h-4m-6 10h4v-4h-4m-6 4h4v-4H4m0 10h4v-4H4m6 4h4v-4h-4M4 8h4V4H4z"/></svg>
    
  
  Application Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../implementation/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.793 16.575c0 3.752-2.927 7.426-7.743 7.426-5.249 0-7.843-3.71-7.843-8.29 0-5.21 3.892-12.952 8-15.647a.397.397 0 0 1 .61.371 9.72 9.72 0 0 0 1.694 6.518c.522.795 1.092 1.478 1.763 2.352.94 1.227 1.637 1.906 2.644 3.842l.015.028a7.1 7.1 0 0 1 .86 3.4"/></svg>
    
  
  Implementation

        </a>
      </li>
    
  

        
      
      
      
      
      
      
      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Anoma Specification" class="md-nav__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    Anoma Specification
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../scope/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Scope
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../basic_abstractions/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Basic Abstractions
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../architecture/index.html" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 18.714v4.8c0 .288-.192.48-.48.48h-4.8c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92h-8.16v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H9.6c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92H3.36v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H.48c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48H2.4v-2.4c0-.288.192-.48.48-.48h8.64v-1.44h.96v1.44h8.64c.288 0 .48.192.48.48v2.4h1.92c.288 0 .48.192.48.48m-13.92 4.32h3.84v-3.84h-3.84zm-9.12 0H4.8v-3.84H.96Zm18.24 0h3.84v-3.84H19.2ZM6.24 9.642V3.546c0-.192.096-.336.24-.432L11.76.042a.8.8 0 0 1 .48 0l5.28 3.072c.144.096.24.24.24.432v6.096c0 .144-.096.288-.24.384l-5.28 3.072q-.096.048-.24.048t-.24-.048l-5.28-3.072c-.144-.096-.24-.24-.24-.384m10.56-.288V4.362l-4.32 2.496v4.992zm-9.6 0 4.32 2.496V6.858L7.2 4.362Zm.48-5.808L12 5.994l4.32-2.448L12 1.05Z"/></svg>
  
  <span class="md-ellipsis">
    Protocol Architecture
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Protocol Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../system_architecture/index.html" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 5h12a1 1 0 0 1 1 1 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1 1 1 0 0 1 1-1m15-3v2H3V2zm-6 6h2v14h-2zM7 8h2v14H7zm4 0h2v14h-2z"/></svg>
  
  <span class="md-ellipsis">
    System Architecture
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            System Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../system_architecture/concepts/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Basic Concepts
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system_architecture/identity/identity.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Identity Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../system_architecture/network/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Network Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../system_architecture/service/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Service Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../system_architecture/state/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    State Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.13 0-.26 0-.39.04l-1.61-3.25a2.5 2.5 0 0 0-1.75-4.29c-.13 0-.25 0-.39.04l-1.63-3.25c.48-.45.77-1.08.77-1.79a2.5 2.5 0 0 0-5 0c0 .71.29 1.34.76 1.79L8.64 9.54c-.14-.04-.26-.04-.39-.04a2.5 2.5 0 0 0-1.75 4.29l-1.61 3.25C4.76 17 4.63 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.79c.46-.45.75-1.08.75-1.79s-.29-1.34-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21c-.45.45-.75 1.09-.75 1.79a2.5 2.5 0 0 0 2.5 2.5c.13 0 .25 0 .39-.04l1.63 3.25c-.47.45-.77 1.09-.77 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5"/></svg>
  
  <span class="md-ellipsis">
    Node Architecture
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Node Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/index.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Juvix Basic Definitions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../engines/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Engine Family Types
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../hardware_abstraction/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Hardware Abstraction Machine
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../engines/configuration/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Control Machine
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../identity/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Identity Machine
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../networking/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Networking Machine
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_9" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../ordering_v1/index.html" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Ordering Machine
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3_9" id="__nav_4_3_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_9">
            <span class="md-nav__icon md-icon"></span>
            Ordering Machine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="types/allofthem/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Common types
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="mempool/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Mempool engines
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_9_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3_9_4" id="__nav_4_3_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Consensus Engine
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_9_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_9_4">
            <span class="md-nav__icon md-icon"></span>
            Consensus Engine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Consensus
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="consensus_homogeneous.html" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Consensus
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope" class="md-nav__link">
    <span class="md-ellipsis">
      Scope
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust-model" class="md-nav__link">
    <span class="md-ellipsis">
      Trust Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trust Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reality" class="md-nav__link">
    <span class="md-ellipsis">
      Reality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorums" class="md-nav__link">
    <span class="md-ellipsis">
      Quorums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safe-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Safe Sets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desired-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Desired Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accurate" class="md-nav__link">
    <span class="md-ellipsis">
      Accurate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#informal-protocol-round-description" class="md-nav__link">
    <span class="md-ellipsis">
      Informal protocol round description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Informal protocol round description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1a-message-proposing-a-value" class="md-nav__link">
    <span class="md-ellipsis">
      1a-message: proposing a value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1b-message-acknowledging-receiving-the-proposal" class="md-nav__link">
    <span class="md-ellipsis">
      1b-message: acknowledging receiving the proposal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2a-message-establishing-consensus" class="md-nav__link">
    <span class="md-ellipsis">
      2a-message: establishing consensus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#termination-finalizing-consensus-value" class="md-nav__link">
    <span class="md-ellipsis">
      Termination: finalizing consensus value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-message-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol message structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pseudocode" class="md-nav__link">
    <span class="md-ellipsis">
      Pseudocode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pseudocode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#broadcast" class="md-nav__link">
    <span class="md-ellipsis">
      Broadcast
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceptors" class="md-nav__link">
    <span class="md-ellipsis">
      Acceptors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learners" class="md-nav__link">
    <span class="md-ellipsis">
      Learners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proposers" class="md-nav__link">
    <span class="md-ellipsis">
      Proposers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communication-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Communication diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messages-received" class="md-nav__link">
    <span class="md-ellipsis">
      Messages Received
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Messages Received">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#potentialproposal" class="md-nav__link">
    <span class="md-ellipsis">
      PotentialProposal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PotentialProposal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_1" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effects" class="md-nav__link">
    <span class="md-ellipsis">
      Effects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxosproposal" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosProposal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosProposal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_2" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_1" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxoscommitment" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosCommitment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosCommitment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_3" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_2" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_2" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxosdecision" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosDecision
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosDecision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_4" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_3" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_3" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="consensus/homogeneous_paxos_formal.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
  
  <span class="md-ellipsis">
    Formal Definitions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="execution/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Execution engines
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../application_architecture/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Application Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../implementation/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Implementation
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indexes/links.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
  
  <span class="md-ellipsis">
    Quick links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../indexes/juvix_modules.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 10h-2V8h2m0 5h-2v-2h2m-3-1h-2V8h2m0 5h-2v-2h2m0 6H8v-2h8m-9-5H5V8h2m0 5H5v-2h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Juvix modules
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../tutorial/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Tutorials for contributors
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope" class="md-nav__link">
    <span class="md-ellipsis">
      Scope
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust-model" class="md-nav__link">
    <span class="md-ellipsis">
      Trust Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trust Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reality" class="md-nav__link">
    <span class="md-ellipsis">
      Reality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorums" class="md-nav__link">
    <span class="md-ellipsis">
      Quorums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safe-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Safe Sets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desired-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Desired Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accurate" class="md-nav__link">
    <span class="md-ellipsis">
      Accurate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#informal-protocol-round-description" class="md-nav__link">
    <span class="md-ellipsis">
      Informal protocol round description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Informal protocol round description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1a-message-proposing-a-value" class="md-nav__link">
    <span class="md-ellipsis">
      1a-message: proposing a value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1b-message-acknowledging-receiving-the-proposal" class="md-nav__link">
    <span class="md-ellipsis">
      1b-message: acknowledging receiving the proposal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2a-message-establishing-consensus" class="md-nav__link">
    <span class="md-ellipsis">
      2a-message: establishing consensus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#termination-finalizing-consensus-value" class="md-nav__link">
    <span class="md-ellipsis">
      Termination: finalizing consensus value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-message-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol message structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pseudocode" class="md-nav__link">
    <span class="md-ellipsis">
      Pseudocode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pseudocode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#broadcast" class="md-nav__link">
    <span class="md-ellipsis">
      Broadcast
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acceptors" class="md-nav__link">
    <span class="md-ellipsis">
      Acceptors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learners" class="md-nav__link">
    <span class="md-ellipsis">
      Learners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proposers" class="md-nav__link">
    <span class="md-ellipsis">
      Proposers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communication-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Communication diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messages-received" class="md-nav__link">
    <span class="md-ellipsis">
      Messages Received
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Messages Received">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#potentialproposal" class="md-nav__link">
    <span class="md-ellipsis">
      PotentialProposal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PotentialProposal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_1" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#effects" class="md-nav__link">
    <span class="md-ellipsis">
      Effects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxosproposal" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosProposal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosProposal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_2" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_1" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxoscommitment" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosCommitment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosCommitment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_3" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_2" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_2" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hpaxosdecision" class="md-nav__link">
    <span class="md-ellipsis">
      HPaxosDecision
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPaxosDecision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose_4" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure_3" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggers_3" class="md-nav__link">
    <span class="md-ellipsis">
      Triggers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="consensus">Consensus<a class="headerlink" href="#consensus" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<h3 id="purpose">Purpose<a class="headerlink" href="#purpose" title="Permanent link">&para;</a></h3>
<p>Consensus establishes a totally ordered sequence of headers received from the <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/mempool/index.html">mempool</a> DAG.
This establishes a total order of transactions for the <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/execution/index.html">Execution engine</a> to execute.</p>
<h3 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h3>
<p>The consensus algorithm is based on Heterogeneous Paxos<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.
It incorporates optimizations from the <a href="https://art.anoma.net/">Heterogeneous Paxos 2.0 ART report</a>, a draft in progress<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>.
Here we adapt for the homogeneous case, in which there is only one <em>learner</em>.</p>
<h3 id="scope">Scope<a class="headerlink" href="#scope" title="Permanent link">&para;</a></h3>
<p>The Consensus Engine is responsible for establishing a total order on
transaction candidates produced by the <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/mempool/index.html">mempool</a>.</p>
<p>We start by describing the consensus protocol informally, as well as the protocol trust model for the homogeneous case and the desired properties.
Finally, we provide a pseudocode for its agents.</p>
<p>The necessary formal definitions are given in the <a href="consensus/homogeneous_paxos_formal.html">dedicated page</a>.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The protocol involves three kinds of agents: <em>proposers</em>, <em>acceptors</em>, and <em>learners</em>.
Each validator may play the role of any combination of the two kinds of agents.</p>
<p><strong>Proposers</strong> initiate a round by a proposing a value to agree upon.
We denote a set of possible consensus values <span class="arithmatex">\(\Value\)</span>.</p>
<p><strong>Acceptors</strong> are agents who actually perform the consensus protocol (sending and receiving messages).
No correct acceptor acts on any <em>invalid</em> decided value.
This requires that proposals can be checked for validity.
Non-byzantine correct acceptors are also called <em>honest</em>, <em>safe</em>, or <em>real</em>.</p>
<p><strong>Learners</strong> are agents who are interested in values decided by consensus (they only need to receive messages).
As this is a Homogeneous Paxos, all learners and acceptors are interested in only one chain, and make the same failure assumptions.
Their quorums are determined by the chain's protocol (e.g., proof of stake).
We denote the set of learners by <span class="arithmatex">\(\Learner\)</span>.
In the homogeneous case, the set of learners is a singleton, <span class="arithmatex">\(\Learner = \cb{\red\alpha}\)</span>.</p>
<h2 id="trust-model">Trust Model<a class="headerlink" href="#trust-model" title="Permanent link">&para;</a></h2>
<p>For the homogeneous case, learner <span class="arithmatex">\(\red\alpha\)</span> is characterized by 2 sets: <em>quorums</em> <span class="arithmatex">\(Q_{\red\alpha}\)</span> and <em>safe sets</em> <span class="arithmatex">\(\Safe{\red\alpha}\)</span>.</p>
<h3 id="reality">Reality<a class="headerlink" href="#reality" title="Permanent link">&para;</a></h3>
<p>We call the unknown set of acceptors who are actually <em>live</em> (will always eventually send a message according to the protocol) <span class="arithmatex">\(\reallylive\)</span>.
Other acceptors may be called <em>unlive</em>, <em>crash-prone</em>, or just <em>crashed</em>.</p>
<p>We call the unknown set of acceptors who are actually <em>safe</em> (will never send messages other than those specified by the protocol) <span class="arithmatex">\(\reallysafe\)</span>.
Other acceptors may be called <em>unsafe</em> or <em>Byzantine</em>.</p>
<p>The learner <span class="arithmatex">\(\red\alpha\)</span> does not send any messages according to the protocol, so it's not meaningful to talk about it being live or safe.</p>
<p>Unfortunately, no one knowns <span class="arithmatex">\(\reallylive\)</span> and <span class="arithmatex">\(\reallysafe\)</span>, so we now characterize the assumptions <span class="arithmatex">\(\red\alpha\)</span> must make
in order to get safety and liveness guarantees.</p>
<h3 id="quorums">Quorums<a class="headerlink" href="#quorums" title="Permanent link">&para;</a></h3>
<p>A <a href="https://en.wikipedia.org/wiki/Quorum_(distributed_computing)">quorum</a> is a set of acceptors sufficient to make <span class="arithmatex">\(\red\alpha\)</span> decide.
Whenever any quorum remains safe and live, <span class="arithmatex">\(\red\alpha\)</span> should <em>eventually</em> reach a decision.
Quorums are determined by chain policy (e.g., proof of stake).
We designate the set of quorums <span class="arithmatex">\(Q_{\red\alpha}\)</span> (so each element of <span class="arithmatex">\(Q_{\red\alpha}\)</span> is a set of acceptors).
In general, for any quorum <span class="arithmatex">\(q_{\red\alpha} \in Q_{\red\alpha}\)</span>, any superset of acceptors is also a quorum (adding more safe and live acceptors doesn't make <span class="arithmatex">\(\red\alpha\)</span> no longer able to decide).
Formally,</p>
<div class="arithmatex">\[
  \forall q \in Q_{\red\alpha}.\,
  \forall q^\prime \supseteq q.\,
  q^\prime \in Q_{\red\alpha}
\]</div>
<h3 id="safe-sets">Safe Sets<a class="headerlink" href="#safe-sets" title="Permanent link">&para;</a></h3>
<p>In general, the learner <span class="arithmatex">\(\red\alpha\)</span>  wants its decision to <em>agree</em>: if it makes two decisions, they should carry the same value.
Unfortunately, there is no way to ensure <span class="arithmatex">\(\red\alpha\)</span> both liveness (it eventually decides) and agreement, under all conditions.
<em>Safe sets</em> <span class="arithmatex">\(\Safe{\red\alpha}\)</span> characterize when <span class="arithmatex">\(\red\alpha\)</span> is guaranteed agreement.
Each safe set is a set of acceptors, and <span class="arithmatex">\(\red\alpha\)</span> is guaranteed agreement when at least one safe set consists entirely of safe (if not necessarily live) acceptors.
Like quorums, adding more safe acceptors doesn't hurt <span class="arithmatex">\(\red\alpha\)</span>'s guarantees:</p>
<div class="arithmatex">\[
  \forall s \in \Safe{\red\alpha}.\,
  \forall s^\prime \supseteq s.\,
  s^\prime \in \Safe{\red\alpha}
\]</div>
<p>Safe sets and quorums are related: Paxos requires that all quorums intersect on a safe acceptor to guarantee agreement.
Therefore, we require:</p>
<div class="arithmatex">\[
  \forall q, q^\prime \in Q_{\red\alpha}.\,
  \forall s \in \Safe{\red\alpha}.\,
  q \cap q^\prime \cap s \ne \emptyset
\]</div>
<p>For many systems (including most proof of stake systems), the safe sets are simply all sets with this property.</p>
<h3 id="desired-properties">Desired Properties<a class="headerlink" href="#desired-properties" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Termination:</strong> Paxos ultimately guarantees that if a quorum is safe and live (<span class="arithmatex">\(\reallylive \cap \reallysafe \in Q_{\red\alpha}\)</span>), the learner <span class="arithmatex">\(\red\alpha\)</span> eventually decides.</p>
</li>
<li>
<p><strong>Safety:</strong> Paxos also guarantees that if a safe set is safe (<span class="arithmatex">\(\reallysafe \in Q_\red{\alpha}\)</span>), all decisions the learner <span class="arithmatex">\(\red\alpha\)</span> makes have the same value.</p>
</li>
</ul>
<h3 id="accurate">Accurate<a class="headerlink" href="#accurate" title="Permanent link">&para;</a></h3>
<p>We say that learner <span class="arithmatex">\(\red\alpha\)</span> is <em>accurate</em> if its decisions must agree.</p>
<div class="arithmatex">\[
  \accurate{\red\alpha} \eqdef \reallysafe \in Q_\red{\alpha}
\]</div>
<h2 id="functionality">Functionality<a class="headerlink" href="#functionality" title="Permanent link">&para;</a></h2>
<p>All agents know <span class="arithmatex">\(\Safe{\red\alpha}\)</span> and <span class="arithmatex">\(Q_{\red\alpha}\)</span>.</p>
<p>Each anchor vertex is decided using an independent instance of consensus.
This could be referred to as the "separate consensus for each height" approach.</p>
<p>Here we discuss the workings of a single consensus instance, parameterized by some height.
The possible values <span class="arithmatex">\(\Value\)</span> are therefore vertices from the Mempool.
The decided vertex becomes the anchor vertex for this height.</p>
<p>Within the consensus instance, values are agreed upon in rounds.</p>
<!-- Next, we describe how the communication for a consensus round works. -->
<h3 id="informal-protocol-round-description">Informal protocol round description<a class="headerlink" href="#informal-protocol-round-description" title="Permanent link">&para;</a></h3>
<p>Consensus rounds send and receive messages in four (possibly overlapping) phases:</p>
<ol>
<li>proposing the consensus value <span class="arithmatex">\(v \in \Value\)</span></li>
<li>acknowledging receipt of proposals</li>
<li>establishing consensus</li>
<li>termination</li>
</ol>
<p>The first three phases correspond to three types of intra-component messages: <span class="arithmatex">\(\onea\)</span>, <span class="arithmatex">\(\oneb\)</span> and <span class="arithmatex">\(\twoa\)</span>, respectively.</p>
<p>Before processing a received message <span class="arithmatex">\(m\)</span>, acceptors and learners check if the message is <a href="consensus/homogeneous_paxos_formal.html#definition-wellformed"><em>well-formed</em></a>.
The formal definition of the well-formedness relation, denoted by <span class="arithmatex">\(\wellformed{m}\)</span>, is given <a href="consensus/homogeneous_paxos_formal.html">here</a>.
Non-wellformed messages are rejected.
The acceptors caught in sending non-wellformed messages might be punished by the protocol.</p>
<!-- Suppose we have two learners $l_\alpha$ and $l_\beta$ which refer to agents that are interested in blockchain $\alpha$ and blockchain $\beta$. -->

<h4 id="1a-message-proposing-a-value">1a-message: proposing a value<a class="headerlink" href="#1a-message-proposing-a-value" title="Permanent link">&para;</a></h4>
<p>A proposer proposes a next value by sending a <span class="arithmatex">\(\onea\)</span>-message to the acceptors.
The message carries a <em>unique</em> ballot value, containing the proposed value to agree on and the round timestamp (round number).
We assume that the set of all possible ballot values is linearly ordered.</p>
<p>Proposers can safely propose any value at any time.
However, the learner <span class="arithmatex">\(\red\alpha\)</span> will reach a decision more quickly if a proposal has a higher ballot than previous proposals, and a value that agrees with recent <span class="arithmatex">\(\twoa\)</span>-messages.</p>
<h4 id="1b-message-acknowledging-receiving-the-proposal">1b-message: acknowledging receiving the proposal<a class="headerlink" href="#1b-message-acknowledging-receiving-the-proposal" title="Permanent link">&para;</a></h4>
<p>On receipt of a <span class="arithmatex">\(\onea\)</span>-message, an acceptor sends an acknowledgement of its receipt to all other acceptors and learners in the form of <span class="arithmatex">\(\oneb\)</span>-message.</p>
<h4 id="2a-message-establishing-consensus">2a-message: establishing consensus<a class="headerlink" href="#2a-message-establishing-consensus" title="Permanent link">&para;</a></h4>
<p>When an acceptor receives <span class="arithmatex">\(\oneb\)</span> messages for the highest ballot number it has seen
from a <!-- learner <span class="arithmatex">\(l_\alpha\)</span>s --> <a href="consensus/homogeneous_paxos_formal.html#definition-quorums-in-messages">quorum</a> of acceptors,
it sends a <span class="arithmatex">\(\twoa\)</span>-message.</p>
<!-- labeled with $l_\alpha$. -->

<p>However, there is one restriction:
once a safe acceptor has sent a <span class="arithmatex">\(\twoa\)</span>-message <span class="arithmatex">\(m\)</span>, <!-- for a learner <span class="arithmatex">\(\red\alpha\)</span> --> it
never sends a <span class="arithmatex">\(\twoa\)</span>-message with a different value, <!-- for a learner <span class="arithmatex">\(\blue\beta\)</span> --> unless one of the following is true:</p>
<ul>
<li>It knows that a quorum of acceptors has seen a quorum of <span class="arithmatex">\(\twoa\)</span>-messages with <!-- learner <span class="arithmatex">\(\red\alpha\)</span> and --> ballot number higher than <span class="arithmatex">\(m\)</span>.
  (In which case we call <span class="arithmatex">\(m\)</span> <a href="consensus/homogeneous_paxos_formal.html#definition-buried">"<em>buried</em>"</a>.)</li>
<li>It has seen Byzantine behaviour that proves <span class="arithmatex">\(\red\alpha\)</span> is not <em>accurate</em>, in which case decisions do not have to agree.</li>
</ul>
<!-- The acceptor who has received a $\oneb$ sends a $\twoa$ for every learner for which it can produce a wellformed $\twoa$. -->
<p>The acceptor who has received a <span class="arithmatex">\(\oneb\)</span> sends a <span class="arithmatex">\(\twoa\)</span> if it can produce a well-formed <span class="arithmatex">\(\twoa\)</span>-message.</p>
<h4 id="termination-finalizing-consensus-value">Termination: finalizing consensus value<a class="headerlink" href="#termination-finalizing-consensus-value" title="Permanent link">&para;</a></h4>
<p>The learner <span class="arithmatex">\(\red{\alpha}\)</span> decides on a value <span class="arithmatex">\(v \in \Value\)</span> when it receives a set <span class="arithmatex">\(q_\red{\alpha}\)</span> of <span class="arithmatex">\(\twoa\)</span>-messages <!-- labeled with <span class="arithmatex">\(l_\alpha\)</span> --> with
the same proposed value <span class="arithmatex">\(v\)</span> and ballot <span class="arithmatex">\(b\)</span> from one of its quorums of acceptors.
We call such a set a <a href="consensus/homogeneous_paxos_formal.html#definition-decision"><em>decision</em></a>.  <!-- and write <span class="arithmatex">\(\decision{\red \alpha}{b, \red{q_\alpha}}\)</span>. --></p>
<p>If no decision can be reached within a certain time, proposers must begin a new round (with a higher timestamp, and thus a higher ballot).
Proposers can start a new round by proposing a new value or by trying to finalize the same value again (in case there was no consensus).</p>
<p>In general, acceptor relay all sent or received messages to <!-- all learners --> the learner and all other acceptors.
This ensures that any message received by a real acceptor is received by all real acceptors and the learner.</p>
<h4 id="protocol-message-structure">Protocol message structure<a class="headerlink" href="#protocol-message-structure" title="Permanent link">&para;</a></h4>
<p>Any <span class="arithmatex">\(\oneb\)</span> and <span class="arithmatex">\(\twoa\)</span>-message <span class="arithmatex">\(m\)</span> signed by the acceptor <span class="arithmatex">\(A\)</span> has the following fields:</p>
<ul>
<li><code>prev</code>  a reference to the previous message sent by <span class="arithmatex">\(A\)</span>, if such exists; otherwise, <code>None</code>.</li>
<li><code>refs</code>  a set of hashes of message referenced by <span class="arithmatex">\(m\)</span>. They are the messages that <span class="arithmatex">\(A\)</span> has received since between sending <span class="arithmatex">\(m\)</span> and the previous to <span class="arithmatex">\(m\)</span> message, including the previous message itself.</li>
</ul>
<!-- - `lrn`  a learner tag: an identifier of the relevant chain (for $\twoa$-messages only). -->

<p>To ensure that acceptors and learners <em>fully understand</em> each message they receive, they delay doing any computation on it (sometimes called delivery) until they have received all the messages in <code>refs</code>.
As a result, acceptors and learners will always process messages from any given sender in the order they were sent, but also from any messages that sender received, and recursively.</p>
<h3 id="pseudocode">Pseudocode<a class="headerlink" href="#pseudocode" title="Permanent link">&para;</a></h3>
<p>We assume that there is a way to assign to every well-formed message <span class="arithmatex">\(m\)</span> a unique ballot number that the message belongs to.
We shall denote the ballot number assigning function as <span class="arithmatex">\(\ba{m}\)</span>.
The formal definition of the function can be found <a href="consensus/homogeneous_paxos_formal.html#definition-ballot-numbers">here</a>.</p>
<h4 id="broadcast">Broadcast<a class="headerlink" href="#broadcast" title="Permanent link">&para;</a></h4>
<p>We assume a <code>broadcast</code> primitive that ensures that all messages sent or received by a safe and live agent are eventually received by all agents.
One way to implement this is to have live agents echo messages received to all other live agents.
More efficient implementations may involve explicit requests for unreceived messages referenced in other messages <code>refs</code> fields.</p>
<h4 id="acceptors">Acceptors<a class="headerlink" href="#acceptors" title="Permanent link">&para;</a></h4>
<p>In Paxos terms, <code>HPaxosProposal</code> messages below are called <span class="arithmatex">\(\onea\)</span> messages.
<code>HPaxosCommitment</code> messages (below) with an empty <code>lrn</code> field are called <span class="arithmatex">\(\oneb\)</span> messages, and if <code>lrn</code> is not empty, they are called <span class="arithmatex">\(\twoa\)</span> messages.
Here we detail how acceptors process <span class="arithmatex">\(\onea\)</span>, <span class="arithmatex">\(\oneb\)</span>, and <span class="arithmatex">\(\twoa\)</span> messages.</p>
<p>We assume that every acceptor maintains an internal state with the following structures:</p>
<ul>
<li><code>known_messages</code>  a set of all processed messages, initially empty;</li>
<li><code>recent_messages</code>  a set of all messages the acceptor has sent or received since (and including) the last message it sent, initially empty;</li>
<li><code>previous_message</code>   the most recent message the acceptor has sent, is such exists, initially containing a special non-message value.</li>
</ul>
<p>Below, we present the acceptor algorithm in pseudocode.</p>
<div class="language-python highlight"><span class="filename">Acceptor algorithm</span><pre><span></span><code><span id="__ispan-0-1"><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span id="__ispan-0-2">  <span class="n">known_messages</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__ispan-0-3">  <span class="n">recent_messages</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__ispan-0-4">  <span class="n">previous_message</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__ispan-0-5">
</span><span id="__ispan-0-6"><span class="k">def</span> <span class="nf">process_1a</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-0-7">  <span class="k">with</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span><span class="n">b</span><span class="p">(</span><span class="n">prev</span> <span class="o">=</span> <span class="n">prev_message</span><span class="p">,</span> <span class="n">refs</span> <span class="o">=</span> <span class="n">recent_messages</span> <span class="err"></span> <span class="p">{</span><span class="n">m</span><span class="p">}):</span>
</span><span id="__ispan-0-8">    <span class="k">if</span> <span class="n">WellFormedOneB</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
</span><span id="__ispan-0-9">      <span class="n">recent_messages</span> <span class="o">=</span> <span class="p">{</span><span class="n">z</span><span class="p">}</span>
</span><span id="__ispan-0-10">      <span class="n">previous_message</span> <span class="o">=</span> <span class="n">z</span>
</span><span id="__ispan-0-11">      <span class="n">broadcast</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span id="__ispan-0-12">
</span><span id="__ispan-0-13"><span class="k">def</span> <span class="nf">process_1b</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-0-14">  <span class="k">with</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">2</span><span class="n">a</span><span class="p">(</span><span class="n">prev</span> <span class="o">=</span> <span class="n">prev_message</span><span class="p">,</span> <span class="n">refs</span> <span class="o">=</span> <span class="n">recent_messages</span> <span class="err"></span> <span class="p">{</span><span class="n">m</span><span class="p">}):</span>
</span><span id="__ispan-0-15">    <span class="k">if</span> <span class="n">WellFormedTwoA</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
</span><span id="__ispan-0-16">      <span class="n">recent_messages</span> <span class="o">=</span> <span class="p">{</span><span class="n">z</span><span class="p">}</span>
</span><span id="__ispan-0-17">      <span class="n">previous_message</span> <span class="o">=</span> <span class="n">z</span>
</span><span id="__ispan-0-18">      <span class="n">broadcast</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span id="__ispan-0-19">    <span class="k">else</span><span class="p">:</span>
</span><span id="__ispan-0-20">      <span class="n">recent_messages</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-0-21">
</span><span id="__ispan-0-22"><span class="k">def</span> <span class="nf">process_2a</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-0-23">  <span class="n">recent_messages</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-0-24">
</span><span id="__ispan-0-25"><span class="k">def</span> <span class="nf">process_message</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-0-26">  <span class="k">if</span> <span class="n">m</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">known_messages</span><span class="p">:</span>
</span><span id="__ispan-0-27">    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">refs</span><span class="p">:</span>
</span><span id="__ispan-0-28">      <span class="k">while</span> <span class="ow">not</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">known_messages</span><span class="p">:</span>
</span><span id="__ispan-0-29">        <span class="n">wait</span><span class="p">()</span>
</span><span id="__ispan-0-30">    <span class="k">if</span> <span class="n">WellFormed</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-0-31">      <span class="n">known_messages</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-0-32">      <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;1a&quot;</span><span class="p">:</span>
</span><span id="__ispan-0-33">        <span class="n">process_1a</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-0-34">      <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;1b&quot;</span><span class="p">:</span>
</span><span id="__ispan-0-35">        <span class="n">process_1b</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-0-36">      <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;2a&quot;</span><span class="p">:</span>
</span><span id="__ispan-0-37">        <span class="n">process_2a</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span></code></pre></div>
<p>On receipt of an <code>HPaxosDecision</code> message, an acceptor can broadcast the <code>HPaxosDecision</code> and all the messages on which it is based, and then halt: everyone else can reach the same decision from the broadcast data.</p>
<h4 id="learners">Learners<a class="headerlink" href="#learners" title="Permanent link">&para;</a></h4>
<p>The learner algorithm in pseudocode is presented below.</p>
<p><div class="language-python highlight"><span class="filename">Learner algorithm</span><pre><span></span><code><span id="__ispan-1-1"><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span id="__ispan-1-2">  <span class="n">known_messages</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__ispan-1-3">  <span class="n">decision</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__ispan-1-4">
</span><span id="__ispan-1-5"><span class="k">def</span> <span class="nf">process_message</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-1-6">  <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">known_messages</span><span class="p">:</span>
</span><span id="__ispan-1-7">    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">refs</span><span class="p">:</span>
</span><span id="__ispan-1-8">      <span class="k">while</span> <span class="ow">not</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">known_messages</span><span class="p">:</span>
</span><span id="__ispan-1-9">        <span class="n">wait</span><span class="p">()</span>
</span><span id="__ispan-1-10">    <span class="k">if</span> <span class="n">WellFormed</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-1-11">      <span class="n">known_messages</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-1-12">
</span><span id="__ispan-1-13"><span class="k">def</span> <span class="nf">decide</span><span class="p">():</span>
</span><span id="__ispan-1-14">  <span class="n">foreach</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subsets</span><span class="p">(</span><span class="n">known_messages</span><span class="p">):</span>
</span><span id="__ispan-1-15">    <span class="k">if</span> <span class="n">Decision</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span><span id="__ispan-1-16">      <span class="n">decision</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></code></pre></div>
On making a decision, learners send <code>HPaxosDecision</code> messages, described below.</p>
<h4 id="proposers">Proposers<a class="headerlink" href="#proposers" title="Permanent link">&para;</a></h4>
<p>For simplicity, we assume the same validators act as proposers and acceptors.
This ensures that if there is a safe and live acceptor, there is a safe and live proposer.
The proposers should be chosen in a round-robin fashion, with increasing time-outs.</p>
<p>One way to accomplish this is to include timestamps in the (most significant bits of) the ballot value of each proposal:</p>
<ul>
<li>We then allocate "time windows" to proposers according to some pre-determined function based on the state of the chain (perhaps based on the timestamp of the narwhal vertex chosen in the previous instance of consensus, for the previous height).</li>
<li>These time windows cycle through all the proposers, with increasing duration (at least linearly, possibly exponentially, we can only know what schedule works best experimentally).</li>
<li>Proposals with a time stamp outside a time window of their signer are not well-formed.</li>
<li>All agents delay receipt of all proposals until their own clock matches or exceeds the time stamp of the proposal.</li>
<li>During its time window, an agent proposes the value of the highest <span class="arithmatex">\(\twoa\)</span> its local acceptor knows (or a vertex from the mempool, if it knows no <span class="arithmatex">\(\twoa\)</span>s).</li>
<li>For reasons detailed in the original liveness proof from Heterogeneous Paxos, proposers should propose three times during their time window, equally spaced. If proposer clock skew is bounded (even if the bound is unknown), this guarantees the learner eventually decides.</li>
</ul>
<p>As an optimization, proposers can stop proposing if they can produce a collection of messages that qualify as a <em>decision</em>, and then broadcast that to all learners.</p>
<div class="language-python highlight"><span class="filename">Proposer algorithm</span><pre><span></span><code><span id="__ispan-2-1"><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">proposer_schedule</span><span class="p">)</span> <span class="c1"># determined for this height&#39;s consensus instance</span>
</span><span id="__ispan-2-2">  <span class="n">known_messages</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__ispan-2-3">  <span class="n">schedule</span> <span class="o">=</span> <span class="n">proposer_schedule</span>
</span><span id="__ispan-2-4">  <span class="n">proposal_from_mempool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__ispan-2-5">  <span class="n">restart_timer</span><span class="p">()</span>
</span><span id="__ispan-2-6">
</span><span id="__ispan-2-7"><span class="k">def</span> <span class="nf">restart_timer</span><span class="p">()</span>
</span><span id="__ispan-2-8">  <span class="k">if</span> <span class="n">exists</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subsets</span><span class="p">(</span><span class="n">known_messages</span><span class="p">)</span> <span class="n">such</span> <span class="n">that</span> <span class="n">Decision</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span><span id="__ispan-2-9">    <span class="n">forall</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
</span><span id="__ispan-2-10">      <span class="n">broadcast</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-2-11">  <span class="k">else</span><span class="p">:</span>
</span><span id="__ispan-2-12">    <span class="n">window</span> <span class="o">=</span> <span class="n">my_first_time_window_after_now</span><span class="p">(</span><span class="n">schedule</span><span class="p">)</span>
</span><span id="__ispan-2-13">    <span class="n">start_timer</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_timeout</span><span class="p">)</span>
</span><span id="__ispan-2-14">    <span class="n">start_timer</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.33</span> <span class="o">*</span> <span class="n">window</span><span class="o">.</span><span class="n">duration</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_timeout</span><span class="p">)</span>
</span><span id="__ispan-2-15">    <span class="n">start_timer</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.66</span> <span class="o">*</span> <span class="n">window</span><span class="o">.</span><span class="n">duration</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_timeout</span><span class="p">)</span>
</span><span id="__ispan-2-16">    <span class="n">start_timer</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.66</span> <span class="o">*</span> <span class="n">window</span><span class="o">.</span><span class="n">duration</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">restart_timer</span><span class="p">)</span>
</span><span id="__ispan-2-17">
</span><span id="__ispan-2-18"><span class="k">def</span> <span class="nf">process_message</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-2-19">  <span class="k">if</span> <span class="n">WellFormed</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="__ispan-2-20">    <span class="n">known_messages</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span id="__ispan-2-21">
</span><span id="__ispan-2-22"><span class="k">def</span> <span class="nf">receive_proposal_from_mempool</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span id="__ispan-2-23">  <span class="n">proposal_from_mempool</span> <span class="o">=</span> <span class="n">m</span>
</span><span id="__ispan-2-24">
</span><span id="__ispan-2-25"><span class="k">def</span> <span class="nf">on_timeout</span><span class="p">(</span><span class="n">last_known_timer</span><span class="p">):</span>
</span><span id="__ispan-2-26">  <span class="k">if</span> <span class="n">exists</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">known_messages</span> <span class="ow">and</span> <span class="n">m</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;2a&quot;</span><span class="p">:</span>
</span><span id="__ispan-2-27">    <span class="n">broadcast</span><span class="p">(</span>
</span><span id="__ispan-2-28">      <span class="n">argmax</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span> <span class="p">:</span> <span class="n">B</span><span class="p">(</span><span class="n">m</span><span class="p">),</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span> <span class="n">has</span> <span class="nb">type</span> <span class="mi">2</span><span class="n">a</span><span class="p">,</span> <span class="n">known_messages</span><span class="p">))</span>
</span><span id="__ispan-2-29">    <span class="p">)</span>
</span><span id="__ispan-2-30">  <span class="k">elif</span> <span class="n">proposal_from_mempool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__ispan-2-31">     <span class="n">broadcast</span><span class="p">(</span><span class="n">proposal_from_mempool</span><span class="p">)</span>
</span></code></pre></div>
<!-- ### Efficient Implementation

The efficient implementation of consensus is described [here](consensus/hpaxos_eff.md). -->

<h2 id="communication-diagram">Communication diagram<a class="headerlink" href="#communication-diagram" title="Permanent link">&para;</a></h2>
<!-- Diagram illustrating message flows between engines -->

<h2 id="messages-received">Messages Received<a class="headerlink" href="#messages-received" title="Permanent link">&para;</a></h2>
<p>Below is the specification of the consensus component in terms of all the messages the component must be able to receive and react to.</p>
<h3 id="potentialproposal">PotentialProposal<a class="headerlink" href="#potentialproposal" title="Permanent link">&para;</a></h3>
<ul>
<li><em>from</em> <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/mempool/primary.html">Primary</a></li>
</ul>
<h4 id="purpose_1">Purpose<a class="headerlink" href="#purpose_1" title="Permanent link">&para;</a></h4>
<p>Communicates that a specific payload is (or isn't) a valid proposal for consensus on the chain, which consensus might decide upon.</p>
<details>
<summary>Details</summary>
<h4 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chain_id</code></td>
<td><a href="#ChainId"><code>ChainId</code></a></td>
<td>the chain ID</td>
</tr>
<tr>
<td><code>payload</code></td>
<td><a href="#NarwhalBlock"><code>NarwhalBlock</code></a></td>
<td>potential consensus value</td>
</tr>
<tr>
<td><code>valid</code></td>
<td><code>bool</code></td>
<td>indicates if the value is valid for consensus proposal</td>
</tr>
</tbody>
</table>
<h4 id="effects">Effects<a class="headerlink" href="#effects" title="Permanent link">&para;</a></h4>
<ul>
<li>The valid payload value received in <code>PotentialProposal</code> is a potential value to be proposed (1A message).</li>
<li>Having received a proposal (1A) message with this payload, the acceptor can now send a commitment (1B) message.</li>
</ul>
<h4 id="triggers">Triggers<a class="headerlink" href="#triggers" title="Permanent link">&para;</a></h4>
<ul>
<li>to <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a>: <a href="#hpaxosproposal"><code>HPaxosProposal</code></a></li>
</ul>
</details>
<h3 id="hpaxosproposal">HPaxosProposal<a class="headerlink" href="#hpaxosproposal" title="Permanent link">&para;</a></h3>
<ul>
<li><em>from</em> <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a></li>
</ul>
<h4 id="purpose_2">Purpose<a class="headerlink" href="#purpose_2" title="Permanent link">&para;</a></h4>
<p>Encodes a <span class="arithmatex">\(\onea\)</span>-message that proposes a next value to have consensus upon.</p>
<details>
<summary>Details</summary>
<p>The message is sent between the participating acceptor nodes.</p>
<h4 id="structure_1">Structure<a class="headerlink" href="#structure_1" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chain_id</code></td>
<td><a href="#ChainId"><code>ChainId</code></a></td>
<td>the chain Id</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>ClockTime</code></td>
<td></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>Height</code></td>
<td>height of the block</td>
</tr>
<tr>
<td><code>proposal</code></td>
<td><code>NarwhalBlock</code></td>
<td>proposed value</td>
</tr>
</tbody>
</table>
<!-- !!! todo

    should this also include some kind of Hash representing who the proposer thinks the current  "quorums" are? That would ensure some kind of double-check, but may not be necessary...
-->
<p>We define the <em>ballot</em> of an <code>HPaxosProposal</code> message <span class="arithmatex">\(B(m)\)</span> to be the pair <span class="arithmatex">\(\left\langle\textrm{timestamp}, \textrm{signature of }m\right\rangle\)</span> (or some order-preserving Nat encoding thereof).
This ensures that <code>HPaxosProposal</code> ballot numbers are unique, and when proposed by honest proposers, they increase with time (which is useful for liveness).</p>
<h4 id="triggers_1">Triggers<a class="headerlink" href="#triggers_1" title="Permanent link">&para;</a></h4>
<ul>
<li>to <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a>: <a href="#hpaxoscommitment"><code>HPaxosCommitment</code></a></li>
<li>to <a href="#Mempool">Mempool</a>: <a href="#CheckProposal"><code>CheckProposal</code></a></li>
</ul>
</details>
<h3 id="hpaxoscommitment">HPaxosCommitment<a class="headerlink" href="#hpaxoscommitment" title="Permanent link">&para;</a></h3>
<ul>
<li><em>from</em> <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a></li>
</ul>
<h4 id="purpose_3">Purpose<a class="headerlink" href="#purpose_3" title="Permanent link">&para;</a></h4>
<p>Encodes a <span class="arithmatex">\(\oneb\)</span> / <span class="arithmatex">\(\twoa\)</span> message used to communicate the acceptor's commitment to other acceptors.</p>
<details>
<summary>Details</summary>
<p>The message is sent between the participating acceptor nodes.</p>
<h4 id="structure_2">Structure<a class="headerlink" href="#structure_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chain_id</code></td>
<td><a href="#ChainId"><code>ChainId</code></a></td>
<td>the chain Id</td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>Height</code></td>
<td>height of the block</td>
</tr>
<tr>
<td><code>refs</code></td>
<td><a href="#Hash"><code>Vec&lt;Hash&gt;</code></a></td>
<td>hashes of messages seen by the acceptor recently</td>
</tr>
<tr>
<td><code>prev</code></td>
<td><a href="#Hash"><code>Hash</code></a></td>
<td>hash of the previous message sent by acceptor, <code>0</code> otherwise</td>
</tr>
<tr>
<td><code>lrn</code></td>
<td><a href=""><code>Vec&lt;Learner&gt;</code></a></td>
<td>empty for 1b messages, contains a list of learner ids for 2a messages</td>
</tr>
</tbody>
</table>
<!-- !!! todo

    should this also include some kind of Hash representing who the proposer thinks the current  "quorums" are? That would ensure some kind of double-check, but may not be necessary...
-->
<h4 id="triggers_2">Triggers<a class="headerlink" href="#triggers_2" title="Permanent link">&para;</a></h4>
<ul>
<li>to <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a>: <a href="#hpaxoscommitment"><code>HPaxosCommitment</code></a></li>
<li>to <a href="#Mempool">Mempool</a>: <a href="#RequestProposal"><code>RequestProposal</code></a></li>
<li>to <a href="#Shards">Execution shards</a>: <a href="#AnchorChosen"><code>AnchorChosen</code></a></li>
</ul>
</details>
<h3 id="hpaxosdecision">HPaxosDecision<a class="headerlink" href="#hpaxosdecision" title="Permanent link">&para;</a></h3>
<ul>
<li><em>from</em> <a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/consensus.html">Consensus</a></li>
</ul>
<h4 id="purpose_4">Purpose<a class="headerlink" href="#purpose_4" title="Permanent link">&para;</a></h4>
<p>The message is used to notify other acceptors that a decision has been made.</p>
<details>
<summary>Details</summary>
<p>The message includes a list of messages the other acceptors need to see the decision (a quorum of <span class="arithmatex">\(\twoa\)</span> messages).
Once the acceptor have received one of the decision messages for all learners, it may stop doing any kind of interesting consensus work,
and just send these out to anyone who is still trying to do consensus.</p>
<h4 id="structure_3">Structure<a class="headerlink" href="#structure_3" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>learner</code></td>
<td><code>Learner</code></td>
<td>learner instance</td>
</tr>
<tr>
<td><code>message_quorum</code></td>
<td><a href=""><code>Vec&lt;DirectReference&gt;</code></a></td>
<td>direct references to a quorum of messages</td>
</tr>
</tbody>
</table>
<h4 id="triggers_3">Triggers<a class="headerlink" href="#triggers_3" title="Permanent link">&para;</a></h4>
<ul>
<li>to <a href="#Mempool">Mempool</a>: <a href="#requestproposal"><code>RequestProposal</code></a></li>
<li>to <a href="#Shards">Execution shards</a>: <a href="#AnchorChosen"><code>AnchorChosen</code></a></li>
</ul>
<!---
```rust
struct Decision {
  // This is more of an optimization: sometimes it's helpful to tell someone that a decision has
  // been made, and send over the list of messages they need to see the decision (a quorum of 2As).
  // Note that once you have one of these for all learners, you can really stop doing any kind of
  // interesting consensus work, and just send these out to anyone who is still trying to do
  // consensus.
  learner : Learner,
  refs : DirectReferences,
-->
</details>
<!-- ## Example scenario -->

<!-- Short message cascade from a typical common message sent to the machine  -->
<!-- E.g. an example of the common case "life of a transaction or whatever" flow from inputs to outputs -->

<details class='quote'><summary>(Wiki) links on this page</summary><ul><li><a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/mempool/index.html" alt="node_architecture/ordering/mempool/index.md">Mempool engines</a></li><li><a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/execution/index.html" alt="node_architecture/ordering/execution/index.md">Execution engines</a></li><li><a href="https://anoma.github.io/nspec/v2/node_architecture/ordering/mempool/index.html" alt="node_architecture/ordering/mempool/index.md">Mempool engines</a></li></ul></details>

<!-- mermaid_wikilinks -->

<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Isaac Sheff, Xinwen Wang, Robbert van Renesse, and Andrew C. Myers. Heterogeneous paxos: technical report. 2020. <a href="https://arxiv.org/abs/2011.08253">arXiv:2011.08253</a>.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Aleksandr Karbyshev and Isaac Sheff. Heterogeneous paxos 2.0: the specs. 2024. URL: <a href="https://pomf2.lain.la/f/owqf7ws.pdf">https://pomf2.lain.la/f/owqf7ws.pdf</a>.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-08-06T20:14:36+02:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-06</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-06-14T19:10:51+02:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-06-14</span>
  </span>

    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5zM16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! We'll try to improve this page in the future.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="mempool/worker/request_logs.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: RequestLogs">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                RequestLogs
              </div>
            </div>
          </a>
        
        
          
          <a href="consensus/homogeneous_paxos_formal.html" class="md-footer__link md-footer__link--next" aria-label="Next: Formal Definitions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Formal Definitions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  <div class="md-copyright__highlight">
    &copy; 2024 <a href="https://anoma.net">Anoma Foundation</a>
 - Last updated: September 25, 2024 at 07:09 PM UTC
  </div>
  

  <ul>
    <li><a href="https://anoma.net/" target="_blank">Anoma Official Website</a> </li>
    <li><a href="https://art.anoma.net" target="_blank">Anoma Research Topics (ART)</a></li>
    <li><a href="https://anoma.net/blog" target="_blank">Anoma Blog</a></li>
    <li><a href="https://anoma.net/talks" target="_blank">Anoma Talks</a></li>
  </ul>
  <ul>
    <span class="md-copyright__highlight">Extra resources for Anoma
      Specification collaborators</span>
      
      <li><a href="https://anoma.github.io/nspec/v2/indexes/links.html">Quick links</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/indexes/juvix_modules.html">Juvix modules</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/tutorial/index.html">Markdown tutorials for writing Anoma
          Specification</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/tutorial/engines/index.html">On engines in Anoma</a></li>
  </ul>
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://x.com/anoma" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/anoma" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://anoma.net/blog" target="_blank" rel="noopener" title="anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://research.anoma.net" target="_blank" rel="noopener" title="research.anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/anoma" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:arts@heliax.dev" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.path", "navigation.prune", "navigation.tabs", "navigation.sections", "navigation.indexes", "search.highlight", "search.suggest", "search.sharing", "toc.follow"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../assets/js/extra.js"></script>
      
        <script src="../../assets/js/highlight.js"></script>
      
        <script src="../../assets/js/mathjax.js"></script>
      
        <script src="../../https:/polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3.0.0/es5/tex-svg.js"></script>
      
    
  <script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>