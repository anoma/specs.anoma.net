<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"><meta charset="UTF-8"><link href="https://specs.anoma.net/pr-289/assets/css/juvix-catppuchin.css" rel="stylesheet" type="text/css"><link href="https://specs.anoma.net/pr-289/assets/css/latte-light.css" rel="stylesheet" type="text/css"><link href="https://specs.anoma.net/pr-289/assets/css/juvix-source.css" rel="stylesheet" type="text/css"><script src="https://specs.anoma.net/pr-289/assets/js/highlight.js" type="text/javascript"></script><div id="package-header"><span class="caption"></span></div><pre id="src-content"><span class="ju-keyword">module</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">arch.system.state.resource_machine.notes.function_formats.nockma</span></span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span id="prelude:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">prelude</span></span></a></span></a></span></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span id="Stdlib.Data.Nat:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Nat-src.html#Stdlib.Data.Nat:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Nat-src.html#Stdlib.Data.Nat:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">Stdlib.Data.Nat</span></span></a></span></a></span></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span id="Stdlib.Data.List:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List-src.html#Stdlib.Data.List:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List-src.html#Stdlib.Data.List:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">Stdlib.Data.List</span></span></a></span></a></span></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span id="arch.system.state.resource_machine.notes.function_formats.transactionfunction:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">arch.system.state.resource_machine.notes.function_formats.transactionfunction</span></span></a></span></a></span></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-comment">-- Operation codes for Nockma:</span>
<span class="ju-comment">-- 0: Slash (/)</span>
<span class="ju-comment">-- 1: Constant: Returns operand unchanged</span>
<span class="ju-comment">-- 2: Apply/Ap/S:</span>
<span class="ju-comment">-- 3: Cell test (?): Tests if noun is cell</span>
<span class="ju-comment">-- 4: Increment (+): Add 1 to atom</span>
<span class="ju-comment">-- 5: Equality test (=): Compare nouns</span>
<span class="ju-comment">-- 6: If-then-else</span>
<span class="ju-comment">-- 7: Compose</span>
<span class="ju-comment">-- 8: Extend subject</span>
<span class="ju-comment">-- 9: Invoke (call function by arm name)</span>
<span class="ju-comment">-- 10: Pound (#)</span>
<span class="ju-comment">-- 11: Match: Case split on Cells vs Atoms</span>
<span class="ju-comment">-- 12: Scry (read storage)</span>

<span class="ju-comment">-- Basic Nock types</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:1"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:2"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:3"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">terminating</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:5"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="ju-function">nounEq</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:29" class="ju-code-link ju-var"><span class="ju-var">n1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:30" class="ju-code-link ju-var"><span class="ju-var">n2</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor">mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:29" class="ju-code-link ju-var"><span class="ju-var">n1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:30" class="ju-code-link ju-var"><span class="ju-var">n2</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor">mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:31"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:31" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:31" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:32"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:32" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:32" class="ju-code-link ju-var"><span class="ju-var">y</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:31" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:32" class="ju-code-link ju-var"><span class="ju-var">y</span></a></span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor">mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:33"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:33" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:33" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:34"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:34" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:34" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:35"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:35" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:35" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:36"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:36" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:36" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="ju-function">nounEq</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:33" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:35" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Bool/Base-src.html#Stdlib.Data.Bool.Base:3" class="ju-code-link ju-function"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="ju-function">nounEq</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:34" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:36" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:6"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:6" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:6" class="ju-code-link ju-function"><span class="ju-function">EqNoun</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Eq</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkEq</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:37"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:37" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:37" class="ju-code-link ju-function"><span class="ju-function">eq</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="ju-function">nounEq</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Helper to convert storage values to Nouns</span>
<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:7"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:7" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:7" class="ju-code-link ju-axiom"><span class="ju-axiom">convertToNoun</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:38"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:38" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:38" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:38" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Helper to convert Nouns to storage values</span>
<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:8"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:8" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:8" class="ju-code-link ju-axiom"><span class="ju-axiom">convertFromNoun</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:39"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:39" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:39" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:39" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:9"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:9" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:9" class="ju-code-link ju-inductive"><span class="ju-inductive">ScryOp</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:10"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:10" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:10" class="ju-code-link ju-constructor"><span class="ju-constructor">Direct</span></a></span></a></span></span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:11"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:11" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:11" class="ju-code-link ju-constructor"><span class="ju-constructor">Index</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:12"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:40"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:40" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:40" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:41"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:41" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:41" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.notes.function_formats.nockma:13"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:13" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:13" class="ju-code-link ju-constructor"><span class="ju-constructor">mkStorage</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:42" class="ju-code-link ju-var"><span class="ju-var">readDirect</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:40" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:41" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:43" class="ju-code-link ju-var"><span class="ju-var">readIndex</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:41" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:41" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:14"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:14" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:14" class="ju-code-link ju-axiom"><span class="ju-axiom">externalStorage</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:44"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:44" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:44" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:45"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:45" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:45" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:44" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:45" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:15"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="ju-inductive">NockOp</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:16"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span></a></span></span>
  <span class="ju-comment">-- /</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:17"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:17" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:17" class="ju-code-link ju-constructor"><span class="ju-constructor">Constant</span></a></span></a></span></span>
  <span class="ju-comment">-- Returns operand unchanged</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:18"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:18" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:18" class="ju-code-link ju-constructor"><span class="ju-constructor">Apply</span></a></span></a></span></span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:19"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:19" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:19" class="ju-code-link ju-constructor"><span class="ju-constructor">CellTest</span></a></span></a></span></span>
  <span class="ju-comment">-- ?</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:20"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:20" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:20" class="ju-code-link ju-constructor"><span class="ju-constructor">Increment</span></a></span></a></span></span>
  <span class="ju-comment">-- +</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:21"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:21" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:21" class="ju-code-link ju-constructor"><span class="ju-constructor">EqualOp</span></a></span></a></span></span>
  <span class="ju-comment">-- =</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:22"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:22" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:22" class="ju-code-link ju-constructor"><span class="ju-constructor">IfThenElse</span></a></span></a></span></span>
  <span class="ju-comment">-- 6</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:23"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:23" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:23" class="ju-code-link ju-constructor"><span class="ju-constructor">Compose</span></a></span></a></span></span>
  <span class="ju-comment">-- 7</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:24"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:24" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:24" class="ju-code-link ju-constructor"><span class="ju-constructor">Extend</span></a></span></a></span></span>
  <span class="ju-comment">-- 8</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:25"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:25" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:25" class="ju-code-link ju-constructor"><span class="ju-constructor">Invoke</span></a></span></a></span></span>
  <span class="ju-comment">-- 9</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:26"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span></a></span></span>
  <span class="ju-comment">-- #</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:27"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:27" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:27" class="ju-code-link ju-constructor"><span class="ju-constructor">Match</span></a></span></a></span></span>
  <span class="ju-comment">-- 11</span>
  <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:28"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:28" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:28" class="ju-code-link ju-constructor"><span class="ju-constructor">Scry</span></a></span></a></span></span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:57"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:57" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:57" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- 12</span>

opOr</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:61" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:62" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:63" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:61" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:61" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:62" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:63" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:64"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:64" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:64" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:64" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:58"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:58" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:58" class="ju-code-link ju-function"><span class="ju-function">
parseOp</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:65" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="ju-inductive">NockOp</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">let</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:68"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:68" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:68" class="ju-code-link ju-function"><span class="ju-function">test</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:66"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:66" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:66" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:67"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:67" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:67" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
        <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:65" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:66" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span> <span class="ju-keyword">of</span>
          <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:67" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span>
          <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Foldable/Monomorphic-src.html#Stdlib.Trait.Foldable.Monomorphic:24" class="ju-code-link ju-function"><span class="ju-function">foldr</span></a></span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:57" class="ju-code-link ju-function"><span class="ju-function">opOr</span></a></span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:27" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>zipWith</span></a></span>
      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:68" class="ju-code-link ju-function"><span class="ju-function">test</span></a></span>
      <span class="ju-delimiter">[</span><span class="ju-number">0</span><span class="ju-delimiter">;</span> <span class="ju-number">1</span><span class="ju-delimiter">;</span> <span class="ju-number">2</span><span class="ju-delimiter">;</span> <span class="ju-number">3</span><span class="ju-delimiter">;</span> <span class="ju-number">4</span><span class="ju-delimiter">;</span> <span class="ju-number">5</span><span class="ju-delimiter">;</span> <span class="ju-number">6</span><span class="ju-delimiter">;</span> <span class="ju-number">7</span><span class="ju-delimiter">;</span> <span class="ju-number">8</span><span class="ju-delimiter">;</span> <span class="ju-number">9</span><span class="ju-delimiter">;</span> <span class="ju-number">10</span><span class="ju-delimiter">;</span> <span class="ju-number">11</span><span class="ju-delimiter">;</span> <span class="ju-number">12</span><span class="ju-delimiter">]</span>
      <span class="ju-delimiter">[</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:17" class="ju-code-link ju-constructor"><span class="ju-constructor">Constant</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:18" class="ju-code-link ju-constructor"><span class="ju-constructor">Apply</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:19" class="ju-code-link ju-constructor"><span class="ju-constructor">CellTest</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:20" class="ju-code-link ju-constructor"><span class="ju-constructor">Increment</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:21" class="ju-code-link ju-constructor"><span class="ju-constructor">EqualOp</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:22" class="ju-code-link ju-constructor"><span class="ju-constructor">IfThenElse</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:23" class="ju-code-link ju-constructor"><span class="ju-constructor">Compose</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:24" class="ju-code-link ju-constructor"><span class="ju-constructor">Extend</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:25" class="ju-code-link ju-constructor"><span class="ju-constructor">Invoke</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:27" class="ju-code-link ju-constructor"><span class="ju-constructor">Match</span></a></span><span class="ju-delimiter">;</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:28" class="ju-code-link ju-constructor"><span class="ju-constructor">Scry</span></a></span><span class="ju-delimiter">;</span>
      <span class="ju-delimiter">]</span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Monad to encompass gas consumption and error handling.</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:59"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:69"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:69" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:69" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.notes.function_formats.nockma:60"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:70" class="ju-code-link ju-var"><span class="ju-var">runGasState</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Result</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/String-src.html#Juvix.Builtin.V1.String:1" class="ju-code-link ju-inductive"><span class="ju-axiom">String</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Pair/Base-src.html#Stdlib.Data.Pair.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive"><span class="ju-delimiter">(</span>Pair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:69" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:75"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:75" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:75" class="ju-code-link ju-function"><span class="ju-function">GasStateMonad</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Monad</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkMonad</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:107"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:107" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:107" class="ju-code-link ju-function"><span class="ju-function">applicative</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkApplicative</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
        <span id="arch.system.state.resource_machine.notes.function_formats.nockma:93"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:93" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:93" class="ju-code-link ju-function"><span class="ju-function">functor</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Functor/Polymorphic-src.html#Stdlib.Trait.Functor.Polymorphic:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFunctor</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
            <span id="arch.system.state.resource_machine.notes.function_formats.nockma:92"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:92" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:92" class="ju-code-link ju-function"><span class="ju-function">map</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:86"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:86" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:86" class="ju-code-link ju-var"><span class="ju-var">f</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:87"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:87" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:87" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span>
                  <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:88"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:88" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:88" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                    <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:87" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:88" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span> <span class="ju-keyword">of</span>
                      <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:89"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:89" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:89" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:90"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:90" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:90" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:86" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">(</span>f</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:89" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:90" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span><span class="ju-delimiter">)</span>
                      <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:91"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:91" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:91" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:91" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
          <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.notes.function_formats.nockma:96"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:96" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:96" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:94"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:94" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:94" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:95"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:95" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:95" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:94" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:95" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.notes.function_formats.nockma:106"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:106" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:106" class="ju-code-link ju-function"><span class="ju-function">ap</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:97"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:97" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:97" class="ju-code-link ju-var"><span class="ju-var">sf</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:98"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:98" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:98" class="ju-code-link ju-var"><span class="ju-var">sa</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span>
              <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:99"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:99" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:99" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:97" class="ju-code-link ju-var"><span class="ju-var">sf</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:99" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span> <span class="ju-keyword">of</span>
                  <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:100"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:100" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:100" class="ju-code-link ju-var"><span class="ju-var">f</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:101"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:101" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:101" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
                    <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:98" class="ju-code-link ju-var"><span class="ju-var">sa</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:101" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                      <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:102"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:102" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:102" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:103"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:103" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:103" class="ju-code-link ju-var"><span class="ju-var">final</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:100" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">(</span>f</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:102" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:103" class="ju-code-link ju-var"><span class="ju-var">final</span></a></span><span class="ju-delimiter">)</span>
                      <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:104"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:104" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:104" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:104" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span>
                    <span class="ju-delimiter">}</span>
                  <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:105"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:105" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:105" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:105" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
      <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:114"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:114" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:114" class="ju-code-link ju-function"><span class="ju-function">bind</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:108"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:108" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:108" class="ju-code-link ju-var"><span class="ju-var">ma</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:109"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:109" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:109" class="ju-code-link ju-var"><span class="ju-var">f</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:110"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:110" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:110" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:108" class="ju-code-link ju-var"><span class="ju-var">ma</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:110" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span> <span class="ju-keyword">of</span>
              <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:111"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:111" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:111" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:112"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:112" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:112" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:109" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">(</span>f</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:111" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:112" class="ju-code-link ju-var"><span class="ju-var">remaining</span></a></span>
              <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:113"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:113" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:113" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:113" class="ju-code-link ju-var"><span class="ju-var">e</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:76"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">
err</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:115" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:116" class="ju-code-link ju-var"><span class="ju-var">str</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/String-src.html#Juvix.Builtin.V1.String:1" class="ju-code-link ju-inductive"><span class="ju-axiom">String</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:115" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:116" class="ju-code-link ju-var"><span class="ju-var">str</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:77"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:77" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:77" class="ju-code-link ju-function"><span class="ju-function">
<span class="ju-comment">-- Gas cost values for each operation type</span>
<span class="ju-comment">-- These are made up for demo purposes</span>
getGasCost</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:117" class="ju-code-link ju-var"><span class="ju-var">cost</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="ju-inductive">NockOp</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:117" class="ju-code-link ju-var"><span class="ju-var">cost</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:19" class="ju-code-link ju-constructor"><span class="ju-constructor">CellTest</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:20" class="ju-code-link ju-constructor"><span class="ju-constructor">Increment</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:21" class="ju-code-link ju-constructor"><span class="ju-constructor">EqualOp</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:22" class="ju-code-link ju-constructor"><span class="ju-constructor">IfThenElse</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">3</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:23" class="ju-code-link ju-constructor"><span class="ju-constructor">Compose</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:24" class="ju-code-link ju-constructor"><span class="ju-constructor">Extend</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:25" class="ju-code-link ju-constructor"><span class="ju-constructor">Invoke</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">3</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:28" class="ju-code-link ju-constructor"><span class="ju-constructor">Scry</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">10</span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:78"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">
consume</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:118" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="ju-inductive">NockOp</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Unit/Base-src.html#Stdlib.Data.Unit.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Unit</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor">mkGasState</span></a></span>
    <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:119"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:119" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:119" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">let</span>
        <span id="arch.system.state.resource_machine.notes.function_formats.nockma:120"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:120" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:120" class="ju-code-link ju-function"><span class="ju-function">cost</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:77" class="ju-code-link ju-function"><span class="ju-function">getGasCost</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:118" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span><span class="ju-delimiter">;</span>
      <span class="ju-keyword">in</span> <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:120" class="ju-code-link ju-function"><span class="ju-function">cost</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:12" class="ju-code-link ju-function"><span class="ju-function">&gt;</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:119" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span> <span class="ju-keyword">of</span>
           <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="ju-string">&quot;Out of gas&quot;</span>
           <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkPair</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Unit/Base-src.html#Stdlib.Data.Unit.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">unit</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:7" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>sub</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:119" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:120" class="ju-code-link ju-function"><span class="ju-function">cost</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:79"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:79" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:79" class="ju-code-link ju-function"><span class="ju-function">
<span class="ju-comment">-- Implementation of storage read operations (scrying)</span>
scry</span></a></span></a></span></span>
  <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:121" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:122" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:121" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:123" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:9" class="ju-code-link ju-inductive"><span class="ju-inductive">ScryOp</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:124" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Result</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/String-src.html#Juvix.Builtin.V1.String:1" class="ju-code-link ju-inductive"><span class="ju-axiom">String</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:123" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:10" class="ju-code-link ju-constructor"><span class="ju-constructor">Direct</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:47" class="ju-code-link ju-function"><span class="ju-function">Storage<span class="ju-delimiter">.</span>readDirect</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:122" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:124" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:125"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:125" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:125" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:7" class="ju-code-link ju-axiom"><span class="ju-axiom"><span class="ju-delimiter">(</span>convertToNoun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:125" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="ju-string">&quot;Direct storage read failed&quot;</span>
      <span class="ju-delimiter">}</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:11" class="ju-code-link ju-constructor"><span class="ju-constructor">Index</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:47" class="ju-code-link ju-function"><span class="ju-function">Storage<span class="ju-delimiter">.</span>readDirect</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:122" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:124" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="ju-keyword">of</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:126"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:126" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:126" class="ju-code-link ju-var"><span class="ju-var">indexFn</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:48" class="ju-code-link ju-function"><span class="ju-function">Storage<span class="ju-delimiter">.</span>readIndex</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:122" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:126" class="ju-code-link ju-var"><span class="ju-var">indexFn</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:127"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:127" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:127" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:7" class="ju-code-link ju-axiom"><span class="ju-axiom"><span class="ju-delimiter">(</span>convertToNoun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:127" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="ju-string">&quot;Index computation failed&quot;</span>
          <span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="ju-string">&quot;Index function not found&quot;</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Helper for slash (/) operations</span>
<span class="ju-keyword">terminating</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:80"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span></a></span></span>
  <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:128" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:129" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:128" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:130" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:130" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:132"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">1</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span>
        <span class="ju-comment">-- Rule: /[1 a] -&gt; a</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">2</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                <span class="ju-comment">-- Rule: /[2 a b] -&gt; a</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:133"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:133" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:133" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:133" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span>
                <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Cannot take slash of atom&quot;</span>
              <span class="ju-delimiter">}</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">3</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span>
                  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                    <span class="ju-comment">-- Rule: /[3 a b] -&gt; b</span>
                    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="ju-keyword">_</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:134"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:134" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:134" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:134" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span>
                    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Cannot take slash of atom&quot;</span>
                  <span class="ju-delimiter">}</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
                  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:7" class="ju-code-link ju-function"><span class="ju-function">mod</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">0</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Rule: /[(a + a) b] -&gt; /[2 /[a b]]</span>
                          consume</span></a></span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                        <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:129" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span>
                            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:135"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:135" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:135" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:129" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:135" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
                    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Rule: /[(a + a + 1) b] -&gt; /[3 /[a b]]</span>
                          consume</span></a></span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                        <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:129" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:132" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:131" class="ju-code-link ju-var"><span class="ju-var">subject</span></a></span>
                            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:136"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:136" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:136" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:129" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">3</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:136" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
                  <span class="ju-delimiter">}</span>
              <span class="ju-delimiter">}</span>
          <span class="ju-delimiter">}</span>
      <span class="ju-delimiter">}</span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Slash must be atom&quot;</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Helper for pound (#) operations</span>
<span class="ju-keyword">terminating</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:81"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:81" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:81" class="ju-code-link ju-function"><span class="ju-function">pound</span></a></span></a></span></span>
  <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:137" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:138" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:137" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:139" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:140" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:139" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:142"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">1</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:140" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span>
        <span class="ju-comment">-- Rule: #[1 a b] -&gt; a</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:7" class="ju-code-link ju-function"><span class="ju-function">mod</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">0</span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                <span class="ju-comment">-- Rule: #[(a + a) b c] -&gt; #[a [b /[(a + a + 1) c]] c]</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:138" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-delimiter">(</span><span class="ju-number">2</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Trait/Natural-src.html#Juvix.Builtin.V1.Trait.Natural:9" class="ju-code-link ju-function"><span class="ju-function">*</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function">div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Trait/Natural-src.html#Juvix.Builtin.V1.Trait.Natural:8" class="ju-code-link ju-function"><span class="ju-function">+</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span>
                        <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:143"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:143" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:143" class="ju-code-link ju-var"><span class="ju-var">slashResult</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span>
                            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:81" class="ju-code-link ju-function"><span class="ju-function">pound</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:138" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:140" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:143" class="ju-code-link ju-var"><span class="ju-var">slashResult</span></a></span><span class="ju-delimiter">)</span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
                <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid pound target&quot;</span>
              <span class="ju-delimiter">}</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                <span class="ju-comment">-- Rule: #[(a + a + 1) b c] -&gt; #[a [/[(a + a) c] b] c]</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:138" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-delimiter">(</span><span class="ju-number">2</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Trait/Natural-src.html#Juvix.Builtin.V1.Trait.Natural:9" class="ju-code-link ju-function"><span class="ju-function">*</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function">div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span>
                        <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:144"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:144" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:144" class="ju-code-link ju-var"><span class="ju-var">slashResult</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span>
                            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
                              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:81" class="ju-code-link ju-function"><span class="ju-function">pound</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:138" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/DivMod-src.html#Stdlib.Trait.DivMod:6" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>div</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:142" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:144" class="ju-code-link ju-var"><span class="ju-var">slashResult</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:140" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:141" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
                <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid pound target&quot;</span>
              <span class="ju-delimiter">}</span>
          <span class="ju-delimiter">}</span>
      <span class="ju-delimiter">}</span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Pound must be atom&quot;</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">terminating</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:82"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:82" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:82" class="ju-code-link ju-function"><span class="ju-function">evalOp</span></a></span></a></span></span>
  <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:145" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:145" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:147" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:15" class="ju-code-link ju-inductive"><span class="ju-inductive">NockOp</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:147" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-comment">-- *[a 0 b] -&gt; /[b a]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:16" class="ju-code-link ju-constructor"><span class="ju-constructor">Slash</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:80" class="ju-code-link ju-function"><span class="ju-function">slash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span>

    <span class="ju-comment">-- *[a 1 b] -&gt; b</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:17" class="ju-code-link ju-constructor"><span class="ju-constructor">Constant</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span>

    <span class="ju-comment">-- *[a 2 b c] -&gt; *[*[a b] *[a c]]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:18" class="ju-code-link ju-constructor"><span class="ju-constructor">Apply</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:150"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:150" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:150" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:151"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:151" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:151" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:150" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:152"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:152" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:152" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:151" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:153"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:153" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:153" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:152" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:153" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid apply args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 3 b] -&gt; ?*[a b]</span>
    <span class="ju-comment">-- ?[a b] -&gt; 0</span>
    <span class="ju-comment">-- ?a -&gt; 1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:19" class="ju-code-link ju-constructor"><span class="ju-constructor">CellTest</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:154"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:154" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:154" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:154" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:155"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:155" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:155" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:155" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span> <span class="ju-keyword">of</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span>
                <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid cell test args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 4 b] -&gt; +*[a b]</span>
    <span class="ju-comment">-- +[a b] -&gt; +[a b]</span>
    <span class="ju-comment">-- +a -&gt; 1 + a</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:20" class="ju-code-link ju-constructor"><span class="ju-constructor">Increment</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:156"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:156" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:156" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:156" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:157"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:157" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:157" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:157" class="ju-code-link ju-var"><span class="ju-var">res</span></a></span> <span class="ju-keyword">of</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:158"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:158" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:158" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>suc</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:158" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:159"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:159" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:159" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:159" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span><span class="ju-comment">-- +[a b] -&gt; +[a b] case</span>
            <span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid increment args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 5 b c] -&gt; =*[a b] *[a c]</span>
    <span class="ju-comment">-- =[a a] -&gt; 0</span>
    <span class="ju-comment">-- =[a b] -&gt; 1</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:21" class="ju-code-link ju-constructor"><span class="ju-constructor">EqualOp</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:160"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:160" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:160" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:161"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:161" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:161" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:160" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:162"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:162" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:162" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:161" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:163"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:163" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:163" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span>
                      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:5" class="ju-code-link ju-function"><span class="ju-function">nounEq</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:162" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:163" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span>
                        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">1</span>
                      <span class="ju-delimiter">}</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid equality args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 6 b c d] -&gt; *[a *[[c d] 0 *[[2 3] 0 *[a 4 4 b]]]]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:22" class="ju-code-link ju-constructor"><span class="ju-constructor">IfThenElse</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:164"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:164" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:164" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:165"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:165" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:165" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:166"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:166" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:166" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">4</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">4</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:164" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:167"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:167" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:167" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">3</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:167" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:168"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:168" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:168" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:165" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:166" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:168" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:169"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:169" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:169" class="ju-code-link ju-var"><span class="ju-var">r3</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:169" class="ju-code-link ju-var"><span class="ju-var">r3</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid if-then-else args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 7 b c] -&gt; *[*[a b] c]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:23" class="ju-code-link ju-constructor"><span class="ju-constructor">Compose</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:170"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:170" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:170" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:171"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:171" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:171" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:170" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:172"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:172" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:172" class="ju-code-link ju-var"><span class="ju-var">r</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:172" class="ju-code-link ju-var"><span class="ju-var">r</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:171" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid compose args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 8 b c] -&gt; *[[*[a b] a] c]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:24" class="ju-code-link ju-constructor"><span class="ju-constructor">Extend</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:173"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:173" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:173" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:174"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:174" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:174" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:173" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:175"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:175" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:175" class="ju-code-link ju-var"><span class="ju-var">r</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:175" class="ju-code-link ju-var"><span class="ju-var">r</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:174" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid extend args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 9 b c] -&gt; *[*[a c] 2 [0 1] 0 b]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:25" class="ju-code-link ju-constructor"><span class="ju-constructor">Invoke</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:176"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:176" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:176" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:177"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:177" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:177" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:177" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:178"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:178" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:178" class="ju-code-link ju-var"><span class="ju-var">core</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">let</span>
                <span id="arch.system.state.resource_machine.notes.function_formats.nockma:179"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:179" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:179" class="ju-code-link ju-function"><span class="ju-function">formula</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">2</span><span class="ju-delimiter">)</span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:176" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
              <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:178" class="ju-code-link ju-var"><span class="ju-var">core</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:179" class="ju-code-link ju-function"><span class="ju-function">formula</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid invoke args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 10 [b c] d] -&gt; #[b *[a c] *[a d]]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:26" class="ju-code-link ju-constructor"><span class="ju-constructor">Pound</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:180"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:180" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:180" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:181"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:181" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:181" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:182"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:182" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:182" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:181" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:183"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:183" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:183" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:182" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:184"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:184" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:184" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:81" class="ju-code-link ju-function"><span class="ju-function">pound</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:180" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:183" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:184" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid pound args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 11 [b c] d] -&gt; *[[*[a c] *[a d]] 0 3]</span>
    <span class="ju-comment">-- *[a 11 b c] -&gt; *[a c]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:27" class="ju-code-link ju-constructor"><span class="ju-constructor">Match</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:185"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:185" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:185" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:186"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:186" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:186" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:187"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:187" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:187" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:186" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:188"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:188" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:188" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:187" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span><span class="ju-delimiter">)</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:189"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:189" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:189" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:188" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:189" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">3</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="ju-keyword">_</span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:190"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:190" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:190" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:190" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid pure pound args&quot;</span>
      <span class="ju-delimiter">}</span>

    <span class="ju-comment">-- *[a 12 b c d] -&gt; result &lt;- SCRY b c; *[a result d]</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:28" class="ju-code-link ju-constructor"><span class="ju-constructor">Scry</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:149" class="ju-code-link ju-var"><span class="ju-var">args</span></a></span> <span class="ju-keyword">of</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:191"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:191" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:191" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:192"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:192" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:192" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:193"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:193" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:193" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- First evaluate b to get the opcode</span>
              nock</span></a></span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:191" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:194"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:194" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:194" class="ju-code-link ju-var"><span class="ju-var">opcode</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:194" class="ju-code-link ju-var"><span class="ju-var">opcode</span></a></span> <span class="ju-keyword">of</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:195"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:195" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:195" class="ju-code-link ju-var"><span class="ju-var">opval</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Then evaluate c to get the address</span>
                      nock</span></a></span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span>
                      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:192" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:196"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:196" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:196" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:196" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span> <span class="ju-keyword">of</span>
                        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:197"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:197" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:197" class="ju-code-link ju-var"><span class="ju-var">addrVal</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                          <span class="ju-comment">-- Convert opcode to ScryOp</span>
                          <span class="ju-keyword">let</span>
                            <span id="arch.system.state.resource_machine.notes.function_formats.nockma:198"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:198" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:198" class="ju-code-link ju-function"><span class="ju-function">scryType</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:195" class="ju-code-link ju-var"><span class="ju-var">opval</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:9" class="ju-code-link ju-function"><span class="ju-function">==</span></a></span> <span class="ju-number">0</span> <span class="ju-keyword">of</span>
                                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:3" class="ju-code-link ju-constructor"><span class="ju-constructor">true</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:10" class="ju-code-link ju-constructor"><span class="ju-constructor">Direct</span></a></span>
                                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:2" class="ju-code-link ju-constructor"><span class="ju-constructor">false</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:11" class="ju-code-link ju-constructor"><span class="ju-constructor">Index</span></a></span><span class="ju-delimiter">;</span>
                          <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:60" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-comment">-- Perform the scry operation and wrap result in GasState</span>
                            mkGasState</span></a></span>
                            <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:199"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:199" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:199" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:79" class="ju-code-link ju-function"><span class="ju-function">scry</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:198" class="ju-code-link ju-function"><span class="ju-function">scryType</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:197" class="ju-code-link ju-var"><span class="ju-var">addrVal</span></a></span>
                                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:200"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:200" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:200" class="ju-code-link ju-var"><span class="ju-var">scryResult</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Continue evaluation with the scry result</span>
                                    GasState<span class="ju-delimiter">.</span>runGasState</span></a></span>
                                    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:146" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:148" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:200" class="ju-code-link ju-var"><span class="ju-var">scryResult</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:193" class="ju-code-link ju-var"><span class="ju-var">d</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                                    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:199" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>
                        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Scry address must be atom&quot;</span><span class="ju-delimiter">}</span>
                <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Scry type must be atom&quot;</span><span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid scry args&quot;</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Core Nockma evaluator</span>
<span class="ju-keyword">terminating</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:83"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:201" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:202" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:12" class="ju-code-link ju-inductive"><span class="ju-inductive">Storage</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:201" class="ju-code-link ju-var"><span class="ju-var">val</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:203" class="ju-code-link ju-var"><span class="ju-var">input</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:59" class="ju-code-link ju-inductive"><span class="ju-inductive">GasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:203" class="ju-code-link ju-var"><span class="ju-var">input</span></a></span> <span class="ju-keyword">of</span>
    <span class="ju-comment">-- Rule: *a -&gt; *a</span>
    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:203" class="ju-code-link ju-var"><span class="ju-var">input</span></a></span>

    <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:204"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:204" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:204" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:205"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:205" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:205" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:205" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="ju-keyword">of</span>
        
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:206"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:206" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:206" class="ju-code-link ju-var"><span class="ju-var">first</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:207"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:207" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:207" class="ju-code-link ju-var"><span class="ju-var">rest</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:206" class="ju-code-link ju-var"><span class="ju-var">first</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
            <span class="ju-comment">-- Rule: *[a [b c] d] -&gt; [*[a b c] *[a d]]</span>
            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:208"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:208" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:208" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:209"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:209" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:209" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:202" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:204" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:208" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:209" class="ju-code-link ju-var"><span class="ju-var">c</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:210"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:210" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:210" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function">nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:202" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:204" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:207" class="ju-code-link ju-var"><span class="ju-var">rest</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:211"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:211" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:211" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Applicative-src.html#Stdlib.Trait.Applicative:14" class="ju-code-link ju-function"><span class="ju-function">pure</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:210" class="ju-code-link ju-var"><span class="ju-var">r1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:211" class="ju-code-link ju-var"><span class="ju-var">r2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">}</span>

            <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:212"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:212" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:212" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
              <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:58" class="ju-code-link ju-function"><span class="ju-function">parseOp</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:212" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:213"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:213" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:213" class="ju-code-link ju-var"><span class="ju-var">opcode</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:78" class="ju-code-link ju-function"><span class="ju-function">consume</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:213" class="ju-code-link ju-var"><span class="ju-var">opcode</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Monad-src.html#Stdlib.Trait.Monad:19" class="ju-code-link ju-function"><span class="ju-function">&gt;&gt;=</span></a></span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:82" class="ju-code-link ju-function"><span class="ju-function">evalOp</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:202" class="ju-code-link ju-var"><span class="ju-var">stor</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:213" class="ju-code-link ju-var"><span class="ju-var">opcode</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:204" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:207" class="ju-code-link ju-var"><span class="ju-var">rest</span></a></span><span class="ju-delimiter">}</span>
                <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid operation&quot;</span>
              <span class="ju-delimiter">}</span>
          <span class="ju-delimiter">}</span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:76" class="ju-code-link ju-function"><span class="ju-function">err</span></a></span> <span class="ju-string">&quot;Invalid Nock expression&quot;</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:84"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:84" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:84" class="ju-code-link ju-function"><span class="ju-function">NockmaTransactionFunction</span></a></span></a></span></span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:1" class="ju-code-link ju-inductive"><span class="ju-inductive">TransactionFunction</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive"><span class="ju-delimiter">(</span>Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkTransactionFunction</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:215"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:215" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:215" class="ju-code-link ju-function"><span class="ju-function">readStorage</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:214"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:214" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:214" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">12</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">0</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:214" class="ju-code-link ju-var"><span class="ju-var">addr</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:217"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:217" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:217" class="ju-code-link ju-function"><span class="ju-function">readByIndex</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:216"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:216" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:216" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">12</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Cell</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:216" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>Atom</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:225"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:225" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:225" class="ju-code-link ju-function"><span class="ju-function">cost</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:218"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:218" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:218" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
        <span class="ju-comment">-- Simple cost model: sums gas cost of all appearing operations</span>
        <span class="ju-keyword">let</span>
          <span class="ju-keyword">terminating</span>
          <span id="arch.system.state.resource_machine.notes.function_formats.nockma:219"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:219" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:219" class="ju-code-link ju-function"><span class="ju-function">countNodes</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:220" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
            <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:220" class="ju-code-link ju-var"><span class="ju-var">n</span></a></span> <span class="ju-keyword">of</span>
              <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Atom</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:221"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:221" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:221" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
                <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:58" class="ju-code-link ju-function"><span class="ju-function">parseOp</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:221" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
                  <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:222"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:222" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:222" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:77" class="ju-code-link ju-function"><span class="ju-function">getGasCost</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:222" class="ju-code-link ju-var"><span class="ju-var">op</span></a></span>
                  <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span>
                <span class="ju-delimiter">}</span>
              <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:3" class="ju-code-link ju-constructor"><span class="ju-constructor">Cell</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:223"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:223" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:223" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:224"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:224" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:224" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:219" class="ju-code-link ju-function"><span class="ju-function">countNodes</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:223" class="ju-code-link ju-var"><span class="ju-var">a</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Trait/Natural-src.html#Juvix.Builtin.V1.Trait.Natural:8" class="ju-code-link ju-function"><span class="ju-function">+</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:219" class="ju-code-link ju-function"><span class="ju-function">countNodes</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:224" class="ju-code-link ju-var"><span class="ju-var">b</span></a></span><span class="ju-delimiter">;</span>
        <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:219" class="ju-code-link ju-function"><span class="ju-function">countNodes</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:218" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.notes.function_formats.nockma:85"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:85" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:85" class="ju-code-link ju-function"><span class="ju-function">NockmaVM</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:3" class="ju-code-link ju-inductive"><span class="ju-inductive">TransactionVM</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive"><span class="ju-delimiter">(</span>Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Noun</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/transactionfunction-src.html#arch.system.state.resource_machine.notes.function_formats.transactionfunction:4" class="ju-code-link ju-constructor"><span class="ju-constructor">mkTransactionVM</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:226"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:226" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:226" class="ju-code-link ju-function"><span class="ju-function">txFunc</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:84" class="ju-code-link ju-function"><span class="ju-function">NockmaTransactionFunction</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.notes.function_formats.nockma:231"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:231" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:231" class="ju-code-link ju-function"><span class="ju-function">eval</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.notes.function_formats.nockma:227"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:227" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:227" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:228"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:228" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:228" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
        <span class="ju-keyword">case</span>
          <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:71" class="ju-code-link ju-function"><span class="ju-function">GasState<span class="ju-delimiter">.</span>runGasState</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:83" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>nock</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:14" class="ju-code-link ju-axiom"><span class="ju-axiom"><span class="ju-delimiter">(</span>externalStorage</span></a></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:227" class="ju-code-link ju-var"><span class="ju-var">prog</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:228" class="ju-code-link ju-var"><span class="ju-var">gas</span></a></span>
        <span class="ju-keyword">of</span>
          <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:229"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:229" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:229" class="ju-code-link ju-var"><span class="ju-var">result</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">ok</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:202" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>fst</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:229" class="ju-code-link ju-var"><span class="ju-var">result</span></a></span><span class="ju-delimiter">)</span>
          <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span id="arch.system.state.resource_machine.notes.function_formats.nockma:230"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:230" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:230" class="ju-code-link ju-var"><span class="ju-var">msg</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Result/Base-src.html#Stdlib.Data.Result.Base:2" class="ju-code-link ju-constructor"><span class="ju-constructor">error</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/notes/function_formats/nockma-src.html#arch.system.state.resource_machine.notes.function_formats.nockma:230" class="ju-code-link ju-var"><span class="ju-var">msg</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
</pre><footer><pre>Powered by <a href="https://juvix.org">Juvix </a><a href="https://github.com/anoma/juvix/commit/b954100">0.6.9-b954100</a></pre></footer><footer><pre>Last modified on 2025-02-20 18:05 UTC</pre></footer></html>