<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"><meta charset="UTF-8"><link href="https://specs.anoma.net/pr-289/assets/css/juvix-catppuchin.css" rel="stylesheet" type="text/css"><link href="https://specs.anoma.net/pr-289/assets/css/latte-light.css" rel="stylesheet" type="text/css"><link href="https://specs.anoma.net/pr-289/assets/css/juvix-source.css" rel="stylesheet" type="text/css"><script src="https://specs.anoma.net/pr-289/assets/js/highlight.js" type="text/javascript"></script><div id="package-header"><span class="caption"></span></div><pre id="src-content"><span class="ju-keyword">module</span> <span id="arch.system.state.resource_machine.prelude:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">arch.system.state.resource_machine.prelude</span></span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span id="prelude:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">prelude</span></span></a></span></a></span></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span id="arch.node.types.crypto:0"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:0" class="ju-code-link ju-module"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:0" class="ju-code-link ju-module"><span class="ju-module"><span class="ju-module">arch.node.types.crypto</span></span></a></span></a></span></span> <span class="ju-keyword">open</span> <span class="ju-keyword">using</span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:8" class="ju-code-link ju-var"><span class="ju-var">ValueHash</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:9" class="ju-code-link ju-var"><span class="ju-var">DeltaHash</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:10" class="ju-code-link ju-var"><span class="ju-var">LabelHash</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:11" class="ju-code-link ju-var"><span class="ju-var">LogicHash</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:12" class="ju-code-link ju-var"><span class="ju-var">Quantity</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">syntax</span> <span class="ju-keyword">alias</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:13" class="ju-code-link ju-var"><span class="ju-var">Balance</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:1"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:1" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nonce</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:2"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:2" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:2" class="ju-code-link ju-constructor"><span class="ju-constructor">mkNonce</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:14" class="ju-code-link ju-var"><span class="ju-var">nonce</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">deriving</span> <span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:3"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:3" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:3" class="ju-code-link ju-function"><span class="ju-function">eqNonce</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Eq-src.html#Stdlib.Trait.Eq:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Eq</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nonce</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">deriving</span> <span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:4"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:4" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:4" class="ju-code-link ju-function"><span class="ju-function">ordNonce</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nonce</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.prelude:5"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:5" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:5" class="ju-code-link ju-axiom"><span class="ju-axiom">RandSeed</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:6"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:15"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:15" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:15" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:7"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFixedSize</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:16" class="ju-code-link ju-var"><span class="ju-var">bitSize</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:24"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:24" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:24" class="ju-code-link ju-function"><span class="ju-function">fixedSizeNat256</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFixedSize</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:30"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:30" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:30" class="ju-code-link ju-function"><span class="ju-function">bitSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-number">256</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:25"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:25" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:25" class="ju-code-link ju-function"><span class="ju-function">fixedSizeByteString256</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:192" class="ju-code-link ju-function"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFixedSize</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:31"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:31" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:31" class="ju-code-link ju-function"><span class="ju-function">bitSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-number">256</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:26"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:26" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:26" class="ju-code-link ju-function"><span class="ju-function">fixedSizeNonce256</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nonce</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFixedSize</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:32"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:32" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:32" class="ju-code-link ju-function"><span class="ju-function">bitSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-number">256</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:27"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:27" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:27" class="ju-code-link ju-function"><span class="ju-function">fixedSizeRandSeed256</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:5" class="ju-code-link ju-axiom"><span class="ju-axiom">RandSeed</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:7" class="ju-code-link ju-constructor"><span class="ju-constructor">mkFixedSize</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:33"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:33" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:33" class="ju-code-link ju-function"><span class="ju-function">bitSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-number">256</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:28"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:28" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:28" class="ju-code-link ju-inductive"><span class="ju-inductive">Arithmetic</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:34"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:29"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:29" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:29" class="ju-code-link ju-constructor"><span class="ju-constructor">mkArithmetic</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:35" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">{{</span>fixedSize</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:36" class="ju-code-link ju-var"><span class="ju-var">add</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:37" class="ju-code-link ju-var"><span class="ju-var">sub</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:34" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:48"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:48" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:48" class="ju-code-link ju-function"><span class="ju-function">arithmeticNat</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:28" class="ju-code-link ju-inductive"><span class="ju-inductive">Arithmetic</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:29" class="ju-code-link ju-constructor"><span class="ju-constructor">mkArithmetic</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:54"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:54" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:54" class="ju-code-link ju-function"><span class="ju-function">add</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:52"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:52" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:52" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:53"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:53" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:53" class="ju-code-link ju-var"><span class="ju-var">y</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:52" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Trait/Natural-src.html#Juvix.Builtin.V1.Trait.Natural:8" class="ju-code-link ju-function"><span class="ju-function">+</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:53" class="ju-code-link ju-var"><span class="ju-var">y</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:55"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:55" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:55" class="ju-code-link ju-function"><span class="ju-function">sub</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:7" class="ju-code-link ju-function"><span class="ju-function">sub</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:49"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:49" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:49" class="ju-code-link ju-inductive"><span class="ju-inductive">Hash</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:56"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:56" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:56" class="ju-code-link ju-var"><span class="ju-var">H</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:50"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:50" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:50" class="ju-code-link ju-constructor"><span class="ju-constructor">mkHash</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:57" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">{{</span>fixedSize</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:6" class="ju-code-link ju-inductive"><span class="ju-inductive">FixedSize</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:56" class="ju-code-link ju-var"><span class="ju-var">H</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:58" class="ju-code-link ju-var"><span class="ju-var">hash</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:56" class="ju-code-link ju-var"><span class="ju-var">H</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.prelude:51"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:51" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:51" class="ju-code-link ju-axiom"><span class="ju-axiom">computeNatHash</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:66"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:66" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:66" class="ju-code-link ju-function"><span class="ju-function">hashNat</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:49" class="ju-code-link ju-inductive"><span class="ju-inductive">Hash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:50" class="ju-code-link ju-constructor"><span class="ju-constructor">mkHash</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:71"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:71" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:71" class="ju-code-link ju-function"><span class="ju-function">fixedSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:24" class="ju-code-link ju-function"><span class="ju-function">fixedSizeNat256</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:72"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:72" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:72" class="ju-code-link ju-function"><span class="ju-function">hash</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:51" class="ju-code-link ju-axiom"><span class="ju-axiom">computeNatHash</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">axiom</span> <span id="arch.system.state.resource_machine.prelude:67"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:67" class="ju-code-link ju-axiom"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:67" class="ju-code-link ju-axiom"><span class="ju-axiom">computeByteStringHash</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:192" class="ju-code-link ju-function"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/node/types/crypto-src.html#arch.node.types.crypto:18" class="ju-code-link ju-inductive"><span class="ju-inductive">Digest</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:68"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:68" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:68" class="ju-code-link ju-function"><span class="ju-function">hashByteString</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:49" class="ju-code-link ju-inductive"><span class="ju-inductive">Hash</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:192" class="ju-code-link ju-function"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:50" class="ju-code-link ju-constructor"><span class="ju-constructor">mkHash</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:73"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:73" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:73" class="ju-code-link ju-function"><span class="ju-function">fixedSize</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:25" class="ju-code-link ju-function"><span class="ju-function">fixedSizeByteString256</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:74"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:74" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:74" class="ju-code-link ju-function"><span class="ju-function">hash</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:67" class="ju-code-link ju-axiom"><span class="ju-axiom">computeByteStringHash</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:69"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:69" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:69" class="ju-code-link ju-inductive"><span class="ju-inductive">ISet</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:75"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:76"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:76" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:76" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:70"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:70" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:70" class="ju-code-link ju-constructor"><span class="ju-constructor">mkISet</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:77" class="ju-code-link ju-var"><span class="ju-var">newSet</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:78" class="ju-code-link ju-var"><span class="ju-var">size</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:79" class="ju-code-link ju-var"><span class="ju-var">insert</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:76" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:80" class="ju-code-link ju-var"><span class="ju-var">union</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:81" class="ju-code-link ju-var"><span class="ju-var">intersection</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:82" class="ju-code-link ju-var"><span class="ju-var">difference</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:83" class="ju-code-link ju-var"><span class="ju-var">contains</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:76" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:75" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Bool-src.html#Juvix.Builtin.V1.Bool:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Bool</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:113"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:113" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:113" class="ju-code-link ju-function"><span class="ju-function">iSetForStdSet</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:118" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:118" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:69" class="ju-code-link ju-inductive"><span class="ju-inductive">ISet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set-src.html#Stdlib.Data.Set:3" class="ju-code-link ju-var"><span class="ju-inductive"><span class="ju-delimiter">(</span>Set</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:118" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:118" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:70" class="ju-code-link ju-constructor"><span class="ju-constructor">mkISet</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:119"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:119" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:119" class="ju-code-link ju-function"><span class="ju-function">newSet</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Set<span class="ju-delimiter">.</span>empty</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:120"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:120" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:120" class="ju-code-link ju-function"><span class="ju-function">size</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:96" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>size</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:121"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:121" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:121" class="ju-code-link ju-function"><span class="ju-function">insert</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:86" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>insert</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:122"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:122" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:122" class="ju-code-link ju-function"><span class="ju-function">union</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:105" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>union</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:123"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:123" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:123" class="ju-code-link ju-function"><span class="ju-function">intersection</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:102" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>intersection</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:124"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:124" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:124" class="ju-code-link ju-function"><span class="ju-function">difference</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:103" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>difference</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:125"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:125" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:125" class="ju-code-link ju-function"><span class="ju-function">contains</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>isMember</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:114"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:114" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:114" class="ju-code-link ju-inductive"><span class="ju-inductive">IOrderedSet</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:126"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:126" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:126" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:127"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:127" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:127" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:115"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:115" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:115" class="ju-code-link ju-constructor"><span class="ju-constructor">mkIOrderedSet</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:128" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">{{</span>iset</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:69" class="ju-code-link ju-inductive"><span class="ju-inductive">ISet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:126" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:127" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:129" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-comment">-- Returns elements in order as a list</span>
    toList</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:126" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:127" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:130" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-comment">-- Creates from a list, preserving order of first occurrence</span>
    fromList</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:127" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:126" class="ju-code-link ju-var"><span class="ju-var">S</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:116"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:116" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:116" class="ju-code-link ju-inductive"><span class="ju-inductive">OrderedSet</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:131"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:131" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:131" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:117"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="ju-constructor">mkOrderedSet</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:132" class="ju-code-link ju-var"><span class="ju-var">elements</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set-src.html#Stdlib.Data.Set:3" class="ju-code-link ju-var"><span class="ju-inductive">Set</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:131" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:133" class="ju-code-link ju-var"><span class="ju-var">permutation</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-comment">-- List of indices</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.prelude:154"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:154" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:154" class="ju-code-link ju-function"><span class="ju-function">
setToListWithPerm</span></a></span></a></span></span>
  <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:162" class="ju-code-link ju-var"><span class="ju-var">indices</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:163" class="ju-code-link ju-var"><span class="ju-var">elements</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set-src.html#Stdlib.Data.Set:3" class="ju-code-link ju-var"><span class="ju-inductive">Set<span class="ju-delimiter">.</span>Set</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">let</span>
    <span id="arch.system.state.resource_machine.prelude:165"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:165" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:165" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- First convert set to sorted list</span>
    sorted</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:101" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>toList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:163" class="ju-code-link ju-var"><span class="ju-var">elements</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:164"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:164" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:164" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Then map each index to the element at that position</span>
    access</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:166" class="ju-code-link ju-var"><span class="ju-var">index</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:161" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">case</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:14" class="ju-code-link ju-function"><span class="ju-function">splitAt</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:166" class="ju-code-link ju-var"><span class="ju-var">index</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:165" class="ju-code-link ju-function"><span class="ju-function">sorted</span></a></span> <span class="ju-keyword">of</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor">mkPair</span></a></span> <span class="ju-keyword">_</span> <span id="arch.system.state.resource_machine.prelude:167"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:167" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:167" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">(</span>x</span></a></span></a></span></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:3" class="ju-code-link ju-constructor"><span class="ju-constructor">::</span></a></span> <span class="ju-keyword">_</span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:338" class="ju-code-link ju-var"><span class="ju-constructor">some</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:167" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:209" class="ju-code-link ju-var"><span class="ju-constructor">mkPair</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:339" class="ju-code-link ju-var"><span class="ju-constructor">none</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:370" class="ju-code-link ju-function"><span class="ju-function">catOptions</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Functor/Polymorphic-src.html#Stdlib.Trait.Functor.Polymorphic:9" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>map</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:164" class="ju-code-link ju-function"><span class="ju-function">access</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:162" class="ju-code-link ju-var"><span class="ju-var">indices</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.prelude:155"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function">
orderedSetToList</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:168" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:168" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:169" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:116" class="ju-code-link ju-inductive"><span class="ju-inductive">OrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:168" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:168" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:154" class="ju-code-link ju-function"><span class="ju-function">setToListWithPerm</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:148" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>permutation</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:169" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:169" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.prelude:156"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:156" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:156" class="ju-code-link ju-function"><span class="ju-function">
findPosition</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:171" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:172" class="ju-code-link ju-var"><span class="ju-var">elements</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set-src.html#Stdlib.Data.Set:3" class="ju-code-link ju-var"><span class="ju-inductive">Set<span class="ju-delimiter">.</span>Set</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">let</span>
    <span id="arch.system.state.resource_machine.prelude:174"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:174" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:174" class="ju-code-link ju-function"><span class="ju-function">sorted</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:101" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>toList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:172" class="ju-code-link ju-var"><span class="ju-var">elements</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:173"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:173" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:173" class="ju-code-link ju-function"><span class="ju-function">go</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:170" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Nat</span></a></span>
      <span class="ju-keyword">|</span> <span class="ju-delimiter">[</span><span class="ju-delimiter">]</span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span>
      <span class="ju-keyword">|</span> <span id="arch.system.state.resource_machine.prelude:175"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:175" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:175" class="ju-code-link ju-var"><span class="ju-var"><span class="ju-delimiter">(</span>y</span></a></span></a></span></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:3" class="ju-code-link ju-constructor"><span class="ju-constructor">::</span></a></span> <span id="arch.system.state.resource_machine.prelude:176"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:176" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:176" class="ju-code-link ju-var"><span class="ju-var">ys</span></a></span></a></span></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
        <span class="ju-keyword">if</span> 
          <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:171" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:10" class="ju-code-link ju-function"><span class="ju-function">&lt;=</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:175" class="ju-code-link ju-var"><span class="ju-var">y</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span>
          <span class="ju-keyword">|</span> <span class="ju-keyword">else</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/Nat/Base-src.html#Juvix.Builtin.V1.Nat.Base:3" class="ju-code-link ju-constructor"><span class="ju-constructor">suc</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:173" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>go</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:176" class="ju-code-link ju-var"><span class="ju-var">ys</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:173" class="ju-code-link ju-function"><span class="ju-function">go</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:174" class="ju-code-link ju-function"><span class="ju-function">sorted</span></a></span><span class="ju-delimiter">;</span>
<span id="arch.system.state.resource_machine.prelude:157"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="ju-function">
orderedSetFromList</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:177" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:177" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:177" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:116" class="ju-code-link ju-inductive"><span class="ju-inductive">OrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:177" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Foldable/Monomorphic-src.html#Stdlib.Trait.Foldable.Monomorphic:23" class="ju-code-link ju-function"><span class="ju-function">foldl</span></a></span>
    <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:178"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:179"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:179" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:179" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">if</span> 
        <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>isMember</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:179" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">else</span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">let</span>
            <span id="arch.system.state.resource_machine.prelude:180"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:180" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:180" class="ju-code-link ju-function"><span class="ju-function">pos</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:156" class="ju-code-link ju-function"><span class="ju-function">findPosition</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:179" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
          <span class="ju-keyword">in</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="ju-constructor">mkOrderedSet</span></a></span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:86" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>Set<span class="ju-delimiter">.</span>insert</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:179" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:148" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>permutation</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:178" class="ju-code-link ju-var"><span class="ju-var">acc</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:17" class="ju-code-link ju-function"><span class="ju-function">++</span></a></span> <span class="ju-delimiter">[</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:180" class="ju-code-link ju-function"><span class="ju-function">pos</span></a></span><span class="ju-delimiter">]</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="ju-constructor"><span class="ju-delimiter">(</span>mkOrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Set<span class="ju-delimiter">.</span>empty</span></a></span> <span class="ju-delimiter">[</span><span class="ju-delimiter">]</span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:158"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:158" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:158" class="ju-code-link ju-function"><span class="ju-function">orderedSetInstance</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:181" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:181" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:114" class="ju-code-link ju-inductive"><span class="ju-inductive">IOrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:116" class="ju-code-link ju-inductive"><span class="ju-inductive"><span class="ju-delimiter">(</span>OrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:181" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:181" class="ju-code-link ju-var"><span class="ju-var">A</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:115" class="ju-code-link ju-constructor"><span class="ju-constructor">mkIOrderedSet</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:202"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:202" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:202" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- ISet instance</span>
    iset</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:70" class="ju-code-link ju-constructor"><span class="ju-constructor">mkISet</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
        <span id="arch.system.state.resource_machine.prelude:182"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:182" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:182" class="ju-code-link ju-function"><span class="ju-function">newSet</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="ju-constructor">mkOrderedSet</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:2" class="ju-code-link ju-constructor"><span class="ju-constructor">Set<span class="ju-delimiter">.</span>empty</span></a></span> <span class="ju-delimiter">[</span><span class="ju-delimiter">]</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:184"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:184" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:184" class="ju-code-link ju-function"><span class="ju-function">size</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:183"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:183" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:183" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:96" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>size</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:183" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:187"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:187" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:187" class="ju-code-link ju-function"><span class="ju-function">insert</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:185"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:185" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:185" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:186"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="ju-keyword">if</span> 
              <span class="ju-keyword">|</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>isMember</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:185" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span>
              <span class="ju-keyword">|</span> <span class="ju-keyword">else</span> <span class="ju-keyword">:=</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:117" class="ju-code-link ju-constructor"><span class="ju-constructor">mkOrderedSet</span></a></span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:86" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>Set<span class="ju-delimiter">.</span>insert</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:185" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
                  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:148" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>permutation</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span>
                    <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:17" class="ju-code-link ju-function"><span class="ju-function">++</span></a></span> <span class="ju-delimiter">[</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:96" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>size</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:186" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">]</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:190"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:190" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:190" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-comment">-- Union</span>
        union</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:188"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:188" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:188" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:189"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:189" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:189" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="ju-function">orderedSetFromList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>orderedSetToList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:188" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:17" class="ju-code-link ju-function"><span class="ju-function">++</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function">orderedSetToList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:189" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:194"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:194" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:194" class="ju-code-link ju-function"><span class="ju-function">
        <span class="ju-comment">-- Intersection</span>
        intersection</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:191"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:191" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:191" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:192"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:192" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:192" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="ju-function">orderedSetFromList</span></a></span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:8" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>filter</span></a></span>
                <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:193"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:193" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:193" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>isMember</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:193" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:192" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>orderedSetToList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:191" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:198"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:198" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:198" class="ju-code-link ju-function"><span class="ju-function">
        <span class="ju-comment">-- Difference</span>
        difference</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
          <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:195"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:195" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:195" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:196"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:196" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:196" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
            <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="ju-function">orderedSetFromList</span></a></span>
              <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/List/Base-src.html#Stdlib.Data.List.Base:8" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>filter</span></a></span>
                <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:197"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:197" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:197" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Bool/Base-src.html#Stdlib.Data.Bool.Base:1" class="ju-code-link ju-function"><span class="ju-function">not</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>Set<span class="ju-delimiter">.</span>isMember</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:197" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:196" class="ju-code-link ju-var"><span class="ju-var">s2</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span>
                <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>orderedSetToList</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:195" class="ju-code-link ju-var"><span class="ju-var">s1</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
        <span id="arch.system.state.resource_machine.prelude:201"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:201" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:201" class="ju-code-link ju-function"><span class="ju-function">
        <span class="ju-comment">-- Contains</span>
        contains</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:199"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:199" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:199" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:200"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:200" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:200" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Set/AVL-src.html#Stdlib.Data.Set.AVL:84" class="ju-code-link ju-function"><span class="ju-function">Set<span class="ju-delimiter">.</span>isMember</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:199" class="ju-code-link ju-var"><span class="ju-var">x</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:147" class="ju-code-link ju-function"><span class="ju-function"><span class="ju-delimiter">(</span>OrderedSet<span class="ju-delimiter">.</span>elements</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:200" class="ju-code-link ju-var"><span class="ju-var">s</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
      <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:203"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:203" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:203" class="ju-code-link ju-function"><span class="ju-function">
    <span class="ju-comment">-- toList</span>
    toList</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:155" class="ju-code-link ju-function"><span class="ju-function">orderedSetToList</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:204"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:204" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:204" class="ju-code-link ju-function"><span class="ju-function">
    <span class="ju-comment">-- fromList</span>
    fromList</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:157" class="ju-code-link ju-function"><span class="ju-function">orderedSetFromList</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">trait</span>
<span class="ju-keyword">type</span> <span id="arch.system.state.resource_machine.prelude:159"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:159" class="ju-code-link ju-inductive"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:159" class="ju-code-link ju-inductive"><span class="ju-inductive">IMap</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:205"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:206"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:207"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:207" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:207" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
  <span id="arch.system.state.resource_machine.prelude:160"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:160" class="ju-code-link ju-constructor"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:160" class="ju-code-link ju-constructor"><span class="ju-constructor">mkIMap</span></a></span></a></span></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:208" class="ju-code-link ju-var"><span class="ju-var">emptyMap</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:209" class="ju-code-link ju-var"><span class="ju-var">insert</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:207" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:210" class="ju-code-link ju-var"><span class="ju-var">lookup</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/prelude-src.html#prelude:337" class="ju-code-link ju-var"><span class="ju-inductive">Option</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:207" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:211" class="ju-code-link ju-var"><span class="ju-var">delete</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:212" class="ju-code-link ju-var"><span class="ju-var">keys</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:206" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:213" class="ju-code-link ju-var"><span class="ju-var">values</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:205" class="ju-code-link ju-var"><span class="ju-var">M</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Juvix/Builtin/V1/List-src.html#Juvix.Builtin.V1.List:1" class="ju-code-link ju-inductive"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:207" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">instance</span>
<span id="arch.system.state.resource_machine.prelude:245"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:245" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:245" class="ju-code-link ju-function"><span class="ju-function">iMapForStdMap</span></a></span></a></span></span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:246" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span><span class="ju-delimiter">}</span> <span class="ju-delimiter">{{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Trait/Ord-src.html#Stdlib.Trait.Ord:1" class="ju-code-link ju-inductive"><span class="ju-inductive">Ord</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:246" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">{</span><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:247" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span> <span class="ju-keyword">:</span> <span class="ju-keyword">Type</span><span class="ju-delimiter">}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:159" class="ju-code-link ju-inductive"><span class="ju-inductive">IMap</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:20" class="ju-code-link ju-inductive"><span class="ju-inductive"><span class="ju-delimiter">(</span>Map</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:246" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:247" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:246" class="ju-code-link ju-var"><span class="ju-var">K</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:247" class="ju-code-link ju-var"><span class="ju-var">V</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:160" class="ju-code-link ju-constructor"><span class="ju-constructor">mkIMap</span></a></span><span class="ju-keyword">@</span><span class="ju-delimiter">{</span>
    <span id="arch.system.state.resource_machine.prelude:248"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:248" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:248" class="ju-code-link ju-function"><span class="ju-function">emptyMap</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:39" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>empty</span></a></span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:252"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:252" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:252" class="ju-code-link ju-function"><span class="ju-function">insert</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:249"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:249" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:249" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:250"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:250" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:250" class="ju-code-link ju-var"><span class="ju-var">v</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:251"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:251" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:251" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:41" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>insert</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:249" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:250" class="ju-code-link ju-var"><span class="ju-var">v</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:251" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:255"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:255" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:255" class="ju-code-link ju-function"><span class="ju-function">lookup</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:253"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:253" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:253" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:254"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:254" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:254" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:42" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>lookup</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:253" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:254" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:258"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:258" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:258" class="ju-code-link ju-function"><span class="ju-function">delete</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:256"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:256" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:256" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span></a></span></span> <span id="arch.system.state.resource_machine.prelude:257"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:257" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:257" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:53" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>delete</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:256" class="ju-code-link ju-var"><span class="ju-var">k</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:257" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:260"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:260" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:260" class="ju-code-link ju-function"><span class="ju-function">keys</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:259"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:259" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:259" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:54" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>keys</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:259" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
    <span id="arch.system.state.resource_machine.prelude:262"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:262" class="ju-code-link ju-function"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:262" class="ju-code-link ju-function"><span class="ju-function">values</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">\</span><span class="ju-delimiter">{</span><span id="arch.system.state.resource_machine.prelude:261"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:261" class="ju-code-link ju-var"><span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:261" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span></a></span></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="https://specs.anoma.net/pr-289/Stdlib/Data/Map-src.html#Stdlib.Data.Map:55" class="ju-code-link ju-function"><span class="ju-function">Map<span class="ju-delimiter">.</span>values</span></a></span> <span class="annot"><a href="https://specs.anoma.net/pr-289/arch/system/state/resource_machine/prelude-src.html#arch.system.state.resource_machine.prelude:261" class="ju-code-link ju-var"><span class="ju-var">m</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
</pre><footer><pre>Powered by <a href="https://juvix.org">Juvix </a><a href="https://github.com/anoma/juvix/commit/b954100">0.6.9-b954100</a></pre></footer><footer><pre>Last modified on 2025-02-20 18:05 UTC</pre></footer></html>