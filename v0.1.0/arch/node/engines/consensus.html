
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network.">
      
      
        <meta name="author" content="Anoma Foundation">
      
      
        <link rel="canonical" href="https://anoma.github.io/nspec/v2/arch/node/engines/consensus.html">
      
      
      
      
      <link rel="icon" href="../../../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>Consensus (Old) - Anoma Specification</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../assets/css/style.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix-highlighting.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix_codeblock_footer.css">
    
      <link rel="stylesheet" href="../../../assets/css/juvix_codeblock_footer.css">
    
      <link rel="stylesheet" href="../../../assets/css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Consensus (Old) - Anoma Specification" >
      
        <meta  property="og:description"  content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network." >
      
        <meta  property="og:image"  content="https://anoma.github.io/nspec/v2/assets/images/social/arch/node/engines/consensus.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://anoma.github.io/nspec/v2/arch/node/engines/consensus.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Consensus (Old) - Anoma Specification" >
      
        <meta  name="twitter:description"  content="The Anoma Specification is a collection of documents that describe the architecture, design, and implementation of the Anoma Network." >
      
        <meta  name="twitter:image"  content="https://anoma.github.io/nspec/v2/assets/images/social/arch/node/engines/consensus.png" >
      
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#consensus-old" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  For updates follow <strong>@anoma</strong> on
  <a rel="me" href="https://x.com/anoma">
    <span class="twemoji x-twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </span>
    <strong></strong>
  </a>
  and discuss on our
  <a href="https://research.anoma.net">
    <span class="twemoji discourse">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </span>
    <strong>forum</strong>
  </a>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest official version.
  <a href="../../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
        
  
    
  
  <header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Header">
      <a href="../../../index.html" title="Anoma Specification" class="md-header__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
        
  <img src="../../../assets/logo.svg" alt="logo">

      </a>
      <label class="md-header__button md-icon" for="__drawer">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <div class="md-header__topic">
            <span class="md-ellipsis">
                
                <span class="first-letter">A</span>noma 
              
                <span class="first-letter">S</span>pecification
              
              
                <span class="md-header__topic-version">v0.1.0</span>
              
            </span>
          </div>
          <div class="md-header__topic" data-md-component="header-topic">
            <span class="md-ellipsis">
              
                Consensus (Old)
              
            </span>
          </div>
        </div>
      </div>
      
        
          <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
        
      
      
        <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
      
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
      
    </nav>
    
      
        <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-grid">
    <ul class="md-tabs__list">
      
      
            
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

        
      
      
            
  
  
  
    <li class="md-tabs__item">
      <a href="../../../changelog.html" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../scope/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm10.78 2H19v12.18c-.26-.8-1.31-1.39-2.2-1.39h-1v-3a1 1 0 0 0-1-1h-6v-2h2a1 1 0 0 0 1-1v-2h2c1.03 0 1.87-.79 1.98-1.79M5 10.29l4.8 4.5v1a2 2 0 0 0 2 2V19H5z"/></svg>
    
  
  Scope

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../basic_abstractions/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
    
  
  Basic Abstractions

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 18.714v4.8c0 .288-.192.48-.48.48h-4.8c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92h-8.16v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H9.6c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92H3.36v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H.48c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48H2.4v-2.4c0-.288.192-.48.48-.48h8.64v-1.44h.96v1.44h8.64c.288 0 .48.192.48.48v2.4h1.92c.288 0 .48.192.48.48m-13.92 4.32h3.84v-3.84h-3.84zm-9.12 0H4.8v-3.84H.96Zm18.24 0h3.84v-3.84H19.2ZM6.24 9.642V3.546c0-.192.096-.336.24-.432L11.76.042a.8.8 0 0 1 .48 0l5.28 3.072c.144.096.24.24.24.432v6.096c0 .144-.096.288-.24.384l-5.28 3.072q-.096.048-.24.048t-.24-.048l-5.28-3.072c-.144-.096-.24-.24-.24-.384m10.56-.288V4.362l-4.32 2.496v4.992zm-9.6 0 4.32 2.496V6.858L7.2 4.362Zm.48-5.808L12 5.994l4.32-2.448L12 1.05Z"/></svg>
    
  
  Protocol Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../application_architecture/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 20h4v-4h-4m0-2h4v-4h-4m-6-2h4V4h-4m6 4h4V4h-4m-6 10h4v-4h-4m-6 4h4v-4H4m0 10h4v-4H4m6 4h4v-4h-4M4 8h4V4H4z"/></svg>
    
  
  Application Architecture

        </a>
      </li>
    
  

        
      
      
            
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../implementation/index.html" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.793 16.575c0 3.752-2.927 7.426-7.743 7.426-5.249 0-7.843-3.71-7.843-8.29 0-5.21 3.892-12.952 8-15.647a.397.397 0 0 1 .61.371 9.72 9.72 0 0 0 1.694 6.518c.522.795 1.092 1.478 1.763 2.352.94 1.227 1.637 1.906 2.644 3.842l.015.028a7.1 7.1 0 0 1 .86 3.4"/></svg>
    
  
  Implementation

        </a>
      </li>
    
  

        
      
      
      
      
      
      
      
    </ul>
  </div>
</nav>
      
    
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Anoma Specification" class="md-nav__button md-logo" aria-label="Anoma Specification" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    Anoma Specification
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../scope/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Scope
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../basic_abstractions/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Basic Abstractions
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Protocol Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../application_architecture/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Application Architecture
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../implementation/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Implementation
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../indexes/links.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
  
  <span class="md-ellipsis">
    Quick links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../prelude.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Juvix modules
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../tutorial/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Tutorials for contributors
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="consensus-old">Consensus (Old)<a class="headerlink" href="#consensus-old" title="Permanent link">&para;</a></h1>
<ul>
<li><em>Inputs</em>
    Consensus requests, consensus messages</li>
<li><em>Outputs</em>
    Consensus messages, consensus outputs (finalized)</li>
<li><em>Preferences</em>
    Whether to run a particular consensus round</li>
<li><em>Accounting</em>
    Consensi actually performed</li>
</ul>
<hr />
<h1 id="heterogeneous-paxos">Heterogeneous Paxos<a class="headerlink" href="#heterogeneous-paxos" title="Permanent link">&para;</a></h1>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>This specification intends to describe how Heterogeneous Paxos can be realized in the blockchain context. Given well-defined quorums, the protocol allows a known set <span class="arithmatex">\(S\)</span>  <span class="arithmatex">\((|S|\geq1)\)</span> of chains to construct and carry out atomic transactions on a so-called <em>chimera chain</em>, subject to certain conditions.  The chimera chain guarantees safety and liveness subject to the usual assumption: at most a third of the stake belongs to Byzantine participants.</p>
<p>The protocol involves three kinds of agents: proposers, acceptors and learners. A node may play the role of any combination of the three kinds of agents.</p>
<p>Blocks are agreed upon in rounds.</p>
<p><strong>Proposer</strong> initiates a round by a proposing a block. Each block contains atomic batches of transactions (or even a single transaction). An atomic batch of transactions means that either all transactions in the batch are executed or none of them are executed.</p>
<p><strong>Acceptors</strong> are agents who agree on the proposed blocks and an agent may be acceptor for more than one chain. No correct acceptor acts on any invalid block. This requires checking the validation of blocks or state transition function.</p>
<p><strong>Learners</strong> are set of agents where this set is interested in a particular (combination of?) chain(s) meaning what the voting process decides for these chain(s). The definition of learners is based on the quorums and defined by the protocol, meaning that agents are not free to choose their own quorum setups. <!--For example, there might be three well-defined learners <span class="arithmatex">\(l_x\)</span> and <span class="arithmatex">\(l_y\)</span>, and <span class="arithmatex">\(l_xy\)</span> which are agents who are interetsted in chain <span class="arithmatex">\(x\)</span> alone, chain <span class="arithmatex">\(y\)</span> alone, and both chain <span class="arithmatex">\(x\)</span> chain <span class="arithmatex">\(y\)</span>.--> Acceptors need to be aware of the different definitions of learners in order to be able to know what correct behaviour is defined as. This set of the agents for learners, might empty or have overlaps, the acceptors have to follow the definition regardless. <!--Acceptor of chain are considered also part of learners of that chain.--></p>
<p>We briefly describe how the communication for a consensus round works. Suppose we have two learners <span class="arithmatex">\(l_x\)</span> and <span class="arithmatex">\(l_y\)</span> which refer to agents that are interested in blockchain <span class="arithmatex">\(x\)</span> and blockchain <span class="arithmatex">\(y\)</span>. Proposers propose a chimera block, by sending <span class="arithmatex">\(1a\)</span> messages, each carrying a value and unique ballot number (round identifier), to acceptors. All acceptors in all involved chains (<span class="arithmatex">\(S\)</span>) send <span class="arithmatex">\(1b\)</span> messages to each other to communicate that they’ve received a <span class="arithmatex">\(1a\)</span> message. When an acceptor receives a <span class="arithmatex">\(1b\)</span> message for the highest ballot number it has seen from a learner <span class="arithmatex">\(l_x\)</span>’s quorum of acceptors, it sends a <span class="arithmatex">\(2a\)</span> message labelled with <span class="arithmatex">\(l_x\)</span> and that ballot number. There is one exception: once a safe acceptor sends a <span class="arithmatex">\(2a\)</span> message <span class="arithmatex">\(m\)</span> for a learner <span class="arithmatex">\(l_x\)</span>, it never sends a <span class="arithmatex">\(2a\)</span> message with a different value for a learner <span class="arithmatex">\(l_y\)</span>, unless one of the following is true:</p>
<ul>
<li>It knows that a quorum of acceptors has seen <span class="arithmatex">\(2a\)</span> messages with learner <span class="arithmatex">\(l_x\)</span> and ballot number higher than <span class="arithmatex">\(m\)</span>.</li>
</ul>
<ul>
<li>It has seen Byzantine behaviour that proves <span class="arithmatex">\(l_x\)</span> and <span class="arithmatex">\(l_y\)</span> do not have to agree.</li>
</ul>
<p>A learner <span class="arithmatex">\(l_x\)</span> decides on a block when it receives <span class="arithmatex">\(2a\)</span> messages with the same proposed block and ballot number from one of its quorums of acceptors.</p>
<h2 id="preliminaries">Preliminaries<a class="headerlink" href="#preliminaries" title="Permanent link">&para;</a></h2>
<ul>
<li><em>Base chains</em> are two or more independent chains between which we would like to carry out atomic transactions. The chains must protocol-wise adhere to some  specific set of requirements to be compatible. For example, IBC support.</li>
</ul>
<!-- These chains are programmed with chimera chains in mind: for example, they may all be Anoma chains. -->

<ul>
<li>A <em>chimera chain</em> is a chain that allows atomic transactions to be carried out on <a href="https://en.wikipedia.org/wiki/Object_(computer_science)">objects</a> from the base chains. It carries an additional consensus mechanism, that is dependent on the consensus of the base chains.</li>
</ul>
<ul>
<li>A <em>learner</em> is a client that is interested in the value decided by the voting process. Learners might be full nodes, light client nodes, or nodes from other chains.</li>
</ul>
<ul>
<li>An <em>acceptor</em> is an agent participating in the voting process of the consensus protocol. Non-byzantine acceptors are called <em>real</em> acceptors.</li>
</ul>
<!--We denote a set of acceptors by `Acceptor`.-->

<ul>
<li>A <em>quorum</em> is a subset of acceptors sufficient to make a learner decide on a value. For a learner to maintain consistency (avoid deciding on two contradictory values), any two of its quorums must have a common real acceptor. Most chains achieve this practically by making the intersection of the quorums big enough, i.e. the acceptors in the intersection being backed by more than &gt;1/3 stake of each chain under &lt;1/3 Byzantine assumption. For example, suppose:
    - Base chain A has a total stake of <span class="arithmatex">\(60 Astake\)</span>.
    - Base chain B has a total stake of <span class="arithmatex">\(300Bstake\)</span>.
    - Any set of acceptors backed by <span class="arithmatex">\(&gt;40Astake\)</span> is a quorum of chain A. This means <span class="arithmatex">\(&gt;20 Astake\)</span> would have to back unsafe acceptors for chain A to fork.
    - Any set of acceptors backed by <span class="arithmatex">\(&gt;200Bstake\)</span> is a quorum of chain B. This means <span class="arithmatex">\(&gt;100Bstake\)</span> woudl have to back unsafe acceptors for chain B to fork.
    - Suppose that, for every quorum <span class="arithmatex">\(q_a\)</span> of chain A, and every quorum <span class="arithmatex">\(q_b\)</span> of chain B, the acceptors in <span class="arithmatex">\(q_a\cap q_b\)</span> are backed by <span class="arithmatex">\(&gt;10Astake\)</span>, and <span class="arithmatex">\(&gt;50 Bstake\)</span>. This would mean that, in order for atomic batches on the chimera chain to lose atomicity, <span class="arithmatex">\(&gt;10Astake\)</span> and <span class="arithmatex">\(&gt;50Bstake\)</span> would have to back unsafe acceptors.
        - When a batch loses atomicity, the transactions on one state machine (say, A) are executed, but not the transactions on the other state machine (say, B). However, each state machine itself remains consistent: neither A nor B forks.
        - This means some chimera chains offer atomicity with lower (yet well-defined) levels of integrity than their base chains' no-fork guarantees.</li>
</ul>
<ul>
<li>A <em>proposer</em> is an acceptor that may propose a new block according to the rules of the blockchain. For Typhon, the "blocks" of the consensus protocol are the headers produced by the <a href="mempool.html#mempool">mempool</a>. A potential proposer would need (a) data availability, (b) the ability to sign messages, ( c) something at stake (to prevent spam) and (d) the ability to communicate with the acceptors. Acceptors that are in the overlaps of quorums may especially well suited to be proposers, but other Acceptors (or even other machines) might be proposers as well.
The Heterogeneous Paxos technical report effectively uses weighted voting for select proposer, but perhaps there are interesting tricks with VRFs that would improve efficiency.</li>
</ul>
<h3 id="assumptions">Assumptions<a class="headerlink" href="#assumptions" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Acceptors are staked</strong>:  An acceptor has a certain amount of stake backing them. This stake is either fully their own stake or is partly delegated to them by other token holders.</li>
<li><strong>Quorums are known</strong>: Quorums are defined implicitly by the internal logic of each chain. For most proof-of-stake chains, a quorum is a subset of acceptor that have <span class="arithmatex">\(&gt;\frac23\)</span> of stake backing them.</li>
<li><strong>Large Overlap of Quorums</strong>: A practical way to ensure a safe acceptors in the overlap between quorums. To guarantee atomicity with the same integrity as base chains, each quorum overlap must be backed by <span class="arithmatex">\(&gt;\frac13\)</span> of the stake of each base chain.</li>
<li><strong>Connectivity</strong>: All acceptors in a chimera chain communicate with each other (even if that means talking to acceptors who are not on the same base chain). This communication <em>can</em> be indirect (i.e. gossiping through other acceptors), so long as all pairs of honest acceptors can always communicate.</li>
<li><strong>Only one learner per main chain</strong>: We model the learner graph as one learner per main chain, and then full nodes can instantiate their base chain's learner to make decisions. The reason is that in Heterogeneous Paxos the learner graph is a closed graph with known nodes, while in the blockchain context we have a open network where we don't know who all the learners are.</li>
</ol>
<!--
Formally,
$$
\forall q_1, q_2 : Quorum. \exists a : Acceptor. a \in q_1 \land a \in q_2 \land real(a)
$$
-->
<h2 id="chimera-chain">Chimera Chain<a class="headerlink" href="#chimera-chain" title="Permanent link">&para;</a></h2>
<p>In this section we describe how chimera chains operate.</p>
<p>Upon wanting to include an atomic batch of transactions from the transaction pool into a block, a block proposer either creates a genesis block if there is no existing chimera chain or builds on top of an existing chimera chain.</p>
<h3 id="genesis-block">Genesis block<a class="headerlink" href="#genesis-block" title="Permanent link">&para;</a></h3>
<p>In order to be safe, the guarantee we want here is that future quorum updates on the main chains are guaranteed to be received before voting happens on chimera chains.</p>
<ol>
<li>Create a genesis block that claims to be a "chimera chain" and allocate some unique name or index.</li>
<li>Register (in a transaction) that genesis block on all base chains and allocate it some unique name, so they know to involve it in any future quorum updates. The guarantee we want here is that future quorum updates are guaranteed to be received before votes happen.</li>
<li>The first block append on the chimera chain requires IBC messages from all base chains explaining that they have registered this genesis block.</li>
</ol>
<h3 id="producing-blocks">Producing Blocks<a class="headerlink" href="#producing-blocks" title="Permanent link">&para;</a></h3>
<p>The block consists of transactions from both chains or just on of the chains. The transaction can be bundled together to make sure they are carried out atomically.</p>
<p>It is possible that more than one block may be finalized like in Grandpa (from Polkadot project) decoupling block prduction from finalization. In thi scase, Heterogeneous Paxos would serve the roll of a "finality gadget" in Grandpa's terms, but blocks could be produced at any rate.</p>
<h4 id="moving-objects">Moving Objects<a class="headerlink" href="#moving-objects" title="Permanent link">&para;</a></h4>
<!--A higher-level programming concept that might be more useful.-->

<p>Suppose state in each state machine is expressed in terms of objects (think object-oriented programming) with state and methods, and a location (each is located on a chain).  Our ideas about "movable objects" should be applicable to any program entities which feature:
* a unique identifier
* a permanent set of public methods (an API) callable by users, or other methods on other objects in the same state machine, which can compute and return values
* a set of private methods callable only by other methods on this object
* mutable state (which only methods can mutate)</p>
<p>These are much like "smart contracts," which also carry internal mutable state and public APIs much like methods. An example of an "object" is any sort of account: multisignature account or single user account:
* accounts usually have a unique identifier
* public methods include "send money," which takes as input some signed authorization and deducts money from the account.
* mutable state includes some value representing the amount of money in the account.</p>
<p>One might want to move an object to another state machine. For simplicity, let's suppose it's a state machine with the same quorums (on a different, possibly chimera, chain). This is not so very different from various chains trying to get a lock on an account (objects) and then perform atomic operations on them.</p>
<p>This "move" operation should require an IBC send, and then deleting the original object. Or instead of deleting the original object the original object can be made a <em>pointer</em> to the object which now lives primarily on the destination chain. On the destination state machine, an IBC receive should be followed by creating a new copy of the object. Any "object identifiers" found in pointers from other objects will have to be preserved, which could be tricky.</p>
<!--
To implement moving objects in practice, the object can be locked on original chain upon being moved and only unlocked once it is moved back, when it can be updated. -->

<h5 id="permissions-for-moving-objects">Permissions for moving Objects<a class="headerlink" href="#permissions-for-moving-objects" title="Permanent link">&para;</a></h5>
<p>We have to consider who is allowed to move which objects where. One way to do this is to have "move" simply be a "private method" of any object: the programmer has to specifically program in any methods that the transactions or other objects can call to move the object. The most straightforward private method definition would allow anyone (e.g.,owners) who can control the object be able to give permission for moving. <!--While they can also define the private method to give this permission to any other object they control (e.g., smart contract). --></p>
<p>We may want to allow chains to specify limits on what objects can move onto that chain. For example, they may require that objects have a method that can move them back to a base chain.</p>
<!--This could get messy fast.-->

<!--Another possibility is to have each object specify its required safety and liveness properties, and then check with each move that these are preserved. This too could get messy. We may end up doing Information Flow Control.-->

<h2 id="epoch-change">Epoch Change<a class="headerlink" href="#epoch-change" title="Permanent link">&para;</a></h2>
<!--What happens when a main chain updates its quorums (moves to a new epoch)?

How is updating done?-->

<p>If new quorums for each base chain do not overlap on a real acceptor, atomicity cannot be guaranteed. We can no longer meaningfully commit atomic batches to the chimera chain. However, extensions to the chimera chain are consistent from the point of view of each base chain (but different base chains may "perceive" different extensions). This allows us to, for example, move objects to base chains even after the chimera chain loses atomic guarantees.</p>
<h2 id="kill-chains">Kill Chains<a class="headerlink" href="#kill-chains" title="Permanent link">&para;</a></h2>
<p>Likewise, it's probably useful to kill chimera chains no one is using anymore. If we don't kill them, when quorums change all of chimera chains need to get an update, and that can become infeasible. One possibility is to allow chains with no objects on them (everything has moved out) to execute a special "kill" transaction that prohibits any future transactions, and sends an IBC message to all parent chains. On receipt, parent chains could remove that chimera chain from their registry.</p>
<h2 id="protocol-description">Protocol Description<a class="headerlink" href="#protocol-description" title="Permanent link">&para;</a></h2>
<p>This section describes how a chimera block is appended to the existing chimera chain assuming all the setup has taken place.</p>
<p>For simplicity, this protocol is written as if we're deciding on one thing: the specific block that belongs on a specific blockchain at a specific height. All state and references are specific to this blockchain / height pair. We do not care about messages before this height. This height may be defined using the last finalized block in the blockchain.</p>
<h3 id="learner-graph">Learner Graph<a class="headerlink" href="#learner-graph" title="Permanent link">&para;</a></h3>
<p>For each learner <span class="arithmatex">\(\red{a}\)</span>, we call its set of quorums <span class="arithmatex">\(\red{Q_a}\)</span>.</p>
<p>For each pair of learners <span class="arithmatex">\(\red{a}\)</span> and <span class="arithmatex">\(\blue{b}\)</span>, there are a specific set of conditions under which they require agreement. We enumerate these as <span class="arithmatex">\(\edge{\red{a}}{\blue{b}}\)</span>, a set of "safe sets" of acceptors: whenever at least one set in <span class="arithmatex">\(\edge{\red{a}}{\blue{b}}\)</span> is composed entirely of safe (non-byzantine, but possibly crashed) acceptors, <span class="arithmatex">\(\red{a}\)</span> and <span class="arithmatex">\(\blue{b}\)</span> must not decide different things.</p>
<p>We designate the set of acceptors who are actually safe <span class="arithmatex">\(\reallysafe\)</span>. This is of course determined at runtime, and unknown to anyone.</p>
<h3 id="messages">Messages<a class="headerlink" href="#messages" title="Permanent link">&para;</a></h3>
<p>The protocol is carried out by sending and receiving messsages. The table below describes the structure of a typical heteregenous paxos message.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>chainId</td>
<td><code>Id</code></td>
<td>Identifies this Chimera Chain</td>
</tr>
<tr>
<td>height</td>
<td><code>uint64</code></td>
<td>Current height of the chimera chain</td>
</tr>
<tr>
<td>pktType</td>
<td><code>enum PktType {1A, 1B, 2A}</code></td>
<td></td>
</tr>
<tr>
<td>ballot</td>
<td><code>Ballot</code> = <code>(Timestamp, Hash)</code></td>
<td>This consists of the hash of the proposed block and the timestamp of the initiated ballot. There is a total lexicographical order on <code>Ballot</code>.</td>
</tr>
<tr>
<td>learner</td>
<td><code>Id</code></td>
<td></td>
</tr>
<tr>
<td>sig</td>
<td><code>Sig</code></td>
<td>The signature field <code>sig</code> unforgeably identifying its sender, e.g., the message is signed, and the sender has a known PK in some PKI.</td>
</tr>
<tr>
<td>refs</td>
<td><code>Vec&lt;Hash&gt;</code></td>
<td>The list of hashes of messages received previously.</td>
</tr>
</tbody>
</table>
<p>In general, acceptor relay all sent or received messages to all learners and other acceptors. This ensures that any message received by a real acceptor is received by all real acceptors and learners.</p>
<h4 id="definition-message-signer">Definition: Message Signer<a class="headerlink" href="#definition-message-signer" title="Permanent link">&para;</a></h4>
<div class="arithmatex">\[
  \sig{\green x : Message} \triangleq
  \textrm{the acceptor or proposer that signed }\green x
\]</div>
<h4 id="definition-message-set-signers">Definition: Message Set Signers<a class="headerlink" href="#definition-message-set-signers" title="Permanent link">&para;</a></h4>
<p>We can define <span class="arithmatex">\(\sig{}\)</span> over sets of messages, to mean the set of signers of those messages:
$$
  \sig{\green s : set(Message)}
  \triangleq \cb{\tallpipe{\sig{\blue m}}{\blue m \in \green s}}
$$</p>
<p>Messages also contain a field <code>refs</code>, which includes chained hashes of every message the sender has sent or received since (and including) the last message it sent. As a result, we can define the transitive references of a message, which should include every message the sender has ever sent or received:</p>
<h4 id="definition-transitive-references">Definition: Transitive References<a class="headerlink" href="#definition-transitive-references" title="Permanent link">&para;</a></h4>
<div class="arithmatex">\[
  \tran{\green x}
  \triangleq
    \cb{\green x}
  \cup
    \bigcup_{\blue m \in \green{x.\mathit{refs}}} \tran{\blue m}
\]</div>
<p>To ensure that acceptors and learners <em>fully understand</em> each message they receive, they delay doing any computation on it (sometimes called delivery) until they have received all the messages in <code>refs</code>. As a result, acceptors and learners will always process messages from any given sender in the order they were sent, but also from any messages that sender received, and recursively.</p>
<!-- ### Protocol Description

1. **Propose a block**: A proposer proposes a new block that the acceptor will vote on by sending a message containing the hash of the proposed block along with a time stamp of the ballot initiation. This message is called _1a-message_. If there is an existing chimera chain the proposer can built upon that chain and if the proposer is starting a new chimera chain it needs to lock some funds for that.

<!-- The block consists of transactions from both chains or just on of the chains. The transaction can be bundled together to make sure they are carried out atomically.

more than one block be finalized like in Grandpa? and decoupling block prduction from finalization
    - In principle, yes. Heterogeneous Paxos would serve the roll of a "finality gadget" in Grandpa's terms, but blocks could be produced at any rate

-->

<h3 id="consensus-round-ballot"><strong>Consensus Round: Ballot</strong><a class="headerlink" href="#consensus-round-ballot" title="Permanent link">&para;</a></h3>
<p>Next, we briefly describe how the communication for a consensus round works. Consensus is reached in four steps: proposing the chimera block, acknowledging receipt of proposals,  establishing consensus, and termination.</p>
<p>Suppose we have two learners <span class="arithmatex">\(l_1\)</span> and <span class="arithmatex">\(l_2\)</span> from two different blockchains.</p>
<h4 id="1a-message-proposing-blocks"><strong><span class="arithmatex">\(1a\)</span> message: proposing blocks</strong><a class="headerlink" href="#1a-message-proposing-blocks" title="Permanent link">&para;</a></h4>
<!--To propose a chimera block, proposers send $1a$ messages, each carrying a value (the atomic transaction for example) and unique ballot number (round identifier), to all acceptors. -->

<p>A proposer proposes a new block by sending a <span class="arithmatex">\(1a\)</span> message to all acceptors,
which includes</p>
<ul>
<li>a value (the atomic transaction for example)</li>
</ul>
<ul>
<li>a unique ballot number (round identifier)</li>
</ul>
<ul>
<li>a message containing the hash of the proposed block along with a time stamp of
  the ballot initiation.</li>
</ul>
<p>If there is an existing chimera chain, the proposer can built upon that chain
and if the proposer is starting a new chimera chain it needs to lock some funds
for that.</p>
<p>Also, the acceptor needs to check validity as soon as possible: don't even
"receive" an invalid proposal (or at least don't send a "1b" message in
response).</p>
<h4 id="1b-message-acknowledging-receiving-proposals"><strong><span class="arithmatex">\(1b\)</span> message: acknowledging receiving proposals</strong><a class="headerlink" href="#1b-message-acknowledging-receiving-proposals" title="Permanent link">&para;</a></h4>
<p>On receipt of a <span class="arithmatex">\(1a\)</span> message, an acceptor sends an ackowledgement of its receipt
to all other acceptors and learners in the form of <span class="arithmatex">\(1b\)</span> message.</p>
<h4 id="2a-message-establishing-consensus"><strong><span class="arithmatex">\(2a\)</span> message: establishing consensus</strong><a class="headerlink" href="#2a-message-establishing-consensus" title="Permanent link">&para;</a></h4>
<p>When an acceptor receives a <span class="arithmatex">\(1b\)</span> message for the highest ballot number it has
seen from a learner <span class="arithmatex">\(l_1\)</span>’s quorum of acceptors, it sends a <span class="arithmatex">\(2a\)</span> message labeled
with <span class="arithmatex">\(l_1\)</span> and that ballot number.</p>
<p>There is one exception: once a safe acceptor sends a <span class="arithmatex">\(2a\)</span> message <span class="arithmatex">\(m\)</span> for a
learner <span class="arithmatex">\(l_1\)</span>, it never sends a <span class="arithmatex">\(2a\)</span> message with a different value for a
learner <span class="arithmatex">\(l_2\)</span>, unless one of the following is true:</p>
<ul>
<li>It knows that a quorum of acceptors has seen <span class="arithmatex">\(2a\)</span> messages with learner <span class="arithmatex">\(l_1\)</span>
  and ballot number higher than <span class="arithmatex">\(m\)</span>.</li>
</ul>
<ul>
<li>It has seen Byzantine behaviour that proves <span class="arithmatex">\(l_1\)</span> and <span class="arithmatex">\(l_2\)</span> do not have to
  agree.</li>
</ul>
<h5 id="specifics-of-establishing-consensus">Specifics of establishing Consensus<a class="headerlink" href="#specifics-of-establishing-consensus" title="Permanent link">&para;</a></h5>
<p>In order to make a learner decide, we need to show that another, <em>Entangled</em>
learner could not already have decided.</p>
<h5 id="definition-entangled">Definition: Entangled<a class="headerlink" href="#definition-entangled" title="Permanent link">&para;</a></h5>
<p>In an execution, two learners are <em>entangled</em> if their failure assumptions
matched the failures that actually happen:</p>
<div class="arithmatex">\[
\entangled{\red a}{\blue b} \triangleq \reallysafe \in \edge{\red a}{\blue b}
\]</div>
<p>If some learner <span class="arithmatex">\(l_1\)</span> does not agree with some other learner <span class="arithmatex">\(l_3\)</span>, then learner
<span class="arithmatex">\(l_2\)</span> cannot possibly agree with both <span class="arithmatex">\(l_1\)</span> and <span class="arithmatex">\(l_3\)</span>.</p>
<h5 id="definition-heterogeneous-agreement">Definition: Heterogeneous Agreement<a class="headerlink" href="#definition-heterogeneous-agreement" title="Permanent link">&para;</a></h5>
<ul>
<li>Within an execution, two learners have <em>agreement</em> if all decisions for either learner have the same value.</li>
<li>A heterogeneous consensus protocol has <em>agreement</em> if, for all possible executions of that protocol, all entangled pairs of learners have agreement.</li>
</ul>
<h5 id="definition-accurate-learner">Definition: Accurate Learner<a class="headerlink" href="#definition-accurate-learner" title="Permanent link">&para;</a></h5>
<p>An <em>accurate</em> learner is <a href="#definition-entangled">entangled</a> with itself:</p>
<div class="arithmatex">\[
\accurate{\red a} \triangleq \entangled{\red a}{\red a}
\]</div>
<p>A learner whose quorums contain too many failures is inaccurate. This is the
equivalent of a chain that can fork.</p>
<p>In order to prevent entangled disagreement, we must define the conditions that
will ultimately make learners decide:</p>
<h5 id="definition-get1a">Definition: Get1a<a class="headerlink" href="#definition-get1a" title="Permanent link">&para;</a></h5>
<p>It is useful to refer to the <span class="arithmatex">\(1a\)</span> that started the ballot of a message: the
highest ballot number <span class="arithmatex">\(1a\)</span> in its transitive references.</p>
<div class="arithmatex">\[
\geta{\green x} \triangleq
\argmax_{\blue m:\textit{1a}\in\tran{\green x}}{\blue{m.ballot}}
\]</div>
<h5 id="definition-ballot-numbers">Definition: Ballot Numbers<a class="headerlink" href="#definition-ballot-numbers" title="Permanent link">&para;</a></h5>
<p>The ballot number of a <span class="arithmatex">\(1a\)</span> is part of the message, and the ballot number of
anything else is the highest ballot number among the <span class="arithmatex">\(1a\)</span>s it (transitively)
references.</p>
<div class="arithmatex">\[
  \ba{\green x} \triangleq \geta{\green x}.ballot
\]</div>
<h5 id="definition-value-of-a-message">Definition: Value of a Message<a class="headerlink" href="#definition-value-of-a-message" title="Permanent link">&para;</a></h5>
<p>The value of a <span class="arithmatex">\(1a\)</span> is part of the message, and the value of anything else is
the value of the highest ballot <span class="arithmatex">\(1a\)</span>  among the messages it (transitively)
  references. $$ \va{\green x} \triangleq \geta{\green x}.value $$</p>
<h4 id="terminate-finalizing-blocks"><strong>Terminate: Finalizing blocks</strong><a class="headerlink" href="#terminate-finalizing-blocks" title="Permanent link">&para;</a></h4>
<p>A learner <span class="arithmatex">\(l_1\)</span> decides when it receives <span class="arithmatex">\(2a\)</span> messages with the same ballot
number from one of its quorums of acceptors.</p>
<p>If no decision can be reached within a certain time, proposers must begin a new
round (with a higher timestamp, and thus a higher Ballot). Proposers can start a
new round by proposing a new block or by trying to finalize the same block again
(in case there was no consensus).</p>
<h5 id="definition-decision">Definition: Decision<a class="headerlink" href="#definition-decision" title="Permanent link">&para;</a></h5>
<p>A learner decides when it has observed a set of <span class="arithmatex">\(2a\)</span> messages with the same
ballot, sent by a quorum of acceptors. This will allow the learner to <em>decide</em>
on the value of the <span class="arithmatex">\(2a\)</span> messages in the set. We call such a set a <em>decision</em>:</p>
<div class="arithmatex">\[ \decision{\red a}{\red{q_a}} \triangleq \sig{\red{q_a}} \in \red{Q_a}
  \ \land\
  \forall \cb{\green x,\blue y} \subseteq \red{q_a} . \ \p{\andlinesThree
    {\ba{\green x}=\ba{\blue y}}
    {\green{x.lrn}=\red a}
    {\green x:\textit{2a}}}
\]</div>
<p>Now we are ready to discuss what makes a <em>Well-Formed</em> <span class="arithmatex">\(2a\)</span> message. This
requires considering whether two learners might be entangled, and (unless we can
prove they are not engangled), whether one of them might have already decided:</p>
<h5 id="definition-caught">Definition: Caught<a class="headerlink" href="#definition-caught" title="Permanent link">&para;</a></h5>
<p>Some behaviour can create proof that an acceptor is Byzantine. Unlike Byzantine
Paxos, our acceptors and learners must adapt to Byzantine behaviour.  We say that
an acceptor <span class="arithmatex">\(\purple p\)</span> is <em>Caught</em> in a message <span class="arithmatex">\(\green x\)</span> if the transitive
references of the messages include evidence such as two messages, <span class="arithmatex">\(\red m\)</span> and
<span class="arithmatex">\(\blue{m^\prime}\)</span>, both signed by <span class="arithmatex">\(\purple p\)</span>, in which neither is featured in
the other's transitive references (safe acceptors transitively reference all
prior messages).</p>
<div class="arithmatex">\[
  \caught{\green x} \triangleq
  \cb{\tallpipe{\sig{\red m}}{\andlinesFour
        { \cb{\red m, \blue{ m^\prime}} \subseteq \tran{\green x} }
        {  \sig{\red m} = \sig{\blue{ m^\prime}}}
        { \red m \not\in \tran{\blue{m^\prime}}}
        { \blue{m^\prime} \not\in \tran{\red m}}
   }}
\]</div>
<p><strong>Slashing</strong>: Caught proofs can be used for slashing.</p>
<h5 id="definition-connected">Definition: Connected<a class="headerlink" href="#definition-connected" title="Permanent link">&para;</a></h5>
<p>When some acceptors are proved Byzantine, clearly some learners need not agree, meaning that <span class="arithmatex">\(\reallysafe\)</span> isn't in the edge between them in the CLG: at least one acceptor in each safe set in the edge is proven Byzantine. Homogeneous learners are always connected unless there are so many failures no consensus is required.
$$
  \con{\red a}{\green x} \triangleq
  \cb{\tallpipe{\blue b}{\andlinesTwo
        {\purple s \in \edge{\red a }{ \blue b} \in \clg}
        {\purple s \cap \caught{\green x} = \emptyset }
      }
     }
$$</p>
<h5 id="definition-buried">Definition: Buried<a class="headerlink" href="#definition-buried" title="Permanent link">&para;</a></h5>
<p>A <span class="arithmatex">\(2a\)</span> message can become irrelevant if, after a time, an entire quorum of
acceptors has seen <span class="arithmatex">\(2a\)</span>s with different values, &lt;span style="background-color:</p>
<h1 id="e2e2ffthe-same-learner-and-higher-ballot-numbers-we-call-such-a-2a">E2E2FF"&gt;the same learner</span>, and higher ballot numbers. We call such a <span class="arithmatex">\(2a\)</span><a class="headerlink" href="#e2e2ffthe-same-learner-and-higher-ballot-numbers-we-call-such-a-2a" title="Permanent link">&para;</a></h1>
<p><em>buried</em> (in the context of some later message <span class="arithmatex">\(\purple y\)</span>):</p>
<div class="arithmatex">\[
  \buried{\green x : \textit{2a}}{ \purple y} \triangleq
  \cb{\tallpipe{\sig{\red m}}{\andlinesSix
      {\red m \in \tran{\purple y}}
      {\blue z : \textit{2a}}
      {\cb{\green x, \blue z} \subseteq \tran{\red m}}
      {\va{\blue z} \ne \va{\green x}}
      {\ba{\blue z} &gt; \ba{\green x}}
      {\hetdiff{\blue{z.lrn} = \green{x.lrn}}}
  }}
  \in \green{Q_{\hetdiff{x.lrn}}}
\]</div>
<h5 id="definition-connected-2a-messages">Definition: Connected 2a Messages<a class="headerlink" href="#definition-connected-2a-messages" title="Permanent link">&para;</a></h5>
<p>Entangled learners must agree, but learners that are not connected are not
entangled, so they need not agree. Intuitively, a <span class="arithmatex">\(1b\)</span> message references a <span class="arithmatex">\(2a\)</span>
message to demonstrate that some learner may have decided some value. For
learner <span class="arithmatex">\(\red a\)</span>, it can be useful to find the set of <span class="arithmatex">\(2a\)</span> messages from the
same sender as a message <span class="arithmatex">\({\green x}\)</span> (and sent earlier) which are still
<a href="#definition-buried">unburied</a> and for learners connected to <span class="arithmatex">\(\red a\)</span>. The <span class="arithmatex">\(1b\)</span>
cannot be used to make any new <span class="arithmatex">\(2a\)</span> messages for learner <span class="arithmatex">\(\red a\)</span> that have
values different from these <span class="arithmatex">\(2a\)</span> messages.</p>
<div class="arithmatex">\[
      \cona{\hetdiff{\red a}}{\green x} \triangleq
      \cb{\tallpipe{\blue m}{\andlinesFive
          {\blue m : \textit{2a}}
          {\blue m \in \tran{\green{x}}}
          {\sig{\blue m} = \sig{\green x}}
          {\lnot \buried{\blue m}{\green x}}
          {\hetdiff{\blue{m.lrn} \in \con{\red a}{\green x}}}
      }}
\]</div>
<h5 id="definition-fresh">Definition: Fresh<a class="headerlink" href="#definition-fresh" title="Permanent link">&para;</a></h5>
<p>Acceptors send a <span class="arithmatex">\(1b\)</span> message whenever they receive a <span class="arithmatex">\(1a\)</span> message with a ballot number higher than they have yet seen. However, this does not mean that the <span class="arithmatex">\(1b\)</span>'s value (which is the same as the <span class="arithmatex">\(1a\)</span>'s) agrees with that of <span class="arithmatex">\(2a\)</span> messages the acceptor has already sent. We call a <span class="arithmatex">\(1b\)</span> message <em>fresh</em> (with respect to a learner)  when its value agrees with that of unburied <span class="arithmatex">\(2a\)</span> messages the acceptor has sent.
$$
    \fresh{\hetdiff{\red a}}{\green x : \textit{1b}} \triangleq
    \forall \blue m \in \cona{\hetdiff{\red a}}{\green x} . \
      \va{\green x} = \va{\blue m}
$$</p>
<h5 id="definition-quorums-in-messages">Definition: Quorums in Messages<a class="headerlink" href="#definition-quorums-in-messages" title="Permanent link">&para;</a></h5>
<p><span class="arithmatex">\(2a\)</span> messages reference <em>quorums of messages</em> with the same  value and ballot. A <span class="arithmatex">\(2a\)</span>'s quorums are formed from <a href="#definition-fresh">fresh</a> <span class="arithmatex">\(1b\)</span> messages with the same ballot and value.
$$
  \qa{\green x : \textit{2a}} \triangleq \cb{\tallpipe{\red m}{\andlinesFour
  {\red m : \textit{1b}}
  {\fresh{\hetdiff{\green{x.lrn}}}{\red m}}
  {\red m \in \tran{\green x}}
  {\ba{\red m} = \ba{\green x}}
}}
$$</p>
<h5 id="definition-well-formed">Definition: Well-Formed<a class="headerlink" href="#definition-well-formed" title="Permanent link">&para;</a></h5>
<p>We define what it means for a message to be <em>well-formed</em>.</p>
<div class="arithmatex">\[
  \begin{array}{l}
WellFormed(\purple u : \textit{1a}) \triangleq
  \ {\purple u}.\mathit{refs} = \emptyset
\\
WellFormed(\green x : \textit{1b}) \triangleq
  \ {\green x}.\mathit{refs} \ne \emptyset
  \ \land\ \forall\,\blue y \in \tran{\green x} .
  \ \green x \ne \blue y
  \ \land\ \blue y \ne \geta{\green x}
  \ \Rightarrow\ \ba{\blue y} \ne \ba{\green x}
\\
WellFormed(\red z : \textit{2a}) \triangleq
  \ {\red z}.\mathit{refs} \ne \emptyset
  \ \land\ \sig{\qa{\red z}} \in \red{Q_{\hetdiff{z.lrn}}}
\end{array}
\]</div>
<p>An acceptor who has received a <span class="arithmatex">\(1b\)</span> sends a <span class="arithmatex">\(2a\)</span> for every learner for which it
can produce a Well-formed <span class="arithmatex">\(2a\)</span>.</p>
<p>Before processing a received message, acceptors and learners check if the
message is well-formed. Non-wellformed messages are rejected.</p>
<h3 id="incentive-model">Incentive Model<a class="headerlink" href="#incentive-model" title="Permanent link">&para;</a></h3>
<p>Goal:</p>
<ul>
<li>Incentivizing token holders to put down their stake for security</li>
</ul>
<ul>
<li>Disincentivizing byzantine behaviour</li>
</ul>
<p>Rewards:</p>
<ul>
<li>Participating in consensus based on backing stake: this includes validating and voting</li>
</ul>
<ul>
<li>Producing blocks</li>
</ul>
<p>Slashing: there are a number of offenses</p>
<ul>
<li>Invalid blocks</li>
</ul>
<ul>
<li>Equivocation (caught)</li>
</ul>
<h3 id="fees">Fees<a class="headerlink" href="#fees" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>The first question is once there is no demand for atomic batches of transactions, do we keep the chimera chain alive?</p>
</div>
<p>We need to figure out whether killing the chimera chain (and potentially
requiring a new genesis later) is not too expensive.</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>The second question is whether we update the quroum changes whenever they happen or when we have a transaction?</p>
</div>
<p>The first option is expensive and can lead to attack if not handled well. We
need to figure out whether the latter option is safe.</p>
<ul>
<li>If the answer is yes for first question and we pick the first option for the
  second question:</li>
</ul>
<p>Since all chimera chains need to be updated when the quorums on the base chains
change, we need to figure out who pays for these updates. For example, a chimera
chain might have had a block produced last week, but since the has been updated
200 times that is 200 blocks that do not have any transactions with transaction
fees. If this is not paid by anyone, it becomes a burden for acceptors and an
attack vector for the adversary.</p>
<p>We may need to add a "locked" fee for making new chimera chains. In particular,
we don't want an attacker to make a lot of chains, forcing base chains to update
all of them with each quorum change.</p>
<p>Alternatively, each "chimera chain" could keep an account on each base chain
that is funded by a portion of transaction fees, from which a small fee is
extracted with each validator update. When the account runs dry, the
(parent)base chains are allowed to kill the chimera chain (even if there are
still objects on there). We could allow anyone to contribute to these accounts.
We could even prohibit anyone who did not contribute from sending IBC messages
between chimera and parent chains.</p>
<h2 id="security-discussion">Security Discussion<a class="headerlink" href="#security-discussion" title="Permanent link">&para;</a></h2>
<p>Note that the chimera cannot guarantee atomicty under the same adversary
assumption as the base chains. For example, if we assume the adversary to
control less than 1/3 of the stake to assure safety on the base chains,
atomicity is not guaranteed for such an adversary but only a weaker one. This is
important for users so they can decide whether for their transaction chimera
chians would be secure enough.</p>
<p>By setting the quorums of each learner to be the same as the quorums of the
corresponding base chain, we ensure that each learner's view is <em>as consistent</em>
as the base chain. Specifically, two instantiations of the learner for some base
chain <span class="arithmatex">\(A\)</span> should decide on the same blocks in any chimera chain, unless the
adversary is powerful enough to fork chain <span class="arithmatex">\(A\)</span>.</p>
<p>"Accurate" (or "self-engangled") learners (defined above) correspond to base
chains where the adversary is in fact powerful enough to fork the chain. Proving
that a learner is accurate is equivalent to proving that its base chain cannot
fork.</p>
<p>Two learners <span class="arithmatex">\(\red{a}\)</span> and <span class="arithmatex">\(\blue{b}\)</span> corresponding to different base chains
will decide on the same blocks (which is what makes atomic batches useful), so
long as one of the safe sets in <span class="arithmatex">\(\edge{\red{a}}{\blue{b}}\)</span> is composed entirely
of safe acceptors. The stake backing these safe sets represents the "assurance"
that atomic batches remain atomic, as well as the maximum slashing punishment
should they lose atomicity.</p>
<p>Loss of atomicity is a bit like a "trusted bridge" that turns out not to be
trustworthy: each state machine within the chimera chain has as much integrity
as its base chain, but atomicity properties of multi-state-machine atomic
batches have a lesser, but still well-defined, guarantee. Loss of atomicty
allows double spending on the chimera chain. And while misbehaviour has happened
in such an attack it is not trivial to slash the misbehaving acceptor since
according to each chain everything has been carried out correctly.</p>
<h2 id="open-challenges">Open Challenges<a class="headerlink" href="#open-challenges" title="Permanent link">&para;</a></h2>
<h3 id="programming-model">Programming Model<a class="headerlink" href="#programming-model" title="Permanent link">&para;</a></h3>
<h4 id="atomic-batches">Atomic Batches<a class="headerlink" href="#atomic-batches" title="Permanent link">&para;</a></h4>
<p>We'll need a way to specify that a batch of transactions should be committed
together or not at all. Ideally, this should communicate to the programmer how
reliably this atomicity is (see "practical considerations" below). On an chimera
chain, batches can include transactions from any of their "main chains". If we
want to have match-making, transactions will need to be able to say something
like "if I'm in an atomic batch that matches these criteria, then do this...".</p>
<p>Each atomic batch should be scheduled within one block.</p>
<p>(We encode transactions with Portobuff and Borsht.) We need define structures
such that transactions can be bundled and cannot be carried out separately.</p>
<h4 id="atomic-communication">Atomic Communication<a class="headerlink" href="#atomic-communication" title="Permanent link">&para;</a></h4>
<p>Transactions within an atomic batch need to be able to send information to each
other (and back). For example, in a market with a fluctuating exchange rate, a
market transaction could send a message to an account, which transfers money,
and sends a message to another account, which transfers goods. We need a
language in which this communication takes place with minimal constraints on the
state machines involved, so we should probably adapt the IBC communication
language.</p>
<p>We need to figure out inter-chain communication works for transactions
communicating with each other within an atomic batch.</p>
<h4 id="can-we-have-synchronous-in-terms-of-blocks-ibc">Can we have synchronous (in terms of blocks) IBC?<a class="headerlink" href="#can-we-have-synchronous-in-terms-of-blocks-ibc" title="Permanent link">&para;</a></h4>
<p>Yes: when the quorums involved in two chains are the same, then we can guarantee
that (unless there are sufficient failures to fork the chain) an IBC message
sent in one chain will arrive at the other chain (in a transaction) within a
specific number (perhaps as few as 1?) of blocks. This is because some of the
machines in the quorum that approved the "send" transaction must be in the
quorum that decides the next block, so they can refuse to decide on blocks that
lack the "receive" transaction.</p>
<p>Note that we may need to rate-limit sends to ensure that all sends can be
received in time (availability).</p>
<p>Note also that blinding transactions makes this hard.</p>
<h3 id="match-making">Match Making<a class="headerlink" href="#match-making" title="Permanent link">&para;</a></h3>
<p>We can in priciple do cross-chain match-making. If we want an on-chain market,
an chimera chain might be a good place to do it. However, full nodes in the
gossip layer might be able to gather sets of transactions that match the
transactions' "If I'm in an atomic batch ..." criteria, bundle them into atomic
batches, and then send those off to be committed.</p>
<p>We may want to incorporate some incentive scheme for good match-making.
Matchmakers include nodes who are full nodes on both chains, and in principle
could include any node who sees the request transactions.</p>
<h3 id="changing-quorums">Changing Quorums?<a class="headerlink" href="#changing-quorums" title="Permanent link">&para;</a></h3>
<!--Assume we have one "main chain" that decides who the quorums used by some other (possibly heterogeneous) chains are. Hopefully, quorum changes are infrequent. -->

<h4 id="2-phase-commit">2 Phase Commit<a class="headerlink" href="#2-phase-commit" title="Permanent link">&para;</a></h4>
<p>We could require that any quorum-chainging transaction has to be 2-phase
committed. Essentially, the "main chain" announces that it won't progress beyond
a certain block until everyone has appended a new block that sets the (same) new
quorums, and sends a response by IBC. It can then progress only with IBC
responses from all the other chains that use these quorums.</p>
<!--This solution is potentially slow: arbitrarily many chains may have to be involved. That said, at least in principle, they all have the same safety and liveness properties.-->

<h4 id="synchronous-ibc">Synchronous IBC<a class="headerlink" href="#synchronous-ibc" title="Permanent link">&para;</a></h4>
<p>We may be able to leverage our "synchronous" IBC idea above for faster quorum
changes. The difficulty is that it allows a finite number of blocks to be
appended to the chimera chains before they receive the quorum change method.
These chains can be arbitrarily slow, so that could take arbitrarily long.</p>
<p>Need to figure out inter-machine communication for acceptors, since they might
run many machines.</p>
<hr />
<h2 id="discussion-questions-practical-considerations">Discussion Questions /Practical Considerations<a class="headerlink" href="#discussion-questions-practical-considerations" title="Permanent link">&para;</a></h2>
<ul>
<li>Optimizing messgaing: Pipelining (from Hotstuff), Kauri, BFTree</li>
</ul>
<ul>
<li>Replicating state machines</li>
</ul>
<ul>
<li>Probems Tendermint has:<p>* Doesnt allow many validators</p>
<p>* Lightclient design</p>
</li>
</ul>
<ul>
<li>Optimizing recoveryfrom slow finalization: Separating block prosuction from finalizing, finalzing more than one block</li>
</ul>
<ul>
<li>ABCI ++? Another version of it</li>
</ul>
<ul>
<li>Look into other papers of Dalia Malkhi / Fast HotStuff?</li>
</ul>
<!-- list_wikilinks -->

<!-- mermaid_wikilinks -->







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-11-01T02:52:42+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-11-01</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-03-24T00:41:13+01:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-03-24</span>
  </span>

    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5zM16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! We'll try to improve this page in the future.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  <div class="md-copyright__highlight">
    Powered by Mkdocs, Material 9.5.37-insiders-4.53.13 and Juvix v0.6.6 - Last updated: December 03, 2024 at 01:26 PM UTC
  </div>
  

  <ul>
    <li><a href="https://anoma.net/" target="_blank">Anoma Official Website</a> </li>
    <li><a href="https://art.anoma.net" target="_blank">Anoma Research Topics (ART)</a></li>
    <li><a href="https://anoma.net/blog" target="_blank">Anoma Blog</a></li>
    <li><a href="https://anoma.net/talks" target="_blank">Anoma Talks</a></li>
  </ul>
  <ul>
    <span class="md-copyright__highlight">Extra resources for Anoma
      Specification collaborators</span>
      
      <li><a href="https://anoma.github.io/nspec/v2/indexes/links.html">Quick links</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/indexes/juvix_modules.html">Juvix modules</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/tutorial/index.html">Markdown tutorials for writing Anoma
          Specification</a></li>
      <li><a href="https://anoma.github.io/nspec/v2/tutorial/engines/index.html">On engines in Anoma</a></li>
  </ul>
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://x.com/anoma" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/anoma" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://anoma.net/blog" target="_blank" rel="noopener" title="anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://research.anoma.net" target="_blank" rel="noopener" title="research.anoma.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/anoma" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:arts@heliax.dev" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "search.suggest", "search.sharing", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.indexes", "navigation.top", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../assets/js/extra.js"></script>
      
        <script src="../../../assets/js/highlight.js"></script>
      
        <script src="../../../assets/js/mathjax.js"></script>
      
        <script src="../../../assets/js/tex-svg-full.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>