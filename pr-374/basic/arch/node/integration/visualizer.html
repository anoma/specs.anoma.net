
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="The Anoma specs is a collection of documents that describe the architecture, design, and implementation of the Anoma Network." name="description"/>
<meta content="Anoma Foundation" name="author"/>
<link href="https://specs.anoma.net/pr-374/arch/node/integration/visualizer.juvix.html" rel="canonical"/>
<link href="simulator.html" rel="prev"/>
<link href="examples/increment.html" rel="next"/>
<link href="../../../assets/logo.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.12" name="generator"/>
<title>Engine Visualizer - Anoma specs</title>
<link href="../../../assets/stylesheets/main.2afb09e1.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
<link href="../../../assets/css/juvix-material-style.css" rel="stylesheet"/>
<link href="../../../assets/css/juvix-highlighting.css" rel="stylesheet"/>
<link href="../../../assets/css/juvix_codeblock_footer.css" rel="stylesheet"/>
<link href="../../../assets/css/latte-light.css" rel="stylesheet"/>
<link href="../../../assets/css/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></link></head>
<body data-md-color-accent="indigo" data-md-color-primary="white" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#simulation-message-visualizer">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
<aside class="md-banner">
<div class="md-banner__inner md-grid md-typeset">
<button aria-label="Don't show this again" class="md-banner__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
            
            
  For updates follow <strong>@anoma</strong> on
  <a href="https://x.com/anoma" rel="me">
<span class="twemoji x-twitter">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"></path></svg>
</span>
<strong></strong>
</a>
  and discuss on our
  <a href="https://research.anoma.net">
<span class="twemoji discourse">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"></path></svg>
</span>
<strong>forum</strong>
</a>
</div>
<script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
</aside>
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Anoma specs" class="md-header__button md-logo" data-md-component="logo" href="../../../index.html" title="Anoma specs">
<img alt="logo" src="../../../assets/logo.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
<span class="first-letter">A</span>noma 
              
                <span class="first-letter">s</span>pecs
              
              
                <span class="md-header__topic-version">(PR 374)</span>
</span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
              
                Engine Visualizer
              
            </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="white" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="red" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="white" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="red" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7"></path></svg>
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/anoma/nspec" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    anoma/nspec
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<!--
  This is a modified version of the original mkdocs-material theme.
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->
<!-- Determine classes -->
<!-- Navigation -->
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<!-- Site title -->
<label class="md-nav__title" for="__drawer">
<a aria-label="Anoma specs" class="md-nav__button md-logo" data-md-component="logo" href="../../../index.html" title="Anoma specs">
<img alt="logo" src="../../../assets/logo.svg"/>
</a>
    Anoma specs
  </label>
<!-- List of Versions -->
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="https://specs.anoma.net/latest" target="_blank">
     Latest version ((PR 374))
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://specs.anoma.net/main">
        Development version
      </a>
</li>
</ul>
<!-- Navigation list -->
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../index.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M24 18.714v4.8c0 .288-.192.48-.48.48h-4.8c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92h-8.16v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H9.6c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48h1.92v-1.92H3.36v1.92h1.92c.288 0 .48.192.48.48v4.8c0 .288-.192.48-.48.48H.48c-.288 0-.48-.192-.48-.48v-4.8c0-.288.192-.48.48-.48H2.4v-2.4c0-.288.192-.48.48-.48h8.64v-1.44h.96v1.44h8.64c.288 0 .48.192.48.48v2.4h1.92c.288 0 .48.192.48.48m-13.92 4.32h3.84v-3.84h-3.84zm-9.12 0H4.8v-3.84H.96Zm18.24 0h3.84v-3.84H19.2ZM6.24 9.642V3.546c0-.192.096-.336.24-.432L11.76.042a.8.8 0 0 1 .48 0l5.28 3.072c.144.096.24.24.24.432v6.096c0 .144-.096.288-.24.384l-5.28 3.072q-.096.048-.24.048t-.24-.048l-5.28-3.072c-.144-.096-.24-.24-.24-.384m10.56-.288V4.362l-4.32 2.496v4.992zm-9.6 0 4.32 2.496V6.858L7.2 4.362Zm.48-5.808L12 5.994l4.32-2.448L12 1.05Z"></path></svg>
<span class="md-ellipsis">
    Anoma architecture
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../changelog.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5-1.65 0-3.35.3-4.75 1.05-.1.05-.15.05-.25.05-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1 1.11-.35 2.33-.5 3.5-.5 1.95 0 4.05.4 5.5 1.5 1.45-1.1 3.55-1.5 5.5-1.5 1.17 0 2.39.15 3.5.5.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5-.1 0-.15 0-.25-.05-1.4-.75-3.1-1.05-4.75-1.05-1.7 0-4.15.65-5.5 1.5M12 8v11.5c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5m1 3.5c1.11-.68 2.6-1 4.5-1 .91 0 1.76.09 2.5.28V9.23c-.87-.15-1.71-.23-2.5-.23q-2.655 0-4.5.84zm4.5.17c-1.71 0-3.21.26-4.5.79v1.69c1.11-.65 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24v-1.5c-.87-.16-1.71-.23-2.5-.23m2.5 2.9c-.87-.16-1.71-.24-2.5-.24-1.83 0-3.33.27-4.5.8v1.69c1.11-.66 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24z"></path></svg>
<span class="md-ellipsis">
    Changelog
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Indexes
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Indexes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../indexes/tags.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 7A1.5 1.5 0 0 1 4 5.5 1.5 1.5 0 0 1 5.5 4 1.5 1.5 0 0 1 7 5.5 1.5 1.5 0 0 1 5.5 7m15.91 4.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.11 0-2 .89-2 2v7c0 .55.22 1.05.59 1.41l8.99 9c.37.36.87.59 1.42.59s1.05-.23 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.56-.23-1.06-.59-1.42"></path></svg>
<span class="md-ellipsis">
    List of tags
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../indexes/modules.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 10h-2V8h2m0 5h-2v-2h2m-3-1h-2V8h2m0 5h-2v-2h2m0 6H8v-2h8m-9-5H5V8h2m0 5H5v-2h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2"></path></svg>
<span class="md-ellipsis">
    List of modules
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../prelude.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"></path></svg>
<span class="md-ellipsis">
    List of basic types
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    Node architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Node architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../concepts/engine.html">
<span class="md-ellipsis">
    Concepts
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../types/anoma_message.html">
<span class="md-ellipsis">
    Types
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../subsystems/hardware.html">
<span class="md-ellipsis">
    Subsystems
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
<span class="md-ellipsis">
    Integration
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            Integration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="simulator.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.14v14l11-7z"></path></svg>
<span class="md-ellipsis">
    Engine Simulator
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m3 14 .5.07L8.07 9.5a1.95 1.95 0 0 1 .52-1.91c.78-.79 2.04-.79 2.82 0 .53.52.7 1.26.52 1.91l2.57 2.57.5-.07c.18 0 .35 0 .5.07l3.57-3.57C19 8.35 19 8.18 19 8a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2c-.18 0-.35 0-.5-.07l-3.57 3.57c.07.15.07.32.07.5a2 2 0 0 1-2 2 2 2 0 0 1-2-2l.07-.5-2.57-2.57c-.32.07-.68.07-1 0L4.93 15.5 5 16a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2"></path></svg>
<span class="md-ellipsis">
    Engine Visualizer
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="visualizer.html">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m3 14 .5.07L8.07 9.5a1.95 1.95 0 0 1 .52-1.91c.78-.79 2.04-.79 2.82 0 .53.52.7 1.26.52 1.91l2.57 2.57.5-.07c.18 0 .35 0 .5.07l3.57-3.57C19 8.35 19 8.18 19 8a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2c-.18 0-.35 0-.5-.07l-3.57 3.57c.07.15.07.32.07.5a2 2 0 0 1-2 2 2 2 0 0 1-2-2l.07-.5-2.57-2.57c-.32.07-.68.07-1 0L4.93 15.5 5 16a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2"></path></svg>
<span class="md-ellipsis">
    Engine Visualizer
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#helper-functions">
<span class="md-ellipsis">
      Helper Functions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-type-converters">
<span class="md-ellipsis">
      Basic Type Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-engine-message-converters">
<span class="md-ellipsis">
      Core Engine Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#identity-and-cryptographic-message-converters">
<span class="md-ellipsis">
      Identity and Cryptographic Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-and-system-message-converters">
<span class="md-ellipsis">
      Storage and System Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network-and-transport-message-converters">
<span class="md-ellipsis">
      Network and Transport Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#template-and-utility-message-converters">
<span class="md-ellipsis">
      Template and Utility Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#main-message-dispatcher-and-mermaid-generation">
<span class="md-ellipsis">
      Main Message Dispatcher and Mermaid Generation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="examples/increment.html">
<span class="md-ellipsis">
    Examples
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    System architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            System architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../system/identity/identity.html">
<span class="md-ellipsis">
    Identity Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../system/state/resource_machine/index.html">
<span class="md-ellipsis">
    State Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Integrations
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../integrations/adapters/index.html">
<span class="md-ellipsis">
    Protocol Adapters
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-ellipsis">
    Tutorials
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../tutorial/principles_and_guidelines.html">
<span class="md-ellipsis">
    Contributor guidelines
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#helper-functions">
<span class="md-ellipsis">
      Helper Functions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-type-converters">
<span class="md-ellipsis">
      Basic Type Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-engine-message-converters">
<span class="md-ellipsis">
      Core Engine Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#identity-and-cryptographic-message-converters">
<span class="md-ellipsis">
      Identity and Cryptographic Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-and-system-message-converters">
<span class="md-ellipsis">
      Storage and System Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network-and-transport-message-converters">
<span class="md-ellipsis">
      Network and Transport Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#template-and-utility-message-converters">
<span class="md-ellipsis">
      Template and Utility Message Converters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#main-message-dispatcher-and-mermaid-generation">
<span class="md-ellipsis">
      Main Message Dispatcher and Mermaid Generation
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<!--
  This is a modified version of the original mkdocs-material theme.
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->
<!-- Tags -->
<nav class="md-tags">
<a class="md-tag" href="../../../indexes/tags.html#tag:mermaid">mermaid</a>
<a class="md-tag" href="../../../indexes/tags.html#tag:simulator">simulator</a>
<a class="md-tag" href="../../../indexes/tags.html#tag:visualizer">visualizer</a>
</nav>
<!-- Actions -->
<!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->
<!-- Actions -->
<!-- Edit button -->
<a class="md-content__button md-icon" href="https://github.com/anoma/nspec/edit/main/docs/arch/node/integration/visualizer.juvix.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6zm7 1.5L18.5 9H13zm7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1z"></path></svg>
</a>
<!-- View button -->
<a class="md-content__button md-icon" href="https://github.com/anoma/nspec/raw/main/docs/arch/node/integration/visualizer.juvix.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.56 18H3.44C2.65 18 2 17.37 2 16.59V7.41C2 6.63 2.65 6 3.44 6h17.12c.79 0 1.44.63 1.44 1.41v9.18c0 .78-.65 1.41-1.44 1.41M6.81 15.19v-3.66l1.92 2.35 1.92-2.35v3.66h1.93V8.81h-1.93l-1.92 2.35-1.92-2.35H4.89v6.38zM19.69 12h-1.92V8.81h-1.92V12h-1.93l2.89 3.28z"></path></svg>
</a>
<!-- If the page source ends with .juvix.md, we show a button to view the raw code -->
<a class="md-content__button md-icon" href="arch/node/integration/visualizer-src.html" title="View Raw Juvix Code">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 3a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2H3v2h1a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h2v-2H8v-5a2 2 0 0 0-2-2 2 2 0 0 0 2-2V5h2V3m6 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2 2 2 0 0 1-2-2V5h-2V3z"></path></svg>
</a>
<!--
  Hack: check whether the content contains a h1 headline. If it doesn't, the
  page title (or respectively site name) is used as the main headline.
-->
<!-- Page content -->
<h1 id="simulation-message-visualizer">Simulation Message Visualizer<a class="headerlink" href="#simulation-message-visualizer" title="Anchor link to this section for reference">¶</a></h1>
<p>This module provides functions to generate Mermaid sequence diagrams from a list
of engine messages, allowing for visualization of simulation traces.</p>
<details class="code">
<summary>Juvix Code</summary>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-0-1">module arch.node.integration.visualizer;
</span><span id="__ispan-0-2">
</span><span id="__ispan-0-3">import prelude open;
</span><span id="__ispan-0-4">import Stdlib.Data.Set as Set;
</span><span id="__ispan-0-5">import arch.node.types.messages open;
</span><span id="__ispan-0-6">import arch.node.types.identities open;
</span><span id="__ispan-0-7">import arch.node.types.anoma_message open;
</span><span id="__ispan-0-8">import arch.system.state.resource_machine.notes.nockma open; -- For Noun type
</span><span id="__ispan-0-9">import arch.node.types.basics open; -- For TxFingerprint, KVSKey, KVSDatum etc.
</span><span id="__ispan-0-10">import arch.node.types.transport open; -- For TransportAddress etc.
</span><span id="__ispan-0-11">
</span><span id="__ispan-0-12">-- Imports from arch.node.types.anoma_message for detailed message types
</span><span id="__ispan-0-13">import arch.node.engines.identity_management_messages open;
</span><span id="__ispan-0-14">import arch.node.engines.decryption_messages open;
</span><span id="__ispan-0-15">import arch.node.engines.encryption_messages open;
</span><span id="__ispan-0-16">import arch.node.engines.commitment_messages open;
</span><span id="__ispan-0-17">import arch.node.engines.verification_messages open;
</span><span id="__ispan-0-18">import arch.node.engines.reads_for_messages open;
</span><span id="__ispan-0-19">import arch.node.engines.signs_for_messages open;
</span><span id="__ispan-0-20">import arch.node.engines.naming_messages open;
</span><span id="__ispan-0-21">import arch.node.engines.local_key_value_storage_messages open;
</span><span id="__ispan-0-22">import arch.node.engines.logging_messages open;
</span><span id="__ispan-0-23">import arch.node.engines.wall_clock_messages open;
</span><span id="__ispan-0-24">import arch.node.engines.local_time_series_storage_messages open;
</span><span id="__ispan-0-25">import arch.node.engines.net_registry_messages open;
</span><span id="__ispan-0-26">import arch.node.engines.router_messages open;
</span><span id="__ispan-0-27">import arch.node.engines.transport_protocol_messages open;
</span><span id="__ispan-0-28">import arch.node.engines.transport_connection_messages open;
</span><span id="__ispan-0-29">import arch.node.engines.pub_sub_topic_messages open;
</span><span id="__ispan-0-30">import arch.node.engines.storage_messages open;
</span><span id="__ispan-0-31">import arch.node.engines.mempool_worker_messages open;
</span><span id="__ispan-0-32">import arch.node.engines.executor_messages open;
</span><span id="__ispan-0-33">import arch.node.engines.shard_messages open;
</span><span id="__ispan-0-34">import arch.node.engines.ticker_messages open;
</span><span id="__ispan-0-35">import tutorial.engines.template_messages open;
</span><span id="__ispan-0-36">import tutorial.engines.template_minimum_messages as TemplateMinimum;
</span></code></pre></div>
</details>
<h2 id="helper-functions">Helper Functions<a class="headerlink" href="#helper-functions" title="Anchor link to this section for reference">¶</a></h2>
<p>Utility functions for string conversion, participant management, and basic data manipulation needed for diagram generation.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-1-1">-- Function to convert EngineID to a String for diagram labels
</span><span id="__ispan-1-2">engineIdToString (eid : EngineID) : String :=
</span><span id="__ispan-1-3">  let
</span><span id="__ispan-1-4">    nodeStr := case fst eid of {
</span><span id="__ispan-1-5">      | none := "Client" -- Or some other placeholder for external senders
</span><span id="__ispan-1-6">      | some (PublicKey.Curve25519PubKey pk) := pk
</span><span id="__ispan-1-7">    };
</span><span id="__ispan-1-8">    engineNameStr := snd eid;
</span><span id="__ispan-1-9">  in nodeStr ++str "/" ++str engineNameStr;
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-2-1">-- Helper function to convert NodeID to a String
</span><span id="__ispan-2-2">nodeIdToString (nodeId : NodeID) : String :=
</span><span id="__ispan-2-3">  case nodeId of {
</span><span id="__ispan-2-4">    | PublicKey.Curve25519PubKey pk := pk
</span><span id="__ispan-2-5">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-3-1">-- Helper to join a list of strings with a separator
</span><span id="__ispan-3-2">terminating
</span><span id="__ispan-3-3">stringJoin (separator : String) (strings : List String) : String :=
</span><span id="__ispan-3-4">  case strings of {
</span><span id="__ispan-3-5">    | [] := ""
</span><span id="__ispan-3-6">    | s :: [] := s
</span><span id="__ispan-3-7">    | s :: rest := s ++str separator ++str (stringJoin separator rest)
</span><span id="__ispan-3-8">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-4-1">-- Helper to get unique participants
</span><span id="__ispan-4-2">getParticipants (messages : List (EngineMsg Msg)) : Set String :=
</span><span id="__ispan-4-3">  let
</span><span id="__ispan-4-4">    addParticipantIds (msg : EngineMsg Msg) (acc : Set String) : Set String :=
</span><span id="__ispan-4-5">      let
</span><span id="__ispan-4-6">        senderStr := engineIdToString (EngineMsg.sender msg);
</span><span id="__ispan-4-7">        targetStr := engineIdToString (EngineMsg.target msg);
</span><span id="__ispan-4-8">      in insert senderStr (insert targetStr acc); -- Uses `insert` from prelude's Set import
</span><span id="__ispan-4-9">  in foldr addParticipantIds Set.empty messages;
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-5-1">-- Helper to convert Bool to String
</span><span id="__ispan-5-2">boolToString (b : Bool) : String := if | b := "true" | else := "false";
</span></code></pre></div>
<h2 id="basic-type-converters">Basic Type Converters<a class="headerlink" href="#basic-type-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Conversion functions for fundamental data types used throughout the system.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-6-1">-- Placeholder for Hash to String conversion
</span><span id="__ispan-6-2">hashToString (h : Hash) : String := "&lt;hash&gt;"; -- Replace with actual conversion
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-7-1">-- Placeholder for Noun to String conversion
</span><span id="__ispan-7-2">terminating
</span><span id="__ispan-7-3">nounToString (n : Noun) : String :=
</span><span id="__ispan-7-4">  case n of {
</span><span id="__ispan-7-5">    | Noun.Atom a := natToString a
</span><span id="__ispan-7-6">    | Noun.Cell l r := "[" ++str (nounToString l) ++str " " ++str (nounToString r) ++str "]"
</span><span id="__ispan-7-7">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-8-1">-- Placeholder for KVSKey to String conversion
</span><span id="__ispan-8-2">kvsKeyToString (key : KVSKey) : String :=
</span><span id="__ispan-8-3">  "&lt;KVSKeyPlaceholder&gt;";
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-9-1">-- Placeholder for KVSDatum to String conversion
</span><span id="__ispan-9-2">kvsDatumToString (datum : KVSDatum) : String :=
</span><span id="__ispan-9-3">  "&lt;KVSDatumPlaceholder&gt;";
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-10-1">-- Placeholders for complex types
</span><span id="__ispan-10-2">signableToString (s : Signable) : String := "&lt;Signable&gt;";
</span><span id="__ispan-10-3">commitmentToString (c : Commitment) : String := "&lt;Commitment&gt;";
</span><span id="__ispan-10-4">ciphertextToString (c : Ciphertext) : String := "&lt;Ciphertext&gt;";
</span><span id="__ispan-10-5">plaintextToString (p : Plaintext) : String := "&lt;Plaintext&gt;";
</span><span id="__ispan-10-6">readsForEvidenceToString (rfe : ReadsForEvidence) : String := "&lt;ReadsForEvidence&gt;";
</span><span id="__ispan-10-7">signsForEvidenceToString (sfe : SignsForEvidence) : String := "&lt;SignsForEvidence&gt;";
</span><span id="__ispan-10-8">backendToString (b : Backend) : String := "&lt;Backend&gt;";
</span><span id="__ispan-10-9">idParamsToString (p : IDParams) : String := "&lt;IDParams&gt;";
</span><span id="__ispan-10-10">capabilitiesToString (c : Capabilities) : String := "&lt;Capabilities&gt;";
</span><span id="__ispan-10-11">routerMsgInnerToString (r : RouterMsg Msg) : String := "&lt;RouterMsgInner&gt;";
</span><span id="__ispan-10-12">transportAddressToString (t : TransportAddress) : String := "&lt;TransportAddress&gt;";
</span><span id="__ispan-10-13">byteStringToString (b : ByteString) : String := "&lt;ByteString&gt;";
</span><span id="__ispan-10-14">chunkIdToString (c : ChunkID) : String := "&lt;ChunkID&gt;";
</span><span id="__ispan-10-15">topicIdToString (t : TopicID) : String := "&lt;TopicID&gt;";
</span><span id="__ispan-10-16">epochTimestampToString (et : Nat) : String := natToString et;
</span><span id="__ispan-10-17">tsStorageDBQueryToString (q : TSStorageDBQuery) : String := "&lt;TSQuery&gt;";
</span><span id="__ispan-10-18">tsStorageDBDataToString (d : TSStorageDBData) : String := "&lt;TSData&gt;";
</span><span id="__ispan-10-19">storageKeyToString (k : String) : String := k;
</span><span id="__ispan-10-20">storageValueToString (v : String) : String := v;
</span><span id="__ispan-10-21">encryptedMsgToString (em : EncryptedMsg) : String := "&lt;EncryptedMsg&gt;";
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-11-1">-- Helper to convert TransactionLabel to String
</span><span id="__ispan-11-2">transactionLabelToString (label : TransactionLabel KVSKey KVSKey) : String :=
</span><span id="__ispan-11-3">  let
</span><span id="__ispan-11-4">    readKeysStr := stringJoin "," (map kvsKeyToString (TransactionLabel.read label));
</span><span id="__ispan-11-5">    writeKeysStr := stringJoin "," (map kvsKeyToString (TransactionLabel.write label));
</span><span id="__ispan-11-6">  in "R:[" ++str readKeysStr ++str "]W:[" ++str writeKeysStr ++str "]";
</span></code></pre></div>
<h2 id="core-engine-message-converters">Core Engine Message Converters<a class="headerlink" href="#core-engine-message-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Functions to convert core engine messages (Mempool, Shard, Executor, Logging) into readable string representations.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-12-1">-- Specific message type to string converters
</span><span id="__ispan-12-2">
</span><span id="__ispan-12-3">terminating
</span><span id="__ispan-12-4">mempoolWorkerMsgToString (mwMsg : MempoolWorkerMsg Noun) : String :=
</span><span id="__ispan-12-5">  case mwMsg of {
</span><span id="__ispan-12-6">    | MempoolWorkerMsg.TransactionRequest tr :=
</span><span id="__ispan-12-7">      "TxReq(label: " ++str (transactionLabelToString (TransactionCandidate.label (TransactionRequest.tx tr))) ++str ")"
</span><span id="__ispan-12-8">    | MempoolWorkerMsg.TransactionAck ack :=
</span><span id="__ispan-12-9">      "TxAck(hash: " ++str (hashToString (TransactionAck.tx_hash ack)) ++str ", batch: " ++str (natToString (TransactionAck.batch_number ack)) ++str ")"
</span><span id="__ispan-12-10">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-13-1">terminating
</span><span id="__ispan-13-2">shardMsgToString (sMsg : ShardMsg) : String :=
</span><span id="__ispan-13-3">  case sMsg of {
</span><span id="__ispan-13-4">    | ShardMsg.KVSReadRequest req :=
</span><span id="__ispan-13-5">      "KVSReadReq(key:" ++str (kvsKeyToString (KVSReadRequestMsg.key req)) ++str ",ts:" ++str (natToString (KVSReadRequestMsg.timestamp req)) ++str ",act:" ++str (boolToString (KVSReadRequestMsg.actual req)) ++str ")"
</span><span id="__ispan-13-6">    | ShardMsg.KVSWrite write :=
</span><span id="__ispan-13-7">      let datumStr := case KVSWriteMsg.datum write of {
</span><span id="__ispan-13-8">        | none := "&lt;none&gt;"
</span><span id="__ispan-13-9">        | some d := kvsDatumToString d
</span><span id="__ispan-13-10">      };
</span><span id="__ispan-13-11">      in "KVSWrite(key:" ++str (kvsKeyToString (KVSWriteMsg.key write)) ++str ",ts:" ++str (natToString (KVSWriteMsg.timestamp write)) ++str ",data:" ++str datumStr ++str ")"
</span><span id="__ispan-13-12">    | ShardMsg.KVSAcquireLock acquireLock :=
</span><span id="__ispan-13-13">      "KVSAcquireLock(ts:" ++str (natToString (KVSAcquireLockMsg.timestamp acquireLock)) ++str ")"
</span><span id="__ispan-13-14">    | ShardMsg.KVSLockAcquired lockAcquired :=
</span><span id="__ispan-13-15">      "KVSLockAcquired(ts:" ++str (natToString (KVSLockAcquiredMsg.timestamp lockAcquired)) ++str ")"
</span><span id="__ispan-13-16">    | ShardMsg.KVSRead readReply :=
</span><span id="__ispan-13-17">      "KVSRead(key:" ++str (kvsKeyToString (KVSReadMsg.key readReply)) ++str ",ts:" ++str (natToString (KVSReadMsg.timestamp readReply)) ++str ",data:" ++str (kvsDatumToString (KVSReadMsg.data readReply)) ++str ")"
</span><span id="__ispan-13-18">    | ShardMsg.UpdateSeenAll updateSeenAll :=
</span><span id="__ispan-13-19">      "UpdateSeenAll(ts: " ++str (natToString (UpdateSeenAllMsg.timestamp updateSeenAll)) ++str ", write: " ++str (boolToString (UpdateSeenAllMsg.write updateSeenAll)) ++str ")"
</span><span id="__ispan-13-20">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-14-1">terminating
</span><span id="__ispan-14-2">executorMsgToString (execMsg : ExecutorMsg) : String :=
</span><span id="__ispan-14-3">  case execMsg of {
</span><span id="__ispan-14-4">    | ExecutorMsg.ExecutorFinished fin :=
</span><span id="__ispan-14-5">      "ExecFinished(ok: " ++str (boolToString (ExecutorFinishedMsg.success fin)) ++str ")" -- Simplified for now
</span><span id="__ispan-14-6">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-15-1">terminating
</span><span id="__ispan-15-2">loggingMsgToString (logMsg : LoggingMsg) : String :=
</span><span id="__ispan-15-3">  case logMsg of {
</span><span id="__ispan-15-4">    | LoggingMsg.Append appendVal :=
</span><span id="__ispan-15-5">      "LogAppend(val: \"" ++str (AppendValue.value appendVal) ++str "\")"
</span><span id="__ispan-15-6">  };
</span></code></pre></div>
<h2 id="identity-and-cryptographic-message-converters">Identity and Cryptographic Message Converters<a class="headerlink" href="#identity-and-cryptographic-message-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Converters for identity management, naming, and cryptographic operations (encryption, decryption, verification, etc.).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-16-1">-- Placeholder helpers for identity types
</span><span id="__ispan-16-2">identityNameToString (idName : IdentityName) : String := "&lt;IdentityName&gt;";
</span><span id="__ispan-16-3">externalIdentityToString (extId : ExternalIdentity) : String := "&lt;ExternalIdentity&gt;";
</span><span id="__ispan-16-4">identityNameEvidenceToString (evidence : IdentityNameEvidence) : String := "&lt;IdentityNameEvidence&gt;";
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-17-1">terminating
</span><span id="__ispan-17-2">namingMsgToString (nMsg : NamingMsg) : String :=
</span><span id="__ispan-17-3">  case nMsg of {
</span><span id="__ispan-17-4">    | NamingMsg.ResolveNameRequest req :=
</span><span id="__ispan-17-5">      "ResolveNameReq(name:" ++str (identityNameToString (RequestResolveName.identityName req)) ++str ")"
</span><span id="__ispan-17-6">    | NamingMsg.ResolveNameReply reply :=
</span><span id="__ispan-17-7">      let count := length (Set.toList (ReplyResolveName.externalIdentities reply));
</span><span id="__ispan-17-8">      in "ResolveNameReply(count:" ++str (natToString count) ++str ", err:" ++str (option (ReplyResolveName.err reply) "None" id) ++str ")"
</span><span id="__ispan-17-9">    | NamingMsg.SubmitNameEvidenceRequest req :=
</span><span id="__ispan-17-10">      "SubmitEvidenceReq(ev:" ++str (identityNameEvidenceToString (RequestSubmitNameEvidence.evidence req)) ++str ")"
</span><span id="__ispan-17-11">    | NamingMsg.SubmitNameEvidenceReply reply :=
</span><span id="__ispan-17-12">      "SubmitEvidenceReply(err:" ++str (option (ReplySubmitNameEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-17-13">    | NamingMsg.QueryNameEvidenceRequest req :=
</span><span id="__ispan-17-14">      "QueryEvidenceReq(id:" ++str (externalIdentityToString (RequestQueryNameEvidence.externalIdentity req)) ++str ")"
</span><span id="__ispan-17-15">    | NamingMsg.QueryNameEvidenceReply reply :=
</span><span id="__ispan-17-16">      let evCount := length (Set.toList (ReplyQueryNameEvidence.evidence reply));
</span><span id="__ispan-17-17">      in "QueryEvidenceReply(id:" ++str (externalIdentityToString (ReplyQueryNameEvidence.externalIdentity reply)) ++str ", evCount:" ++str (natToString evCount) ++str ", err:" ++str (option (ReplyQueryNameEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-17-18">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-18-1">-- Identity Management
</span><span id="__ispan-18-2">identityManagementMsgToString (imMsg : IdentityManagementMsg) : String :=
</span><span id="__ispan-18-3">  case imMsg of {
</span><span id="__ispan-18-4">    | IdentityManagementMsg.GenerateIdentityRequest req :=
</span><span id="__ispan-18-5">      "GenerateIdReq(be:" ++str (backendToString (RequestGenerateIdentity.backend req)) ++str ",cap:" ++str (capabilitiesToString (RequestGenerateIdentity.capabilities req)) ++str ")"
</span><span id="__ispan-18-6">    | IdentityManagementMsg.GenerateIdentityReply reply :=
</span><span id="__ispan-18-7">      "GenerateIdReply(extId:" ++str (engineIdToString (ReplyGenerateIdentity.externalIdentity reply)) ++str ",err:" ++str (option (ReplyGenerateIdentity.err reply) "None" id) ++str ")"
</span><span id="__ispan-18-8">    | IdentityManagementMsg.ConnectIdentityRequest req :=
</span><span id="__ispan-18-9">      "ConnectIdReq(id:" ++str (engineIdToString (RequestConnectIdentity.externalIdentity req)) ++str ",be:" ++str (backendToString (RequestConnectIdentity.backend req)) ++str ")"
</span><span id="__ispan-18-10">    | IdentityManagementMsg.ConnectIdentityReply reply :=
</span><span id="__ispan-18-11">      "ConnectIdReply(err:" ++str (option (ReplyConnectIdentity.err reply) "None" id) ++str ")"
</span><span id="__ispan-18-12">    | IdentityManagementMsg.DeleteIdentityRequest req :=
</span><span id="__ispan-18-13">      "DeleteIdReq(id:" ++str (engineIdToString (RequestDeleteIdentity.externalIdentity req)) ++str ",be:" ++str (backendToString (RequestDeleteIdentity.backend req)) ++str ")"
</span><span id="__ispan-18-14">    | IdentityManagementMsg.DeleteIdentityReply reply :=
</span><span id="__ispan-18-15">      "DeleteIdReply(err:" ++str (option (ReplyDeleteIdentity.err reply) "None" id) ++str ")"
</span><span id="__ispan-18-16">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-19-1">-- Decryption
</span><span id="__ispan-19-2">decryptionMsgToString (decMsg : DecryptionMsg) : String :=
</span><span id="__ispan-19-3">  case decMsg of {
</span><span id="__ispan-19-4">    | DecryptionMsg.Request req := "DecryptReq(data:" ++str (ciphertextToString (RequestDecryption.data req)) ++str ")"
</span><span id="__ispan-19-5">    | DecryptionMsg.Reply reply := "DecryptReply(data:" ++str (plaintextToString (ReplyDecryption.data reply)) ++str ",err:" ++str (option (ReplyDecryption.err reply) "None" id) ++str ")"
</span><span id="__ispan-19-6">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-20-1">-- Encryption
</span><span id="__ispan-20-2">encryptionMsgToString (encMsg : EncryptionMsg) : String :=
</span><span id="__ispan-20-3">  case encMsg of {
</span><span id="__ispan-20-4">    | EncryptionMsg.Request req := "EncryptReq(id:" ++str (externalIdentityToString (RequestEncrypt.externalIdentity req)) ++str ",readsFor:" ++str (boolToString (RequestEncrypt.useReadsFor req)) ++str ")"
</span><span id="__ispan-20-5">    | EncryptionMsg.Reply reply := "EncryptReply(data:" ++str (ciphertextToString (ReplyEncrypt.ciphertext reply)) ++str ",err:" ++str (option (ReplyEncrypt.err reply) "None" id) ++str ")"
</span><span id="__ispan-20-6">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-21-1">-- Commitment
</span><span id="__ispan-21-2">commitmentMsgToString (comMsg : CommitmentMsg) : String :=
</span><span id="__ispan-21-3">  case comMsg of {
</span><span id="__ispan-21-4">    | CommitmentMsg.Request req := "CommitReq(data:" ++str (signableToString (RequestCommitment.data req)) ++str ")"
</span><span id="__ispan-21-5">    | CommitmentMsg.Reply reply := "CommitReply(commit:" ++str (commitmentToString (ReplyCommitment.commitment reply)) ++str ",err:" ++str (option (ReplyCommitment.err reply) "None" id) ++str ")"
</span><span id="__ispan-21-6">  };
</span><span id="__ispan-21-7">
</span><span id="__ispan-21-8">-- Verification
</span><span id="__ispan-21-9">verificationMsgToString (verMsg : VerificationMsg) : String :=
</span><span id="__ispan-21-10">  case verMsg of {
</span><span id="__ispan-21-11">    | VerificationMsg.Request req :=
</span><span id="__ispan-21-12">      "VerifyReq(id:" ++str (externalIdentityToString (RequestVerification.externalIdentity req)) ++str ",useSf:" ++str (boolToString (RequestVerification.useSignsFor req)) ++str ")" -- Removed vk, using actual fields
</span><span id="__ispan-21-13">    | VerificationMsg.Reply reply :=
</span><span id="__ispan-21-14">      "VerifyReply(ok:" ++str (boolToString (ReplyVerification.result reply)) ++str ",err:" ++str (option (ReplyVerification.err reply) "None" id) ++str ")"
</span><span id="__ispan-21-15">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-22-1">-- ReadsFor
</span><span id="__ispan-22-2">readsForMsgToString (rfMsg : ReadsForMsg) : String :=
</span><span id="__ispan-22-3">  case rfMsg of {
</span><span id="__ispan-22-4">    | ReadsForMsg.Request req := "ReadsForReq(A:" ++str (externalIdentityToString (RequestReadsFor.externalIdentityA req)) ++str ",B:" ++str (externalIdentityToString (RequestReadsFor.externalIdentityB req)) ++str ")"
</span><span id="__ispan-22-5">    | ReadsForMsg.Reply reply := "ReadsForReply(ok:" ++str (boolToString (ReplyReadsFor.readsFor reply)) ++str ",err:" ++str (option (ReplyReadsFor.err reply) "None" id) ++str ")"
</span><span id="__ispan-22-6">    | ReadsForMsg.SubmitReadsForEvidenceRequest req := "SubmitReadsForEvReq(ev:" ++str (readsForEvidenceToString (RequestSubmitReadsForEvidence.evidence req)) ++str ")"
</span><span id="__ispan-22-7">    | ReadsForMsg.SubmitReadsForEvidenceReply reply := "SubmitReadsForEvReply(err:" ++str (option (ReplySubmitReadsForEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-22-8">    | ReadsForMsg.QueryReadsForEvidenceRequest req := "QueryReadsForEvReq(id:" ++str (externalIdentityToString (RequestQueryReadsForEvidence.externalIdentity req)) ++str ")"
</span><span id="__ispan-22-9">    | ReadsForMsg.QueryReadsForEvidenceReply reply := "QueryReadsForEvReply(id:" ++str (externalIdentityToString (ReplyQueryReadsForEvidence.externalIdentity reply)) ++str ",err:" ++str (option (ReplyQueryReadsForEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-22-10">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-23-1">-- SignsFor
</span><span id="__ispan-23-2">signsForMsgToString (sfMsg : SignsForMsg) : String :=
</span><span id="__ispan-23-3">  case sfMsg of {
</span><span id="__ispan-23-4">    | SignsForMsg.SignsForRequest req := "SignsForReq(A:" ++str (externalIdentityToString (RequestSignsFor.externalIdentityA req)) ++str ",B:" ++str (externalIdentityToString (RequestSignsFor.externalIdentityB req)) ++str ")"
</span><span id="__ispan-23-5">    | SignsForMsg.SignsForReply reply := "SignsForReply(ok:" ++str (boolToString (ReplySignsFor.signsFor reply)) ++str ",err:" ++str (option (ReplySignsFor.err reply) "None" id) ++str ")"
</span><span id="__ispan-23-6">    | SignsForMsg.SubmitSignsForEvidenceRequest req := "SubmitSignsForEvReq(ev:" ++str (signsForEvidenceToString (RequestSubmitSignsForEvidence.evidence req)) ++str ")"
</span><span id="__ispan-23-7">    | SignsForMsg.SubmitSignsForEvidenceReply reply := "SubmitSignsForEvReply(err:" ++str (option (ReplySubmitSignsForEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-23-8">    | SignsForMsg.QuerySignsForEvidenceRequest req := "QuerySignsForEvReq(id:" ++str (externalIdentityToString (RequestQuerySignsForEvidence.externalIdentity req)) ++str ")"
</span><span id="__ispan-23-9">    | SignsForMsg.QuerySignsForEvidenceReply reply := "QuerySignsForEvReply(id:" ++str (externalIdentityToString (ReplyQuerySignsForEvidence.externalIdentity reply)) ++str ",err:" ++str (option (ReplyQuerySignsForEvidence.err reply) "None" id) ++str ")"
</span><span id="__ispan-23-10">  };
</span></code></pre></div>
<h2 id="storage-and-system-message-converters">Storage and System Message Converters<a class="headerlink" href="#storage-and-system-message-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Converters for various storage systems (Local KV, Time Series) and system services (Wall Clock, etc.).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-24-1">-- Local Key Value Storage
</span><span id="__ispan-24-2">localKVStorageMsgToString (kvMsg : LocalKVStorageMsg) : String :=
</span><span id="__ispan-24-3">  case kvMsg of {
</span><span id="__ispan-24-4">    | LocalKVStorageMsg.GetValueRequest req := "KVGetReq(key:" ++str (storageKeyToString (GetValueKVStoreRequest.key req)) ++str ")"
</span><span id="__ispan-24-5">    | LocalKVStorageMsg.GetValueReply reply := "KVGetReply(key:" ++str (storageKeyToString (GetValueKVStoreReply.key reply)) ++str ",val:" ++str (storageValueToString (GetValueKVStoreReply.value reply)) ++str ")"
</span><span id="__ispan-24-6">    | LocalKVStorageMsg.SetValueRequest req := "KVSetReq(key:" ++str (storageKeyToString (SetValueKVStoreRequest.key req)) ++str ",val:" ++str (storageValueToString (SetValueKVStoreRequest.value req)) ++str ")"
</span><span id="__ispan-24-7">    | LocalKVStorageMsg.SetValueReply reply := "KVSetReply(key:" ++str (storageKeyToString (SetValueKVStoreReply.key reply)) ++str ",ok:" ++str (boolToString (SetValueKVStoreReply.success reply)) ++str ")"
</span><span id="__ispan-24-8">    | LocalKVStorageMsg.DeleteValueRequest req := "KVDelReq(key:" ++str (storageKeyToString (DeleteValueKVStoreRequest.key req)) ++str ")"
</span><span id="__ispan-24-9">    | LocalKVStorageMsg.DeleteValueReply reply := "KVDelReply(key:" ++str (storageKeyToString (DeleteValueKVStoreReply.key reply)) ++str ",ok:" ++str (boolToString (DeleteValueKVStoreReply.success reply)) ++str ")"
</span><span id="__ispan-24-10">    | LocalKVStorageMsg.ValueChanged notice := "KVChanged(key:" ++str (storageKeyToString (ValueChangedKVStore.key notice)) ++str ",val:" ++str (storageValueToString (ValueChangedKVStore.value notice)) ++str ",ts:" ++str (epochTimestampToString (ValueChangedKVStore.timestamp notice)) ++str ")"
</span><span id="__ispan-24-11">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-25-1">-- Wall Clock
</span><span id="__ispan-25-2">wallClockMsgToString (wcMsg : WallClockMsg) : String :=
</span><span id="__ispan-25-3">  case wcMsg of {
</span><span id="__ispan-25-4">    | WallClockMsg.GetTime := "GetTimeReq"
</span><span id="__ispan-25-5">    | WallClockMsg.GetTimeResult reply := "GetTimeReply(ts:" ++str (epochTimestampToString (TimeResult.epochTime reply)) ++str ")"
</span><span id="__ispan-25-6">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-26-1">-- Local Time Series Storage
</span><span id="__ispan-26-2">localTSStorageMsgToString (tsMsg : LocalTSStorageMsg) : String :=
</span><span id="__ispan-26-3">  case tsMsg of {
</span><span id="__ispan-26-4">    | LocalTSStorageMsg.GetRequest req := "TSGetReq(q:" ++str (tsStorageDBQueryToString (GetDataTSStorageDBRequest.query req)) ++str ")"
</span><span id="__ispan-26-5">    | LocalTSStorageMsg.GetReply reply := "TSGetReply(q:" ++str (tsStorageDBQueryToString (GetDataTSStorageDBReply.query reply)) ++str ",data:" ++str (tsStorageDBDataToString (GetDataTSStorageDBReply.data reply)) ++str ")"
</span><span id="__ispan-26-6">    | LocalTSStorageMsg.RecordRequest req := "TSRecordReq(q:" ++str (tsStorageDBQueryToString (RecordDataTSStorageDBRequest.query req)) ++str ")"
</span><span id="__ispan-26-7">    | LocalTSStorageMsg.RecordReply reply := "TSRecordReply(q:" ++str (tsStorageDBQueryToString (RecordDataTSStorageDBReply.query reply)) ++str ",ok:" ++str (boolToString (RecordDataTSStorageDBReply.success reply)) ++str ")"
</span><span id="__ispan-26-8">    | LocalTSStorageMsg.DeleteRequest req := "TSDeleteReq(q:" ++str (tsStorageDBQueryToString (DeleteDataTSStorageDBRequest.query req)) ++str ")"
</span><span id="__ispan-26-9">    | LocalTSStorageMsg.DeleteReply reply := "TSDeleteReply(q:" ++str (tsStorageDBQueryToString (DeleteDataTSStorageDBReply.query reply)) ++str ",ok:" ++str (boolToString (DeleteDataTSStorageDBReply.success reply)) ++str ")"
</span><span id="__ispan-26-10">    | LocalTSStorageMsg.DataChanged notice := "TSDataChanged(q:" ++str (tsStorageDBQueryToString (DataChangedTSStorageDB.query notice)) ++str ",data:" ++str (tsStorageDBDataToString (DataChangedTSStorageDB.data notice)) ++str ",ts:" ++str (epochTimestampToString (DataChangedTSStorageDB.timestamp notice)) ++str ")"
</span><span id="__ispan-26-11">  };
</span></code></pre></div>
<h2 id="network-and-transport-message-converters">Network and Transport Message Converters<a class="headerlink" href="#network-and-transport-message-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Converters for networking, routing, and transport-related messages.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-27-1">-- Net Registry
</span><span id="__ispan-27-2">netRegistryMsgToString (nrMsg : NetworkRegistryMsg) : String :=
</span><span id="__ispan-27-3">  case nrMsg of {
</span><span id="__ispan-27-4">    | NetworkRegistryMsg.NodeAdvert advert := "NodeAdvert(id:" ++str (nodeIdToString (NodeAdvert.id advert)) ++str ",v:" ++str (natToString (NodeAdvert.version advert)) ++str ")"
</span><span id="__ispan-27-5">    | NetworkRegistryMsg.TopicAdvert advert := "TopicAdvert(id:" ++str (topicIdToString (TopicAdvert.id advert)) ++str ",v:" ++str (natToString (TopicAdvert.version advert)) ++str ")"
</span><span id="__ispan-27-6">    | NetworkRegistryMsg.GetNodeAdvertRequest req := "GetNodeAdvertReq(id:" ++str (nodeIdToString req) ++str ")"
</span><span id="__ispan-27-7">    | NetworkRegistryMsg.GetNodeAdvertReply reply := "GetNodeAdvertReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-27-8">    | NetworkRegistryMsg.GetTopicAdvertRequest req := "GetTopicAdvertReq(id:" ++str (topicIdToString req) ++str ")"
</span><span id="__ispan-27-9">    | NetworkRegistryMsg.GetTopicAdvertReply reply := "GetTopicAdvertReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-27-10">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-28-1">-- Router
</span><span id="__ispan-28-2">routerMsgToString (rMsg : RouterMsg Msg) : String :=
</span><span id="__ispan-28-3">  case rMsg of {
</span><span id="__ispan-28-4">    | RouterMsg.NodeAdvert advert := "NodeAdvert(id:" ++str (nodeIdToString (NodeAdvert.id advert)) ++str ")"
</span><span id="__ispan-28-5">    | RouterMsg.Send outMsg := "RouterSend(to:" ++str (engineIdToString (EngineMsg.target (NodeOutMsg.msg outMsg))) ++str ")" -- Simplified
</span><span id="__ispan-28-6">    | RouterMsg.Recv inMsg := "RouterRecv(seq:" ++str (natToString (NodeMsg.seq inMsg)) ++str ")"
</span><span id="__ispan-28-7">    | RouterMsg.ConnectRequest req := "RouterConnectReq(src:" ++str (nodeIdToString (ConnectRequest.src_node_id req)) ++str ")"
</span><span id="__ispan-28-8">    | RouterMsg.ConnectReply reply := "RouterConnectReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-28-9">    | RouterMsg.SetPermanence perm := "SetPermanence(" ++str (case perm of { | ConnectionPermanence.RouterMsgConnectionEphemeral := "Eph" | ConnectionPermanence.RouterMsgConnectionPermanent := "Perm"}) ++str ")"
</span><span id="__ispan-28-10">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-29-1">-- Transport Protocol
</span><span id="__ispan-29-2">transportProtocolMsgToString (tpMsg : TransportProtocolMsg) : String :=
</span><span id="__ispan-29-3">  case tpMsg of {
</span><span id="__ispan-29-4">    | TransportProtocolMsg.Send req := "TpSend(addr:" ++str (transportAddressToString (TransportOutMsg.addr req)) ++str ")"
</span><span id="__ispan-29-5">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-30-1">-- Transport Connection
</span><span id="__ispan-30-2">transportConnectionMsgToString (tcMsg : TransportConnectionMsg) : String :=
</span><span id="__ispan-30-3">  case tcMsg of {
</span><span id="__ispan-30-4">    | TransportConnectionMsg.Send outMsg :=
</span><span id="__ispan-30-5">      let
</span><span id="__ispan-30-6">        innerNodeMsg := TransportConnectionOutMsg.msg outMsg;
</span><span id="__ispan-30-7">        seqStr := natToString (NodeMsg.seq innerNodeMsg);
</span><span id="__ispan-30-8">        encMsgDetailStr := encryptedMsgToString (NodeMsg.msg innerNodeMsg);
</span><span id="__ispan-30-9">      in "TcSend(seq:" ++str seqStr ++str ", msg:" ++str encMsgDetailStr ++str ")"
</span><span id="__ispan-30-10">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-31-1">-- Pub Sub Topic
</span><span id="__ispan-31-2">pubSubTopicMsgToString (psMsg : PubSubTopicMsg) : String :=
</span><span id="__ispan-31-3">  case psMsg of {
</span><span id="__ispan-31-4">    | PubSubTopicMsg.Forward _ := "PsForward" -- Placeholder for TopicMsg details
</span><span id="__ispan-31-5">    | PubSubTopicMsg.SubRequest req := "PsSubReq(topic:" ++str (topicIdToString (TopicSubRequest.topic req)) ++str ")"
</span><span id="__ispan-31-6">    | PubSubTopicMsg.SubReply reply := "PsSubReply(ok:" ++str (boolToString (isRight reply)) ++str ")"
</span><span id="__ispan-31-7">    | PubSubTopicMsg.UnsubRequest req := "PsUnsubReq(topic:" ++str (topicIdToString (TopicUnsubRequest.topic req)) ++str ")"
</span><span id="__ispan-31-8">    | PubSubTopicMsg.UnsubReply reply := "PsUnsubReply(ok:" ++str (boolToString (isRight reply)) ++str ")"
</span><span id="__ispan-31-9">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-32-1">-- Storage
</span><span id="__ispan-32-2">storageMsgToString (stMsg : StorageMsg) : String :=
</span><span id="__ispan-32-3">  case stMsg of {
</span><span id="__ispan-32-4">    | StorageMsg.ChunkGetRequest req := "ChunkGetReq(id:" ++str (chunkIdToString (ChunkGetRequest.chunk req)) ++str ")"
</span><span id="__ispan-32-5">    | StorageMsg.ChunkGetReply reply := "ChunkGetReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-32-6">    | StorageMsg.ChunkPutRequest _ := "ChunkPutReq" -- Chunk type has no ID field
</span><span id="__ispan-32-7">    | StorageMsg.ChunkPutReply reply := "ChunkPutReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-32-8">  };
</span></code></pre></div>
<h2 id="template-and-utility-message-converters">Template and Utility Message Converters<a class="headerlink" href="#template-and-utility-message-converters" title="Anchor link to this section for reference">¶</a></h2>
<p>Converters for template engines and utility services like ticker.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-33-1">-- Ticker
</span><span id="__ispan-33-2">tickerMsgToString (tMsg : TickerMsg) : String :=
</span><span id="__ispan-33-3">  case tMsg of {
</span><span id="__ispan-33-4">    | TickerMsg.Increment := "TickInc"
</span><span id="__ispan-33-5">    | TickerMsg.CountRequest := "TickCountReq"
</span><span id="__ispan-33-6">    | TickerMsg.CountReply reply := "TickCountReply(val:" ++str (natToString (CountReply.counter reply)) ++str ")"
</span><span id="__ispan-33-7">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-34-1">-- Template
</span><span id="__ispan-34-2">templateMsgToString (tMsg : TemplateMsg) : String :=
</span><span id="__ispan-34-3">  case tMsg of {
</span><span id="__ispan-34-4">    | TemplateMsg.JustHi := "TemplateHi"
</span><span id="__ispan-34-5">    | TemplateMsg.ExampleRequest (ExampleRequest.mk@{argOne := a1; argTwo := a2}) := "TemplateExampleReq(a1:" ++str (natToString a1) ++str ",a2:" ++str (natToString a2) ++str ")"
</span><span id="__ispan-34-6">    | TemplateMsg.ExampleReply reply := "TemplateExampleReply(ok:" ++str (boolToString (isRight reply)) ++str ")" -- Simplified
</span><span id="__ispan-34-7">  };
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-35-1">-- TemplateMinimum
</span><span id="__ispan-35-2">templateMinimumMsgToString (tmMsg : TemplateMinimum.TemplateMinimumMsg) : String :=
</span><span id="__ispan-35-3">  case tmMsg of {
</span><span id="__ispan-35-4">    | TemplateMinimum.TemplateMinimumMsg.JustHi := "TemplateMinimumHi"
</span><span id="__ispan-35-5">    | TemplateMinimum.TemplateMinimumMsg.ExampleRequest req :=
</span><span id="__ispan-35-6">      "TemplateMinExampleReq(a1:" ++str (natToString (TemplateMinimum.ExampleRequest.argOne req)) ++str ",a2:" ++str (natToString (TemplateMinimum.ExampleRequest.argTwo req)) ++str ")"
</span><span id="__ispan-35-7">    | TemplateMinimum.TemplateMinimumMsg.ExampleReply reply :=
</span><span id="__ispan-35-8">      case reply of {
</span><span id="__ispan-35-9">        | right payload := "TemplateMinExampleReply(ok:" ++str (TemplateMinimum.ReplyPayload.payload payload) ++str ")"
</span><span id="__ispan-35-10">        | left err := "TemplateMinExampleReply(err:" ++str (TemplateMinimum.ReplyError.error err) ++str ")"
</span><span id="__ispan-35-11">      }
</span><span id="__ispan-35-12">  };
</span></code></pre></div>
<h2 id="main-message-dispatcher-and-mermaid-generation">Main Message Dispatcher and Mermaid Generation<a class="headerlink" href="#main-message-dispatcher-and-mermaid-generation" title="Anchor link to this section for reference">¶</a></h2>
<p>The core functions that tie everything together - the main message dispatcher and the Mermaid diagram generation logic.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__ispan-36-1">-- Main dispatcher function for Msg to String
</span><span id="__ispan-36-2">terminating
</span><span id="__ispan-36-3">msgToString (actualMsg : Msg) : String :=
</span><span id="__ispan-36-4">  case actualMsg of {
</span><span id="__ispan-36-5">    | Msg.MempoolWorker mwMsg := mempoolWorkerMsgToString mwMsg
</span><span id="__ispan-36-6">    | Msg.Shard shardMsg := shardMsgToString shardMsg
</span><span id="__ispan-36-7">    | Msg.Executor execMsg := executorMsgToString execMsg
</span><span id="__ispan-36-8">    | Msg.IdentityManagement imMsg := identityManagementMsgToString imMsg
</span><span id="__ispan-36-9">    | Msg.Decryption decMsg := decryptionMsgToString decMsg
</span><span id="__ispan-36-10">    | Msg.Encryption encMsg := encryptionMsgToString encMsg
</span><span id="__ispan-36-11">    | Msg.Commitment comMsg := commitmentMsgToString comMsg
</span><span id="__ispan-36-12">    | Msg.Verification verMsg := verificationMsgToString verMsg
</span><span id="__ispan-36-13">    | Msg.ReadsFor rfMsg := readsForMsgToString rfMsg
</span><span id="__ispan-36-14">    | Msg.SignsFor sfMsg := signsForMsgToString sfMsg
</span><span id="__ispan-36-15">    | Msg.Naming nMsg := namingMsgToString nMsg
</span><span id="__ispan-36-16">    | Msg.LocalKVStorage kvMsg := localKVStorageMsgToString kvMsg
</span><span id="__ispan-36-17">    | Msg.Logging logMsg := loggingMsgToString logMsg
</span><span id="__ispan-36-18">    | Msg.WallClock wcMsg := wallClockMsgToString wcMsg
</span><span id="__ispan-36-19">    | Msg.LocalTSStorage tsMsg := localTSStorageMsgToString tsMsg
</span><span id="__ispan-36-20">    | Msg.Router rMsg := routerMsgToString rMsg
</span><span id="__ispan-36-21">    | Msg.TransportProtocol tpMsg := transportProtocolMsgToString tpMsg
</span><span id="__ispan-36-22">    | Msg.TransportConnection tcMsg := transportConnectionMsgToString tcMsg
</span><span id="__ispan-36-23">    | Msg.PubSubTopic psMsg := pubSubTopicMsgToString psMsg
</span><span id="__ispan-36-24">    | Msg.Storage stMsg := storageMsgToString stMsg
</span><span id="__ispan-36-25">    | Msg.Ticker tMsg := tickerMsgToString tMsg
</span><span id="__ispan-36-26">    | Msg.Template tMsg := templateMsgToString tMsg
</span><span id="__ispan-36-27">    | Msg.TemplateMinimum tmMsg := templateMinimumMsgToString tmMsg
</span><span id="__ispan-36-28">  };
</span><span id="__ispan-36-29">
</span><span id="__ispan-36-30">-- Helper to convert a single message to its Mermaid string representation
</span><span id="__ispan-36-31">messageToMermaid (message : EngineMsg Msg) : String :=
</span><span id="__ispan-36-32">  let
</span><span id="__ispan-36-33">    senderStr : String := engineIdToString (EngineMsg.sender message);
</span><span id="__ispan-36-34">    targetStr : String := engineIdToString (EngineMsg.target message);
</span><span id="__ispan-36-35">    label : String := msgToString (EngineMsg.msg message);
</span><span id="__ispan-36-36">  in "    " ++str senderStr ++str "-&gt;&gt;" ++str targetStr ++str ": " ++str label ++str "\n";
</span><span id="__ispan-36-37">
</span><span id="__ispan-36-38">-- Function to pretty print the message list as a Mermaid sequence diagram
</span><span id="__ispan-36-39">prettyPrintMessageList (messages : List (EngineMsg Msg)) : String :=
</span><span id="__ispan-36-40">  let
</span><span id="__ispan-36-41">    participantsSet : Set String := getParticipants messages;
</span><span id="__ispan-36-42">    participantDeclarations : String := stringJoin "\n    " (map (\{p := "participant " ++str p}) (Set.toList participantsSet));
</span><span id="__ispan-36-43">
</span><span id="__ispan-36-44">    messageLines : String := stringJoin "" (map messageToMermaid messages);
</span><span id="__ispan-36-45">
</span><span id="__ispan-36-46">  in "sequenceDiagram\n"
</span><span id="__ispan-36-47">     ++str "    autonumber\n"
</span><span id="__ispan-36-48">     ++str (if | Set.isEmpty participantsSet := "" | else := "    " ++str participantDeclarations ++str "\n")
</span><span id="__ispan-36-49">     ++str messageLines;
</span></code></pre></div>
<!-- list_wikilinks -->
<!-- Source file information -->
<!-- Was this page helpful? -->
<!-- Comment system -->
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Engine Simulator" class="md-footer__link md-footer__link--prev" href="simulator.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Engine Simulator
              </div>
</div>
</a>
<a aria-label="Next: Increment Example" class="md-footer__link md-footer__link--next" href="examples/increment.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Increment Example
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.22 2.97a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l2.97-2.97H3.75a.75.75 0 0 1 0-1.5h7.44L8.22 4.03a.75.75 0 0 1 0-1.06"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      © 2025 <a href="https://anoma.net">Anoma Foundation</a>
</div>
<strong>Version: (PR 374) - Updated: June 03,
    2025 at 06:17 AM UTC</strong>
<br/>
<strong>Latest version: <a href="https://specs.anoma.net/latest">
    https://specs.anoma.net/latest</a></strong>
<br/>
<strong>Development version: <a href="https://specs.anoma.net/main">
    https://specs.anoma.net/main</a></strong>
<br/>
<strong>Anoma Official Resources:</strong>
<small> <a href="https://anoma.net/" target="_blank">Website</a> | <a href="https://art.anoma.net" target="_blank">Research</a> | <a href="https://anoma.net/blog" target="_blank">Blog</a> | <a href="https://anoma.net/talks" target="_blank">Talks</a> </small>
<br/>
<strong>For Specification Authors:</strong>
<small>
<a href="https://specs.anoma.net/pr-374/indexes/tags.html">Tags</a>
    | <a href="https://specs.anoma.net/pr-374/indexes/links.html">Quick links</a>
    | <a href="https://specs.anoma.net/pr-374/indexes/juvix_modules.html">Juvix modules</a>
    | <a href="https://specs.anoma.net/pr-374/tutorial/index.html">Guides</a>
</small>
</div>
<div class="md-social">
<a class="md-social__link" href="https://x.com/anoma" rel="noopener" target="_blank" title="x.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/anoma" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://anoma.net/blog" rel="noopener" target="_blank" title="anoma.net">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"></path></svg>
</a>
<a class="md-social__link" href="https://research.anoma.net" rel="noopener" target="_blank" title="research.anoma.net">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"></path></svg>
</a>
<a class="md-social__link" href="https://youtube.com/anoma" rel="noopener" target="_blank" title="youtube.com">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg>
</a>
<a class="md-social__link" href="mailto:arts@heliax.dev" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "content.action.edit", "content.action.view", "search.highlight", "search.suggest", "search.sharing", "navigation.instant.preview", "navigation.tracking", "navigation.prune", "navigation.indexes", "navigation.sections", "navigation.footer", "navigation.path", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
<script src="../../../assets/js/extra.js"></script>
<script src="../../../assets/js/highlight.js"></script>
<script src="../../../assets/js/mathjax.js"></script>
<script src="../../../assets/js/tex-svg-full.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>